```ad-question
title: åˆ†æ•°èƒŒåŒ…
ç»™å®šÂ ğ‘›Â ä¸ªç‰©å“ï¼Œç¬¬Â ğ‘–Â ä¸ªç‰©å“çš„é‡é‡ä¸ºÂ ğ‘¤ğ‘”ğ‘¡[ğ‘–âˆ’1]ã€ä»·å€¼ä¸ºÂ ğ‘£ğ‘ğ‘™[ğ‘–âˆ’1]Â ï¼Œå’Œä¸€ä¸ªå®¹é‡ä¸ºÂ ğ‘ğ‘ğ‘Â çš„èƒŒåŒ…ã€‚æ¯ä¸ªç‰©å“åªèƒ½é€‰æ‹©ä¸€æ¬¡ï¼Œ**ä½†å¯ä»¥é€‰æ‹©ç‰©å“çš„ä¸€éƒ¨åˆ†ï¼Œä»·å€¼æ ¹æ®é€‰æ‹©çš„é‡é‡æ¯”ä¾‹è®¡ç®—**ï¼Œé—®åœ¨é™å®šèƒŒåŒ…å®¹é‡ä¸‹èƒŒåŒ…ä¸­ç‰©å“çš„æœ€å¤§ä»·å€¼ã€‚ç¤ºä¾‹å¦‚å›¾ 15-3 æ‰€ç¤ºã€‚

```
![[Pasted image 20240610212725.png]]
åˆ†æ•°èƒŒåŒ…é—®é¢˜å’Œ 0-1 èƒŒåŒ…é—®é¢˜æ•´ä½“ä¸Šéå¸¸ç›¸ä¼¼ï¼ŒçŠ¶æ€åŒ…å«å½“å‰ç‰©å“Â ğ‘–Â å’Œå®¹é‡Â ğ‘Â ï¼Œç›®æ ‡æ˜¯æ±‚é™å®šèƒŒåŒ…å®¹é‡ä¸‹çš„æœ€å¤§ä»·å€¼ã€‚

ä¸åŒç‚¹åœ¨äºï¼Œæœ¬é¢˜å…è®¸åªé€‰æ‹©ç‰©å“çš„ä¸€éƒ¨åˆ†ã€‚å¦‚å›¾ 15-4 æ‰€ç¤ºï¼Œ**æˆ‘ä»¬å¯ä»¥å¯¹ç‰©å“ä»»æ„åœ°è¿›è¡Œåˆ‡åˆ†ï¼Œå¹¶æŒ‰ç…§é‡é‡æ¯”ä¾‹æ¥è®¡ç®—ç›¸åº”ä»·å€¼**ã€‚
1. å¯¹äºç‰©å“Â ğ‘–Â ï¼Œå®ƒåœ¨å•ä½é‡é‡ä¸‹çš„ä»·å€¼ä¸ºÂ ğ‘£ğ‘ğ‘™[ğ‘–âˆ’1]/ğ‘¤ğ‘”ğ‘¡[ğ‘–âˆ’1]Â ï¼Œç®€ç§°å•ä½ä»·å€¼ã€‚
2. å‡è®¾æ”¾å…¥ä¸€éƒ¨åˆ†ç‰©å“Â ğ‘–Â ï¼Œé‡é‡ä¸ºÂ ğ‘¤Â ï¼Œåˆ™èƒŒåŒ…å¢åŠ çš„ä»·å€¼ä¸ºÂ ğ‘¤Ã—ğ‘£ğ‘ğ‘™[ğ‘–âˆ’1]/ğ‘¤ğ‘”ğ‘¡[ğ‘–âˆ’1]Â ã€‚
![[Pasted image 20240610212942.png]]

### 1. è´ªå¿ƒç­–ç•¥ç¡®å®š
æœ€å¤§åŒ–èƒŒåŒ…å†…ç‰©å“æ€»ä»·å€¼ï¼Œ**æœ¬è´¨ä¸Šæ˜¯æœ€å¤§åŒ–å•ä½é‡é‡ä¸‹çš„ç‰©å“ä»·å€¼**ã€‚ç”±æ­¤ä¾¿å¯æ¨ç†å‡ºå›¾ 15-5 æ‰€ç¤ºçš„è´ªå¿ƒç­–ç•¥ã€‚
1. å°†ç‰©å“æŒ‰ç…§å•ä½ä»·å€¼ä»é«˜åˆ°ä½è¿›è¡Œæ’åºã€‚
2. éå†æ‰€æœ‰ç‰©å“ï¼Œ**æ¯è½®è´ªå¿ƒåœ°é€‰æ‹©å•ä½ä»·å€¼æœ€é«˜çš„ç‰©å“**ã€‚
3. è‹¥å‰©ä½™èƒŒåŒ…å®¹é‡ä¸è¶³ï¼Œåˆ™ä½¿ç”¨å½“å‰ç‰©å“çš„ä¸€éƒ¨åˆ†å¡«æ»¡èƒŒåŒ…ã€‚

![[Pasted image 20240610213055.png]]

### 2. ä»£ç å®ç°
æˆ‘ä»¬å»ºç«‹äº†ä¸€ä¸ªç‰©å“ç±»Â `Item`Â ï¼Œä»¥ä¾¿å°†ç‰©å“æŒ‰ç…§å•ä½ä»·å€¼è¿›è¡Œæ’åºã€‚å¾ªç¯è¿›è¡Œè´ªå¿ƒé€‰æ‹©ï¼Œå½“èƒŒåŒ…å·²æ»¡æ—¶è·³å‡ºå¹¶è¿”å›è§£ï¼š
```python
class Item:
    """ç‰©å“"""

    def __init__(self, w: int, v: int):
        self.w = w  # ç‰©å“é‡é‡
        self.v = v  # ç‰©å“ä»·å€¼

def fractional_knapsack(wgt: list[int], val: list[int], cap: int) -> int:
    """åˆ†æ•°èƒŒåŒ…ï¼šè´ªå¿ƒ"""
    # åˆ›å»ºç‰©å“åˆ—è¡¨ï¼ŒåŒ…å«ä¸¤ä¸ªå±æ€§ï¼šé‡é‡ã€ä»·å€¼
    items = [Item(w, v) for w, v in zip(wgt, val)]
    # æŒ‰ç…§å•ä½ä»·å€¼ item.v / item.w ä»é«˜åˆ°ä½è¿›è¡Œæ’åº
    items.sort(key=lambda item: item.v / item.w, reverse=True)
    # å¾ªç¯è´ªå¿ƒé€‰æ‹©
    res = 0
    for item in items:
        if item.w <= cap:
            # è‹¥å‰©ä½™å®¹é‡å……è¶³ï¼Œåˆ™å°†å½“å‰ç‰©å“æ•´ä¸ªè£…è¿›èƒŒåŒ…
            res += item.v
            cap -= item.w
        else:
            # è‹¥å‰©ä½™å®¹é‡ä¸è¶³ï¼Œåˆ™å°†å½“å‰ç‰©å“çš„ä¸€éƒ¨åˆ†è£…è¿›èƒŒåŒ…
            res += (item.v / item.w) * cap
            # å·²æ— å‰©ä½™å®¹é‡ï¼Œå› æ­¤è·³å‡ºå¾ªç¯
            break
    return res
```

é™¤æ’åºä¹‹å¤–ï¼Œåœ¨æœ€å·®æƒ…å†µä¸‹ï¼Œéœ€è¦éå†æ•´ä¸ªç‰©å“åˆ—è¡¨ï¼Œ**å› æ­¤æ—¶é—´å¤æ‚åº¦ä¸ºÂ ğ‘‚(ğ‘›)**Â ï¼Œå…¶ä¸­Â ğ‘›Â ä¸ºç‰©å“æ•°é‡ã€‚

ç”±äºåˆå§‹åŒ–äº†ä¸€ä¸ªÂ `Item`Â å¯¹è±¡åˆ—è¡¨ï¼Œ**å› æ­¤ç©ºé—´å¤æ‚åº¦ä¸ºÂ ğ‘‚(ğ‘›)**Â ã€‚

### 3. æ­£ç¡®æ€§è¯æ˜
é‡‡ç”¨åè¯æ³•ã€‚å‡è®¾ç‰©å“Â ğ‘¥Â æ˜¯å•ä½ä»·å€¼æœ€é«˜çš„ç‰©å“ï¼Œä½¿ç”¨æŸç®—æ³•æ±‚å¾—æœ€å¤§ä»·å€¼ä¸ºÂ `res`Â ï¼Œä½†è¯¥è§£ä¸­ä¸åŒ…å«ç‰©å“Â ğ‘¥Â ã€‚

ç°åœ¨ä»èƒŒåŒ…ä¸­æ‹¿å‡ºå•ä½é‡é‡çš„ä»»æ„ç‰©å“ï¼Œå¹¶æ›¿æ¢ä¸ºå•ä½é‡é‡çš„ç‰©å“Â ğ‘¥Â ã€‚ç”±äºç‰©å“Â ğ‘¥Â çš„å•ä½ä»·å€¼æœ€é«˜ï¼Œå› æ­¤æ›¿æ¢åçš„æ€»ä»·å€¼ä¸€å®šå¤§äºÂ `res`Â ã€‚**è¿™ä¸Â `res`Â æ˜¯æœ€ä¼˜è§£çŸ›ç›¾ï¼Œè¯´æ˜æœ€ä¼˜è§£ä¸­å¿…é¡»åŒ…å«ç‰©å“Â ğ‘¥**Â ã€‚

å¯¹äºè¯¥è§£ä¸­çš„å…¶ä»–ç‰©å“ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æ„å»ºå‡ºä¸Šè¿°çŸ›ç›¾ã€‚æ€»è€Œè¨€ä¹‹ï¼Œ**å•ä½ä»·å€¼æ›´å¤§çš„ç‰©å“æ€»æ˜¯æ›´ä¼˜é€‰æ‹©**ï¼Œè¿™è¯´æ˜è´ªå¿ƒç­–ç•¥æ˜¯æœ‰æ•ˆçš„ã€‚

å¦‚å›¾ 15-6 æ‰€ç¤ºï¼Œå¦‚æœå°†ç‰©å“é‡é‡å’Œç‰©å“å•ä½ä»·å€¼åˆ†åˆ«çœ‹ä½œä¸€å¼ äºŒç»´å›¾è¡¨çš„æ¨ªè½´å’Œçºµè½´ï¼Œåˆ™åˆ†æ•°èƒŒåŒ…é—®é¢˜å¯è½¬åŒ–ä¸ºâ€œæ±‚åœ¨æœ‰é™æ¨ªè½´åŒºé—´ä¸‹å›´æˆçš„æœ€å¤§é¢ç§¯â€ã€‚è¿™ä¸ªç±»æ¯”å¯ä»¥å¸®åŠ©æˆ‘ä»¬ä»å‡ ä½•è§’åº¦ç†è§£è´ªå¿ƒç­–ç•¥çš„æœ‰æ•ˆæ€§ã€‚
![[Pasted image 20240610213312.png]]
