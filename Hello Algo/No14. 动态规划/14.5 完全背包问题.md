## 14.5.1 å®Œå…¨èƒŒåŒ…é—®é¢˜
```ad-question
title: å®Œå…¨èƒŒåŒ…é—®é¢˜
ç»™å®šÂ ğ‘›Â ä¸ªç‰©å“ï¼Œç¬¬Â ğ‘–Â ä¸ªç‰©å“çš„é‡é‡ä¸ºÂ ğ‘¤ğ‘”ğ‘¡[ğ‘–âˆ’1]ã€ä»·å€¼ä¸ºÂ ğ‘£ğ‘ğ‘™[ğ‘–âˆ’1]Â ï¼Œå’Œä¸€ä¸ªå®¹é‡ä¸ºÂ ğ‘ğ‘ğ‘Â çš„èƒŒåŒ…ã€‚**æ¯ä¸ªç‰©å“å¯ä»¥é‡å¤é€‰å–**ï¼Œé—®åœ¨é™å®šèƒŒåŒ…å®¹é‡ä¸‹èƒ½æ”¾å…¥ç‰©å“çš„æœ€å¤§ä»·å€¼ã€‚ç¤ºä¾‹å¦‚å›¾ 14-22 æ‰€ç¤ºã€‚

```
![[Pasted image 20240610105806.png]]

### 1. åŠ¨æ€è§„åˆ’æ€è·¯
å®Œå…¨èƒŒåŒ…é—®é¢˜å’Œ 0-1 èƒŒåŒ…é—®é¢˜éå¸¸ç›¸ä¼¼ï¼Œ**åŒºåˆ«ä»…åœ¨äºä¸é™åˆ¶ç‰©å“çš„é€‰æ‹©æ¬¡æ•°**ã€‚
- åœ¨ 0-1 èƒŒåŒ…é—®é¢˜ä¸­ï¼Œæ¯ç§ç‰©å“åªæœ‰ä¸€ä¸ªï¼Œå› æ­¤å°†ç‰©å“Â ğ‘–Â æ”¾å…¥èƒŒåŒ…åï¼Œåªèƒ½ä»å‰Â ğ‘–âˆ’1Â ä¸ªç‰©å“ä¸­é€‰æ‹©ã€‚
- åœ¨å®Œå…¨èƒŒåŒ…é—®é¢˜ä¸­ï¼Œæ¯ç§ç‰©å“çš„æ•°é‡æ˜¯æ— é™çš„ï¼Œå› æ­¤å°†ç‰©å“Â ğ‘–Â æ”¾å…¥èƒŒåŒ…åï¼Œ**ä»å¯ä»¥ä»å‰Â ğ‘–Â ä¸ªç‰©å“ä¸­é€‰æ‹©**ã€‚

åœ¨å®Œå…¨èƒŒåŒ…é—®é¢˜çš„è§„å®šä¸‹ï¼ŒçŠ¶æ€Â [ğ‘–,ğ‘]Â çš„å˜åŒ–åˆ†ä¸ºä¸¤ç§æƒ…å†µã€‚
- **ä¸æ”¾å…¥ç‰©å“Â ğ‘–**Â ï¼šä¸ 0-1 èƒŒåŒ…é—®é¢˜ç›¸åŒï¼Œè½¬ç§»è‡³Â [ğ‘–âˆ’1,ğ‘]Â ã€‚
- **æ”¾å…¥ç‰©å“Â ğ‘–**Â ï¼šä¸ 0-1 èƒŒåŒ…é—®é¢˜ä¸åŒï¼Œè½¬ç§»è‡³Â [ğ‘–,ğ‘âˆ’ğ‘¤ğ‘”ğ‘¡[ğ‘–âˆ’1]]Â ã€‚

ä»è€ŒçŠ¶æ€è½¬ç§»æ–¹ç¨‹å˜ä¸ºï¼š
![[Pasted image 20240610105834.png]]

### 2. ä»£ç å®ç°
å¯¹æ¯”ä¸¤é“é¢˜ç›®çš„ä»£ç ï¼ŒçŠ¶æ€è½¬ç§»ä¸­æœ‰ä¸€å¤„ä»Â ğ‘–âˆ’1Â å˜ä¸ºÂ ğ‘–Â ï¼Œå…¶ä½™å®Œå…¨ä¸€è‡´ï¼š
```python
def unbounded_knapsack_dp(wgt: list[int], val: list[int], cap: int) -> int:
	"""å®Œå…¨èƒŒåŒ…ï¼šåŠ¨æ€è§„åˆ’"""
	n = len(wgt)
	# åˆå§‹åŒ– dp è¡¨
	dp = [[0] * (cap + 1) for _ in range(n + 1)]
	# çŠ¶æ€è½¬ç§»
	for i in range(1, n + 1):
	    for c in range(1, cap + 1):
	        if wgt[i - 1] > c:
	            # è‹¥è¶…è¿‡èƒŒåŒ…å®¹é‡ï¼Œåˆ™ä¸é€‰ç‰©å“ i
	            dp[i][c] = dp[i - 1][c]
	        else:
	            # ä¸é€‰å’Œé€‰ç‰©å“ i è¿™ä¸¤ç§æ–¹æ¡ˆçš„è¾ƒå¤§å€¼
	            dp[i][c] = max(dp[i - 1][c], dp[i][c - wgt[i - 1]] + val[i - 1])
	return dp[n][cap]
```

### 3. ç©ºé—´ä¼˜åŒ–
ç”±äºå½“å‰çŠ¶æ€æ˜¯ä»å·¦è¾¹å’Œä¸Šè¾¹çš„çŠ¶æ€è½¬ç§»è€Œæ¥çš„ï¼Œ**å› æ­¤ç©ºé—´ä¼˜åŒ–ååº”è¯¥å¯¹Â ğ‘‘ğ‘Â è¡¨ä¸­çš„æ¯ä¸€è¡Œè¿›è¡Œæ­£åºéå†**ã€‚
è¿™ä¸ªéå†é¡ºåºä¸ 0-1 èƒŒåŒ…æ­£å¥½ç›¸åã€‚
```python
def unbounded_knapsack_dp_comp(wgt: list[int], val: list[int], cap: int) -> int:
	"""å®Œå…¨èƒŒåŒ…ï¼šç©ºé—´ä¼˜åŒ–åçš„åŠ¨æ€è§„åˆ’"""
	n = len(wgt)
	# åˆå§‹åŒ– dp è¡¨
	dp = [0] * (cap + 1)
	# çŠ¶æ€è½¬ç§»
	for i in range(1, n + 1):
	    # æ­£åºéå†
	    for c in range(1, cap + 1):
	        if wgt[i - 1] > c:
	            # è‹¥è¶…è¿‡èƒŒåŒ…å®¹é‡ï¼Œåˆ™ä¸é€‰ç‰©å“ i
	            dp[c] = dp[c]
	        else:
	            # ä¸é€‰å’Œé€‰ç‰©å“ i è¿™ä¸¤ç§æ–¹æ¡ˆçš„è¾ƒå¤§å€¼
	            dp[c] = max(dp[c], dp[c - wgt[i - 1]] + val[i - 1])
	return dp[cap]
```

## 14.5.2 é›¶é’±å…‘æ¢é—®é¢˜
èƒŒåŒ…é—®é¢˜æ˜¯ä¸€å¤§ç±»åŠ¨æ€è§„åˆ’é—®é¢˜çš„ä»£è¡¨ï¼Œå…¶æ‹¥æœ‰å¾ˆå¤šå˜ç§ï¼Œä¾‹å¦‚é›¶é’±å…‘æ¢é—®é¢˜ã€‚
```ad-question
title: é›¶é’±å…‘æ¢
ç»™å®šÂ ğ‘›Â ç§ç¡¬å¸ï¼Œç¬¬Â ğ‘–Â ç§ç¡¬å¸çš„é¢å€¼ä¸ºÂ ğ‘ğ‘œğ‘–ğ‘›ğ‘ [ğ‘–âˆ’1]Â ï¼Œç›®æ ‡é‡‘é¢ä¸ºÂ ğ‘ğ‘šğ‘¡Â ï¼Œ**æ¯ç§ç¡¬å¸å¯ä»¥é‡å¤é€‰å–**ï¼Œé—®èƒ½å¤Ÿå‡‘å‡ºç›®æ ‡é‡‘é¢çš„æœ€å°‘ç¡¬å¸æ•°é‡ã€‚å¦‚æœæ— æ³•å‡‘å‡ºç›®æ ‡é‡‘é¢ï¼Œåˆ™è¿”å›Â âˆ’1Â ã€‚ç¤ºä¾‹å¦‚å›¾ 14-24 æ‰€ç¤ºã€‚

```
![[Pasted image 20240610110120.png]]

### 1. åŠ¨æ€è§„åˆ’æ€è·¯
**é›¶é’±å…‘æ¢å¯ä»¥çœ‹ä½œå®Œå…¨èƒŒåŒ…é—®é¢˜çš„ä¸€ç§ç‰¹æ®Šæƒ…å†µ**ï¼Œä¸¤è€…å…·æœ‰ä»¥ä¸‹è”ç³»ä¸ä¸åŒç‚¹ã€‚
- ä¸¤é“é¢˜å¯ä»¥ç›¸äº’è½¬æ¢ï¼Œâ€œç‰©å“â€å¯¹åº”â€œç¡¬å¸â€ã€â€œç‰©å“é‡é‡â€å¯¹åº”â€œç¡¬å¸é¢å€¼â€ã€â€œèƒŒåŒ…å®¹é‡â€å¯¹åº”â€œç›®æ ‡é‡‘é¢â€ã€‚
- ä¼˜åŒ–ç›®æ ‡ç›¸åï¼Œå®Œå…¨èƒŒåŒ…é—®é¢˜æ˜¯è¦æœ€å¤§åŒ–ç‰©å“ä»·å€¼ï¼Œé›¶é’±å…‘æ¢é—®é¢˜æ˜¯è¦æœ€å°åŒ–ç¡¬å¸æ•°é‡ã€‚
- å®Œå…¨èƒŒåŒ…é—®é¢˜æ˜¯æ±‚â€œä¸è¶…è¿‡â€èƒŒåŒ…å®¹é‡ä¸‹çš„è§£ï¼Œé›¶é’±å…‘æ¢æ˜¯æ±‚â€œæ°å¥½â€å‡‘åˆ°ç›®æ ‡é‡‘é¢çš„è§£ã€‚

**ç¬¬ä¸€æ­¥ï¼šæ€è€ƒæ¯è½®çš„å†³ç­–ï¼Œå®šä¹‰çŠ¶æ€ï¼Œä»è€Œå¾—åˆ°Â ğ‘‘ğ‘Â è¡¨**
çŠ¶æ€Â [ğ‘–,ğ‘]Â å¯¹åº”çš„å­é—®é¢˜ä¸ºï¼š**å‰Â ğ‘–Â ç§ç¡¬å¸èƒ½å¤Ÿå‡‘å‡ºé‡‘é¢Â ğ‘Â çš„æœ€å°‘ç¡¬å¸æ•°é‡**ï¼Œè®°ä¸ºÂ ğ‘‘ğ‘[ğ‘–,ğ‘]Â ã€‚
äºŒç»´Â ğ‘‘ğ‘Â è¡¨çš„å°ºå¯¸ä¸ºÂ (ğ‘›+1)Ã—(ğ‘ğ‘šğ‘¡+1)Â ã€‚

**ç¬¬äºŒæ­¥ï¼šæ‰¾å‡ºæœ€ä¼˜å­ç»“æ„ï¼Œè¿›è€Œæ¨å¯¼å‡ºçŠ¶æ€è½¬ç§»æ–¹ç¨‹**
æœ¬é¢˜ä¸å®Œå…¨èƒŒåŒ…é—®é¢˜çš„çŠ¶æ€è½¬ç§»æ–¹ç¨‹å­˜åœ¨ä»¥ä¸‹ä¸¤ç‚¹å·®å¼‚ã€‚
- æœ¬é¢˜è¦æ±‚æœ€å°å€¼ï¼Œå› æ­¤éœ€å°†è¿ç®—ç¬¦Â max()Â æ›´æ”¹ä¸ºÂ min()Â ã€‚
- ä¼˜åŒ–ä¸»ä½“æ˜¯ç¡¬å¸æ•°é‡è€Œéå•†å“ä»·å€¼ï¼Œå› æ­¤åœ¨é€‰ä¸­ç¡¬å¸æ—¶æ‰§è¡ŒÂ +1Â å³å¯ã€‚
![[Pasted image 20240610110545.png]]

**ç¬¬ä¸‰æ­¥ï¼šç¡®å®šè¾¹ç•Œæ¡ä»¶å’ŒçŠ¶æ€è½¬ç§»é¡ºåº**
å½“ç›®æ ‡é‡‘é¢ä¸ºÂ 0Â æ—¶ï¼Œå‡‘å‡ºå®ƒçš„æœ€å°‘ç¡¬å¸æ•°é‡ä¸ºÂ 0Â ï¼Œå³é¦–åˆ—æ‰€æœ‰Â ğ‘‘ğ‘[ğ‘–,0]Â éƒ½ç­‰äºÂ 0Â ã€‚
å½“æ— ç¡¬å¸æ—¶ï¼Œ**æ— æ³•å‡‘å‡ºä»»æ„Â >0Â çš„ç›®æ ‡é‡‘é¢**ï¼Œå³æ˜¯æ— æ•ˆè§£ã€‚ä¸ºä½¿çŠ¶æ€è½¬ç§»æ–¹ç¨‹ä¸­çš„Â min()Â å‡½æ•°èƒ½å¤Ÿè¯†åˆ«å¹¶è¿‡æ»¤æ— æ•ˆè§£ï¼Œæˆ‘ä»¬è€ƒè™‘ä½¿ç”¨Â +âˆÂ æ¥è¡¨ç¤ºå®ƒä»¬ï¼Œå³ä»¤é¦–è¡Œæ‰€æœ‰Â ğ‘‘ğ‘[0,ğ‘]Â éƒ½ç­‰äºÂ +âˆÂ ã€‚

### 2. ä»£ç å®ç°
å¤§å¤šæ•°ç¼–ç¨‹è¯­è¨€å¹¶æœªæä¾›Â +âˆÂ å˜é‡ï¼Œåªèƒ½ä½¿ç”¨æ•´å‹Â `int`Â çš„æœ€å¤§å€¼æ¥ä»£æ›¿ã€‚è€Œè¿™åˆä¼šå¯¼è‡´å¤§æ•°è¶Šç•Œï¼šçŠ¶æ€è½¬ç§»æ–¹ç¨‹ä¸­çš„Â +1Â æ“ä½œå¯èƒ½å‘ç”Ÿæº¢å‡ºã€‚
ä¸ºæ­¤ï¼Œæˆ‘ä»¬é‡‡ç”¨æ•°å­—Â ğ‘ğ‘šğ‘¡+1Â æ¥è¡¨ç¤ºæ— æ•ˆè§£ï¼Œå› ä¸ºå‡‘å‡ºÂ ğ‘ğ‘šğ‘¡Â çš„ç¡¬å¸æ•°é‡æœ€å¤šä¸ºÂ ğ‘ğ‘šğ‘¡Â ã€‚æœ€åè¿”å›å‰ï¼Œåˆ¤æ–­Â ğ‘‘ğ‘[ğ‘›,ğ‘ğ‘šğ‘¡]Â æ˜¯å¦ç­‰äºÂ ğ‘ğ‘šğ‘¡+1Â ï¼Œè‹¥æ˜¯åˆ™è¿”å›Â âˆ’1Â ï¼Œä»£è¡¨æ— æ³•å‡‘å‡ºç›®æ ‡é‡‘é¢ã€‚ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š
```python
def coin_change_dp(coins: list[int], amt: int) -> int:
	"""é›¶é’±å…‘æ¢ï¼šåŠ¨æ€è§„åˆ’"""
	n = len(coins)
	MAX = amt + 1
	# åˆå§‹åŒ– dp è¡¨
	dp = [[0] * (amt + 1) for _ in range(n + 1)]
	# çŠ¶æ€è½¬ç§»ï¼šé¦–è¡Œé¦–åˆ—
	for a in range(1, amt + 1):
	    dp[0][a] = MAX
	# çŠ¶æ€è½¬ç§»ï¼šå…¶ä½™è¡Œå’Œåˆ—
	for i in range(1, n + 1):
	    for a in range(1, amt + 1):
	        if coins[i - 1] > a:
	            # è‹¥è¶…è¿‡ç›®æ ‡é‡‘é¢ï¼Œåˆ™ä¸é€‰ç¡¬å¸ i
	            dp[i][a] = dp[i - 1][a]
	        else:
	            # ä¸é€‰å’Œé€‰ç¡¬å¸ i è¿™ä¸¤ç§æ–¹æ¡ˆçš„è¾ƒå°å€¼
	            dp[i][a] = min(dp[i - 1][a], dp[i][a - coins[i - 1]] + 1)
	return dp[n][amt] if dp[n][amt] != MAX else -1
```

### 3. ç©ºé—´ä¼˜åŒ–
é›¶é’±å…‘æ¢çš„ç©ºé—´ä¼˜åŒ–çš„å¤„ç†æ–¹å¼å’Œå®Œå…¨èƒŒåŒ…é—®é¢˜ä¸€è‡´ï¼š
```python
def coin_change_dp_comp(coins: list[int], amt: int) -> int:
	"""é›¶é’±å…‘æ¢ï¼šç©ºé—´ä¼˜åŒ–åçš„åŠ¨æ€è§„åˆ’"""
	n = len(coins)
	MAX = amt + 1
	# åˆå§‹åŒ– dp è¡¨
	dp = [MAX] * (amt + 1)
	dp[0] = 0
	# çŠ¶æ€è½¬ç§»
	for i in range(1, n + 1):
	    # æ­£åºéå†
	    for a in range(1, amt + 1):
	        if coins[i - 1] > a:
	            # è‹¥è¶…è¿‡ç›®æ ‡é‡‘é¢ï¼Œåˆ™ä¸é€‰ç¡¬å¸ i
	            dp[a] = dp[a]
	        else:
	            # ä¸é€‰å’Œé€‰ç¡¬å¸ i è¿™ä¸¤ç§æ–¹æ¡ˆçš„è¾ƒå°å€¼
	            dp[a] = min(dp[a], dp[a - coins[i - 1]] + 1)
	return dp[amt] if dp[amt] != MAX else -1
```

## 14.5.3 é›¶é’±å…‘æ¢é—®é¢˜ II
```ad-question
title: é›¶é’±å…‘æ¢é—®é¢˜ II
ç»™å®šÂ ğ‘›Â ç§ç¡¬å¸ï¼Œç¬¬Â ğ‘–Â ç§ç¡¬å¸çš„é¢å€¼ä¸ºÂ ğ‘ğ‘œğ‘–ğ‘›ğ‘ [ğ‘–âˆ’1]Â ï¼Œç›®æ ‡é‡‘é¢ä¸ºÂ ğ‘ğ‘šğ‘¡Â ï¼Œæ¯ç§ç¡¬å¸å¯ä»¥é‡å¤é€‰å–ï¼Œ**é—®å‡‘å‡ºç›®æ ‡é‡‘é¢çš„ç¡¬å¸ç»„åˆæ•°é‡**ã€‚ç¤ºä¾‹å¦‚å›¾ 14-26 æ‰€ç¤ºã€‚

```
![[Pasted image 20240610111359.png]]

### 1. åŠ¨æ€è§„åˆ’æ€è·¯
ç›¸æ¯”äºä¸Šä¸€é¢˜ï¼Œæœ¬é¢˜ç›®æ ‡æ˜¯æ±‚ç»„åˆæ•°é‡ï¼Œå› æ­¤å­é—®é¢˜å˜ä¸ºï¼š**å‰Â ğ‘–Â ç§ç¡¬å¸èƒ½å¤Ÿå‡‘å‡ºé‡‘é¢Â ğ‘Â çš„ç»„åˆæ•°é‡**ã€‚è€ŒÂ ğ‘‘ğ‘Â è¡¨ä»ç„¶æ˜¯å°ºå¯¸ä¸ºÂ (ğ‘›+1)Ã—(ğ‘ğ‘šğ‘¡+1)Â çš„äºŒç»´çŸ©é˜µã€‚
å½“å‰çŠ¶æ€çš„ç»„åˆæ•°é‡ç­‰äºä¸é€‰å½“å‰ç¡¬å¸ä¸é€‰å½“å‰ç¡¬å¸è¿™ä¸¤ç§å†³ç­–çš„ç»„åˆæ•°é‡ä¹‹å’Œã€‚çŠ¶æ€è½¬ç§»æ–¹ç¨‹ä¸ºï¼š
![[Pasted image 20240610111849.png]]
å½“ç›®æ ‡é‡‘é¢ä¸ºÂ 0Â æ—¶ï¼Œæ— é¡»é€‰æ‹©ä»»ä½•ç¡¬å¸å³å¯å‡‘å‡ºç›®æ ‡é‡‘é¢ï¼Œå› æ­¤åº”å°†é¦–åˆ—æ‰€æœ‰Â ğ‘‘ğ‘[ğ‘–,0]Â éƒ½åˆå§‹åŒ–ä¸ºÂ 1Â ã€‚å½“æ— ç¡¬å¸æ—¶ï¼Œæ— æ³•å‡‘å‡ºä»»ä½•Â >0Â çš„ç›®æ ‡é‡‘é¢ï¼Œå› æ­¤é¦–è¡Œæ‰€æœ‰Â ğ‘‘ğ‘[0,ğ‘]Â éƒ½ç­‰äºÂ 0Â ã€‚

### 2. ä»£ç å®ç°
```python
def coin_change_ii_dp(coins: list[int], amt: int) -> int:
	"""é›¶é’±å…‘æ¢ IIï¼šåŠ¨æ€è§„åˆ’"""
	n = len(coins)
	# åˆå§‹åŒ– dp è¡¨
	dp = [[0] * (amt + 1) for _ in range(n + 1)]
	# åˆå§‹åŒ–é¦–åˆ—
	for i in range(n + 1):
	    dp[i][0] = 1
	# çŠ¶æ€è½¬ç§»
	for i in range(1, n + 1):
	    for a in range(1, amt + 1):
	        if coins[i - 1] > a:
	            # è‹¥è¶…è¿‡ç›®æ ‡é‡‘é¢ï¼Œåˆ™ä¸é€‰ç¡¬å¸ i
	            dp[i][a] = dp[i - 1][a]
	        else:
	            # ä¸é€‰å’Œé€‰ç¡¬å¸ i è¿™ä¸¤ç§æ–¹æ¡ˆä¹‹å’Œ
	            dp[i][a] = dp[i - 1][a] + dp[i][a - coins[i - 1]]
	return dp[n][amt]
```

### 3. ç©ºé—´ä¼˜åŒ–
```python
def coin_change_ii_dp_comp(coins: list[int], amt: int) -> int:
	"""é›¶é’±å…‘æ¢ IIï¼šç©ºé—´ä¼˜åŒ–åçš„åŠ¨æ€è§„åˆ’"""
	n = len(coins)
	# åˆå§‹åŒ– dp è¡¨
	dp = [0] * (amt + 1)
	dp[0] = 1
	# çŠ¶æ€è½¬ç§»
	for i in range(1, n + 1):
	    # æ­£åºéå†
	    for a in range(1, amt + 1):
	        if coins[i - 1] > a:
	            # è‹¥è¶…è¿‡ç›®æ ‡é‡‘é¢ï¼Œåˆ™ä¸é€‰ç¡¬å¸ i
	            dp[a] = dp[a]
	        else:
	            # ä¸é€‰å’Œé€‰ç¡¬å¸ i è¿™ä¸¤ç§æ–¹æ¡ˆä¹‹å’Œ
	            dp[a] = dp[a] + dp[a - coins[i - 1]]
	return dp[amt]
```