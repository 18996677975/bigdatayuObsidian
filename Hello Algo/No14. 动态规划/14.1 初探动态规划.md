åŠ¨æ€è§„åˆ’ï¼ˆdynamic programmingï¼‰æ˜¯ä¸€ä¸ªé‡è¦çš„ç®—æ³•èŒƒå¼ï¼Œå®ƒå°†ä¸€ä¸ªé—®é¢˜åˆ†è§£ä¸ºä¸€ç³»åˆ—æ›´å°çš„å­é—®é¢˜ï¼Œå¹¶é€šè¿‡å­˜å‚¨å­é—®é¢˜çš„è§£æ¥é¿å…é‡å¤è®¡ç®—ï¼Œä»è€Œå¤§å¹…æå‡æ—¶é—´æ•ˆç‡ã€‚

åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬ä»ä¸€ä¸ªç»å…¸ä¾‹é¢˜å…¥æ‰‹ï¼Œå…ˆç»™å‡ºå®ƒçš„æš´åŠ›å›æº¯è§£æ³•ï¼Œè§‚å¯Ÿå…¶ä¸­åŒ…å«çš„é‡å å­é—®é¢˜ï¼Œå†é€æ­¥å¯¼å‡ºæ›´é«˜æ•ˆçš„åŠ¨æ€è§„åˆ’è§£æ³•ã€‚
```ad-question
title: çˆ¬æ¥¼æ¢¯
ç»™å®šä¸€ä¸ªå…±æœ‰Â ğ‘›Â é˜¶çš„æ¥¼æ¢¯ï¼Œä½ æ¯æ­¥å¯ä»¥ä¸ŠÂ 1Â é˜¶æˆ–è€…Â 2Â é˜¶ï¼Œè¯·é—®æœ‰å¤šå°‘ç§æ–¹æ¡ˆå¯ä»¥çˆ¬åˆ°æ¥¼é¡¶ï¼Ÿ
```
å¦‚å›¾æ‰€ç¤ºï¼Œå¯¹äºä¸€ä¸ªÂ 3Â é˜¶æ¥¼æ¢¯ï¼Œå…±æœ‰Â 3Â ç§æ–¹æ¡ˆå¯ä»¥çˆ¬åˆ°æ¥¼é¡¶ã€‚
![[Pasted image 20240608171729.png]]
**é€šè¿‡å›æº¯æ¥ç©·ä¸¾æ‰€æœ‰å¯èƒ½æ€§**ã€‚å…·ä½“æ¥è¯´ï¼Œå°†çˆ¬æ¥¼æ¢¯æƒ³è±¡ä¸ºä¸€ä¸ªå¤šè½®é€‰æ‹©çš„è¿‡ç¨‹ï¼šä»åœ°é¢å‡ºå‘ï¼Œæ¯è½®é€‰æ‹©ä¸ŠÂ 1Â é˜¶æˆ–Â 2Â é˜¶ï¼Œæ¯å½“åˆ°è¾¾æ¥¼æ¢¯é¡¶éƒ¨æ—¶å°±å°†æ–¹æ¡ˆæ•°é‡åŠ Â 1Â ï¼Œå½“è¶Šè¿‡æ¥¼æ¢¯é¡¶éƒ¨æ—¶å°±å°†å…¶å‰ªæã€‚ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š
```python
def backtrack(choices: list[int], state: int, n: int, res: list[int]) -> int:
    """å›æº¯"""
    # å½“çˆ¬åˆ°ç¬¬ n é˜¶æ—¶ï¼Œæ–¹æ¡ˆæ•°é‡åŠ  1
    if state == n:
        res[0] += 1
    # éå†æ‰€æœ‰é€‰æ‹©
    for choice in choices:
        # å‰ªæï¼šä¸å…è®¸è¶Šè¿‡ç¬¬ n é˜¶
        if state + choice > n:
            continue
        # å°è¯•ï¼šåšå‡ºé€‰æ‹©ï¼Œæ›´æ–°çŠ¶æ€
        backtrack(choices, state + choice, n, res)
        # å›é€€

def climbing_stairs_backtrack(n: int) -> int:
    """çˆ¬æ¥¼æ¢¯ï¼šå›æº¯"""
    choices = [1, 2]  # å¯é€‰æ‹©å‘ä¸Šçˆ¬ 1 é˜¶æˆ– 2 é˜¶
    state = 0  # ä»ç¬¬ 0 é˜¶å¼€å§‹çˆ¬
    res = [0]  # ä½¿ç”¨ res[0] è®°å½•æ–¹æ¡ˆæ•°é‡
    backtrack(choices, state, n, res)
    return res[0]
```

## 14.1.1 æ–¹æ³•ä¸€ï¼šæš´åŠ›æœç´¢
å›æº¯ç®—æ³•é€šå¸¸å¹¶ä¸æ˜¾å¼åœ°å¯¹é—®é¢˜è¿›è¡Œæ‹†è§£ï¼Œè€Œæ˜¯å°†æ±‚è§£é—®é¢˜çœ‹ä½œä¸€ç³»åˆ—å†³ç­–æ­¥éª¤ï¼Œé€šè¿‡è¯•æ¢å’Œå‰ªæï¼Œæœç´¢æ‰€æœ‰å¯èƒ½çš„è§£ã€‚

æˆ‘ä»¬å¯ä»¥å°è¯•ä»é—®é¢˜åˆ†è§£çš„è§’åº¦åˆ†æè¿™é“é¢˜ã€‚è®¾çˆ¬åˆ°ç¬¬Â ğ‘–Â é˜¶å…±æœ‰Â ğ‘‘ğ‘\[ğ‘–\]Â ç§æ–¹æ¡ˆï¼Œé‚£ä¹ˆÂ ğ‘‘ğ‘\[ğ‘–\]Â å°±æ˜¯åŸé—®é¢˜ï¼Œå…¶å­é—®é¢˜åŒ…æ‹¬ï¼š
![[Pasted image 20240608172704.png]]
ç”±äºæ¯è½®åªèƒ½ä¸ŠÂ 1Â é˜¶æˆ–Â 2Â é˜¶ï¼Œå› æ­¤å½“æˆ‘ä»¬ç«™åœ¨ç¬¬Â ğ‘–Â é˜¶æ¥¼æ¢¯ä¸Šæ—¶ï¼Œä¸Šä¸€è½®åªå¯èƒ½ç«™åœ¨ç¬¬Â ğ‘–âˆ’1Â é˜¶æˆ–ç¬¬Â ğ‘–âˆ’2Â é˜¶ä¸Šã€‚æ¢å¥è¯è¯´ï¼Œæˆ‘ä»¬åªèƒ½ä»ç¬¬Â ğ‘–âˆ’1Â é˜¶æˆ–ç¬¬Â ğ‘–âˆ’2Â é˜¶è¿ˆå‘ç¬¬Â ğ‘–Â é˜¶ã€‚

ç”±æ­¤ä¾¿å¯å¾—å‡ºä¸€ä¸ªé‡è¦æ¨è®ºï¼š**çˆ¬åˆ°ç¬¬Â ğ‘–âˆ’1Â é˜¶çš„æ–¹æ¡ˆæ•°åŠ ä¸Šçˆ¬åˆ°ç¬¬Â ğ‘–âˆ’2Â é˜¶çš„æ–¹æ¡ˆæ•°å°±ç­‰äºçˆ¬åˆ°ç¬¬Â ğ‘–Â é˜¶çš„æ–¹æ¡ˆæ•°**ã€‚å…¬å¼å¦‚ä¸‹ï¼š
![[Pasted image 20240608172733.png]]

è¿™æ„å‘³ç€åœ¨çˆ¬æ¥¼æ¢¯é—®é¢˜ä¸­ï¼Œå„ä¸ªå­é—®é¢˜ä¹‹é—´å­˜åœ¨é€’æ¨å…³ç³»ï¼Œ**åŸé—®é¢˜çš„è§£å¯ä»¥ç”±å­é—®é¢˜çš„è§£æ„å»ºå¾—æ¥**ã€‚å›¾ 14-2 å±•ç¤ºäº†è¯¥é€’æ¨å…³ç³»ã€‚
![[Pasted image 20240608172742.png]]

æˆ‘ä»¬å¯ä»¥æ ¹æ®é€’æ¨å…¬å¼å¾—åˆ°æš´åŠ›æœç´¢è§£æ³•ã€‚ä»¥Â ğ‘‘ğ‘\[ğ‘›\]Â ä¸ºèµ·å§‹ç‚¹ï¼Œ**é€’å½’åœ°å°†ä¸€ä¸ªè¾ƒå¤§é—®é¢˜æ‹†è§£ä¸ºä¸¤ä¸ªè¾ƒå°é—®é¢˜çš„å’Œ**ï¼Œç›´è‡³åˆ°è¾¾æœ€å°å­é—®é¢˜Â ğ‘‘ğ‘\[1\]Â å’ŒÂ ğ‘‘ğ‘\[2\]Â æ—¶è¿”å›ã€‚å…¶ä¸­ï¼Œæœ€å°å­é—®é¢˜çš„è§£æ˜¯å·²çŸ¥çš„ï¼Œå³Â ğ‘‘ğ‘\[1\]=1ã€ğ‘‘ğ‘\[2\]=2Â ï¼Œè¡¨ç¤ºçˆ¬åˆ°ç¬¬Â 1ã€2Â é˜¶åˆ†åˆ«æœ‰Â 1ã€2Â ç§æ–¹æ¡ˆã€‚

è§‚å¯Ÿä»¥ä¸‹ä»£ç ï¼Œå®ƒå’Œæ ‡å‡†å›æº¯ä»£ç éƒ½å±äºæ·±åº¦ä¼˜å…ˆæœç´¢ï¼Œä½†æ›´åŠ ç®€æ´ï¼š
```python
def dfs(i: int) -> int:
    """æœç´¢"""
    # å·²çŸ¥ dp[1] å’Œ dp[2] ï¼Œè¿”å›ä¹‹
    if i == 1 or i == 2:
        return i
    # dp[i] = dp[i-1] + dp[i-2]
    count = dfs(i - 1) + dfs(i - 2)
    return count

def climbing_stairs_dfs(n: int) -> int:
    """çˆ¬æ¥¼æ¢¯ï¼šæœç´¢"""
    return dfs(n)
```
å›¾ 14-3 å±•ç¤ºäº†æš´åŠ›æœç´¢å½¢æˆçš„é€’å½’æ ‘ã€‚å¯¹äºé—®é¢˜Â ğ‘‘ğ‘[ğ‘›]Â ï¼Œå…¶é€’å½’æ ‘çš„æ·±åº¦ä¸ºÂ ğ‘›Â ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºÂ ğ‘‚(2ğ‘›)Â ã€‚æŒ‡æ•°é˜¶å±äºçˆ†ç‚¸å¼å¢é•¿ï¼Œå¦‚æœæˆ‘ä»¬è¾“å…¥ä¸€ä¸ªæ¯”è¾ƒå¤§çš„Â ğ‘›Â ï¼Œåˆ™ä¼šé™·å…¥æ¼«é•¿çš„ç­‰å¾…ä¹‹ä¸­ã€‚
![[Pasted image 20240608172830.png]]
è§‚å¯Ÿå›¾ 14-3 ï¼Œ**æŒ‡æ•°é˜¶çš„æ—¶é—´å¤æ‚åº¦æ˜¯â€œé‡å å­é—®é¢˜â€å¯¼è‡´çš„**ã€‚ä¾‹å¦‚Â ğ‘‘ğ‘\[9\]Â è¢«åˆ†è§£ä¸ºÂ ğ‘‘ğ‘\[8\]Â å’ŒÂ ğ‘‘ğ‘\[7\]Â ï¼Œğ‘‘ğ‘\[8\]Â è¢«åˆ†è§£ä¸ºÂ ğ‘‘ğ‘\[7\]Â å’ŒÂ ğ‘‘ğ‘\[6\]Â ï¼Œä¸¤è€…éƒ½åŒ…å«å­é—®é¢˜Â ğ‘‘ğ‘\[7\]Â ã€‚

ä»¥æ­¤ç±»æ¨ï¼Œå­é—®é¢˜ä¸­åŒ…å«æ›´å°çš„é‡å å­é—®é¢˜ï¼Œå­å­å­™å­™æ— ç©·å°½ä¹Ÿã€‚ç»å¤§éƒ¨åˆ†è®¡ç®—èµ„æºéƒ½æµªè´¹åœ¨è¿™äº›é‡å çš„å­é—®é¢˜ä¸Šã€‚

## 14.1.2 æ–¹æ³•äºŒï¼šè®°å¿†åŒ–æœç´¢
ä¸ºäº†æå‡ç®—æ³•æ•ˆç‡ï¼Œ**æˆ‘ä»¬å¸Œæœ›æ‰€æœ‰çš„é‡å å­é—®é¢˜éƒ½åªè¢«è®¡ç®—ä¸€æ¬¡**ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å£°æ˜ä¸€ä¸ªæ•°ç»„Â `mem`Â æ¥è®°å½•æ¯ä¸ªå­é—®é¢˜çš„è§£ï¼Œå¹¶åœ¨æœç´¢è¿‡ç¨‹ä¸­å°†é‡å å­é—®é¢˜å‰ªæã€‚
1. å½“é¦–æ¬¡è®¡ç®—Â ğ‘‘ğ‘[ğ‘–]Â æ—¶ï¼Œæˆ‘ä»¬å°†å…¶è®°å½•è‡³Â `mem[i]`Â ï¼Œä»¥ä¾¿ä¹‹åä½¿ç”¨ã€‚
2. å½“å†æ¬¡éœ€è¦è®¡ç®—Â ğ‘‘ğ‘[ğ‘–]Â æ—¶ï¼Œæˆ‘ä»¬ä¾¿å¯ç›´æ¥ä»Â `mem[i]`Â ä¸­è·å–ç»“æœï¼Œä»è€Œé¿å…é‡å¤è®¡ç®—è¯¥å­é—®é¢˜ã€‚

ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š
```python
def dfs(i: int, mem: list[int]) -> int:
    """è®°å¿†åŒ–æœç´¢"""
    # å·²çŸ¥ dp[1] å’Œ dp[2] ï¼Œè¿”å›ä¹‹
    if i == 1 or i == 2:
        return i
    # è‹¥å­˜åœ¨è®°å½• dp[i] ï¼Œåˆ™ç›´æ¥è¿”å›ä¹‹
    if mem[i] != -1:
        return mem[i]
    # dp[i] = dp[i-1] + dp[i-2]
    count = dfs(i - 1, mem) + dfs(i - 2, mem)
    # è®°å½• dp[i]
    mem[i] = count
    return count

def climbing_stairs_dfs_mem(n: int) -> int:
    """çˆ¬æ¥¼æ¢¯ï¼šè®°å¿†åŒ–æœç´¢"""
    # mem[i] è®°å½•çˆ¬åˆ°ç¬¬ i é˜¶çš„æ–¹æ¡ˆæ€»æ•°ï¼Œ-1 ä»£è¡¨æ— è®°å½•
    mem = [-1] * (n + 1)
    return dfs(n, mem)
```
è§‚å¯Ÿå›¾ 14-4 ï¼Œ**ç»è¿‡è®°å¿†åŒ–å¤„ç†åï¼Œæ‰€æœ‰é‡å å­é—®é¢˜éƒ½åªéœ€è®¡ç®—ä¸€æ¬¡ï¼Œæ—¶é—´å¤æ‚åº¦ä¼˜åŒ–è‡³Â ğ‘‚(ğ‘›)**Â ï¼Œè¿™æ˜¯ä¸€ä¸ªå·¨å¤§çš„é£è·ƒã€‚
![[Pasted image 20240608173017.png]]

## 14.1.3 æ–¹æ³•ä¸‰ï¼šåŠ¨æ€è§„åˆ’
**è®°å¿†åŒ–æœç´¢æ˜¯ä¸€ç§â€œä»é¡¶è‡³åº•â€çš„æ–¹æ³•**ï¼šæˆ‘ä»¬ä»åŸé—®é¢˜ï¼ˆæ ¹èŠ‚ç‚¹ï¼‰å¼€å§‹ï¼Œé€’å½’åœ°å°†è¾ƒå¤§å­é—®é¢˜åˆ†è§£ä¸ºè¾ƒå°å­é—®é¢˜ï¼Œç›´è‡³è§£å·²çŸ¥çš„æœ€å°å­é—®é¢˜ï¼ˆå¶èŠ‚ç‚¹ï¼‰ã€‚ä¹‹åï¼Œé€šè¿‡å›æº¯é€å±‚æ”¶é›†å­é—®é¢˜çš„è§£ï¼Œæ„å»ºå‡ºåŸé—®é¢˜çš„è§£ã€‚

ä¸ä¹‹ç›¸åï¼Œ**åŠ¨æ€è§„åˆ’æ˜¯ä¸€ç§â€œä»åº•è‡³é¡¶â€çš„æ–¹æ³•**ï¼šä»æœ€å°å­é—®é¢˜çš„è§£å¼€å§‹ï¼Œè¿­ä»£åœ°æ„å»ºæ›´å¤§å­é—®é¢˜çš„è§£ï¼Œç›´è‡³å¾—åˆ°åŸé—®é¢˜çš„è§£ã€‚

ç”±äºåŠ¨æ€è§„åˆ’ä¸åŒ…å«å›æº¯è¿‡ç¨‹ï¼Œå› æ­¤åªéœ€ä½¿ç”¨å¾ªç¯è¿­ä»£å®ç°ï¼Œæ— é¡»ä½¿ç”¨é€’å½’ã€‚åœ¨ä»¥ä¸‹ä»£ç ä¸­ï¼Œæˆ‘ä»¬åˆå§‹åŒ–ä¸€ä¸ªæ•°ç»„Â `dp`Â æ¥å­˜å‚¨å­é—®é¢˜çš„è§£ï¼Œå®ƒèµ·åˆ°äº†ä¸è®°å¿†åŒ–æœç´¢ä¸­æ•°ç»„Â `mem`Â ç›¸åŒçš„è®°å½•ä½œç”¨ï¼š
```python
def climbing_stairs_dp(n: int) -> int:
	"""çˆ¬æ¥¼æ¢¯ï¼šåŠ¨æ€è§„åˆ’"""
	if n == 1 or n == 2:
	    return n
	# åˆå§‹åŒ– dp è¡¨ï¼Œç”¨äºå­˜å‚¨å­é—®é¢˜çš„è§£
	dp = [0] * (n + 1)
	# åˆå§‹çŠ¶æ€ï¼šé¢„è®¾æœ€å°å­é—®é¢˜çš„è§£
	dp[1], dp[2] = 1, 2
	# çŠ¶æ€è½¬ç§»ï¼šä»è¾ƒå°å­é—®é¢˜é€æ­¥æ±‚è§£è¾ƒå¤§å­é—®é¢˜
	for i in range(3, n + 1):
	    dp[i] = dp[i - 1] + dp[i - 2]
	return dp[n]
```
![[Pasted image 20240608173056.png]]