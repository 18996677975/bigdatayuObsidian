```ad-question
title: 0-1èƒŒåŒ…é—®é¢˜
ç»™å®šÂ ğ‘›Â ä¸ªç‰©å“ï¼Œç¬¬Â ğ‘–Â ä¸ªç‰©å“çš„é‡é‡ä¸ºÂ ğ‘¤ğ‘”ğ‘¡[ğ‘–âˆ’1]ã€ä»·å€¼ä¸ºÂ ğ‘£ğ‘ğ‘™[ğ‘–âˆ’1]Â ï¼Œå’Œä¸€ä¸ªå®¹é‡ä¸ºÂ ğ‘ğ‘ğ‘Â çš„èƒŒåŒ…ã€‚æ¯ä¸ªç‰©å“åªèƒ½é€‰æ‹©ä¸€æ¬¡ï¼Œé—®åœ¨é™å®šèƒŒåŒ…å®¹é‡ä¸‹èƒ½æ”¾å…¥ç‰©å“çš„æœ€å¤§ä»·å€¼ã€‚

```
ç‰©å“ç¼–å·Â ğ‘–Â ä»Â 1Â å¼€å§‹è®¡æ•°ï¼Œæ•°ç»„ç´¢å¼•ä»Â 0Â å¼€å§‹è®¡æ•°ï¼Œå› æ­¤ç‰©å“Â ğ‘–Â å¯¹åº”é‡é‡Â ğ‘¤ğ‘”ğ‘¡[ğ‘–âˆ’1]Â å’Œä»·å€¼Â ğ‘£ğ‘ğ‘™[ğ‘–âˆ’1]Â ã€‚
![[Pasted image 20240610103226.png]]
å¯ä»¥å°† 0-1 èƒŒåŒ…é—®é¢˜çœ‹ä½œä¸€ä¸ªç”±Â ğ‘›Â è½®å†³ç­–ç»„æˆçš„è¿‡ç¨‹ï¼Œå¯¹äºæ¯ä¸ªç‰©ä½“éƒ½æœ‰ä¸æ”¾å…¥å’Œæ”¾å…¥ä¸¤ç§å†³ç­–ï¼Œå› æ­¤è¯¥é—®é¢˜æ»¡è¶³å†³ç­–æ ‘æ¨¡å‹ã€‚
è¯¥é—®é¢˜çš„ç›®æ ‡æ˜¯æ±‚è§£â€œåœ¨é™å®šèƒŒåŒ…å®¹é‡ä¸‹èƒ½æ”¾å…¥ç‰©å“çš„æœ€å¤§ä»·å€¼â€ï¼Œå› æ­¤è¾ƒå¤§æ¦‚ç‡æ˜¯ä¸€ä¸ªåŠ¨æ€è§„åˆ’é—®é¢˜ã€‚

**ç¬¬ä¸€æ­¥ï¼šæ€è€ƒæ¯è½®çš„å†³ç­–ï¼Œå®šä¹‰çŠ¶æ€ï¼Œä»è€Œå¾—åˆ°Â ğ‘‘ğ‘Â è¡¨**
å¯¹äºæ¯ä¸ªç‰©å“æ¥è¯´ï¼Œä¸æ”¾å…¥èƒŒåŒ…ï¼ŒèƒŒåŒ…å®¹é‡ä¸å˜ï¼›æ”¾å…¥èƒŒåŒ…ï¼ŒèƒŒåŒ…å®¹é‡å‡å°ã€‚ç”±æ­¤å¯å¾—çŠ¶æ€å®šä¹‰ï¼šå½“å‰ç‰©å“ç¼–å·Â ğ‘–Â å’ŒèƒŒåŒ…å®¹é‡Â ğ‘Â ï¼Œè®°ä¸ºÂ [ğ‘–,ğ‘]Â ã€‚
çŠ¶æ€Â [ğ‘–,ğ‘]Â å¯¹åº”çš„å­é—®é¢˜ä¸ºï¼š**å‰Â ğ‘–Â ä¸ªç‰©å“åœ¨å®¹é‡ä¸ºÂ ğ‘Â çš„èƒŒåŒ…ä¸­çš„æœ€å¤§ä»·å€¼**ï¼Œè®°ä¸ºÂ ğ‘‘ğ‘[ğ‘–,ğ‘]Â ã€‚
å¾…æ±‚è§£çš„æ˜¯Â ğ‘‘ğ‘[ğ‘›,ğ‘ğ‘ğ‘]Â ï¼Œå› æ­¤éœ€è¦ä¸€ä¸ªå°ºå¯¸ä¸ºÂ (ğ‘›+1)Ã—(ğ‘ğ‘ğ‘+1)Â çš„äºŒç»´Â ğ‘‘ğ‘Â è¡¨ã€‚

**ç¬¬äºŒæ­¥ï¼šæ‰¾å‡ºæœ€ä¼˜å­ç»“æ„ï¼Œè¿›è€Œæ¨å¯¼å‡ºçŠ¶æ€è½¬ç§»æ–¹ç¨‹**
å½“æˆ‘ä»¬åšå‡ºç‰©å“Â ğ‘–Â çš„å†³ç­–åï¼Œå‰©ä½™çš„æ˜¯å‰Â ğ‘–âˆ’1Â ä¸ªç‰©å“å†³ç­–çš„å­é—®é¢˜ï¼Œå¯åˆ†ä¸ºä»¥ä¸‹ä¸¤ç§æƒ…å†µã€‚
- **ä¸æ”¾å…¥ç‰©å“Â ğ‘–**Â ï¼šèƒŒåŒ…å®¹é‡ä¸å˜ï¼ŒçŠ¶æ€å˜åŒ–ä¸ºÂ [ğ‘–âˆ’1,ğ‘]Â ã€‚
- **æ”¾å…¥ç‰©å“Â ğ‘–**Â ï¼šèƒŒåŒ…å®¹é‡å‡å°‘Â ğ‘¤ğ‘”ğ‘¡[ğ‘–âˆ’1]Â ï¼Œä»·å€¼å¢åŠ Â ğ‘£ğ‘ğ‘™[ğ‘–âˆ’1]Â ï¼ŒçŠ¶æ€å˜åŒ–ä¸ºÂ [ğ‘–âˆ’1,ğ‘âˆ’ğ‘¤ğ‘”ğ‘¡[ğ‘–âˆ’1]]Â ã€‚
ä¸Šè¿°åˆ†æå‘æˆ‘ä»¬æ­ç¤ºäº†æœ¬é¢˜çš„æœ€ä¼˜å­ç»“æ„ï¼š**æœ€å¤§ä»·å€¼Â ğ‘‘ğ‘[ğ‘–,ğ‘]Â ç­‰äºä¸æ”¾å…¥ç‰©å“Â ğ‘–Â å’Œæ”¾å…¥ç‰©å“Â ğ‘–Â ä¸¤ç§æ–¹æ¡ˆä¸­ä»·å€¼æ›´å¤§çš„é‚£ä¸€ä¸ª**ã€‚ç”±æ­¤å¯æ¨å¯¼å‡ºçŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š
![[Pasted image 20240610103700.png]]
éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè‹¥å½“å‰ç‰©å“é‡é‡Â ğ‘¤ğ‘”ğ‘¡[ğ‘–âˆ’1]Â è¶…å‡ºå‰©ä½™èƒŒåŒ…å®¹é‡Â ğ‘Â ï¼Œåˆ™åªèƒ½é€‰æ‹©ä¸æ”¾å…¥èƒŒåŒ…ã€‚

**ç¬¬ä¸‰æ­¥ï¼šç¡®å®šè¾¹ç•Œæ¡ä»¶å’ŒçŠ¶æ€è½¬ç§»é¡ºåº**
å½“æ— ç‰©å“æˆ–èƒŒåŒ…å®¹é‡ä¸ºÂ 0Â æ—¶æœ€å¤§ä»·å€¼ä¸ºÂ 0Â ï¼Œå³é¦–åˆ—Â ğ‘‘ğ‘[ğ‘–,0]Â å’Œé¦–è¡ŒÂ ğ‘‘ğ‘[0,ğ‘]Â éƒ½ç­‰äºÂ 0Â ã€‚
å½“å‰çŠ¶æ€Â [ğ‘–,ğ‘]Â ä»ä¸Šæ–¹çš„çŠ¶æ€Â [ğ‘–âˆ’1,ğ‘]Â å’Œå·¦ä¸Šæ–¹çš„çŠ¶æ€Â [ğ‘–âˆ’1,ğ‘âˆ’ğ‘¤ğ‘”ğ‘¡[ğ‘–âˆ’1]]Â è½¬ç§»è€Œæ¥ï¼Œå› æ­¤é€šè¿‡ä¸¤å±‚å¾ªç¯æ­£åºéå†æ•´ä¸ªÂ ğ‘‘ğ‘Â è¡¨å³å¯ã€‚
æ ¹æ®ä»¥ä¸Šåˆ†æï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥æŒ‰é¡ºåºå®ç°æš´åŠ›æœç´¢ã€è®°å¿†åŒ–æœç´¢ã€åŠ¨æ€è§„åˆ’è§£æ³•ã€‚

### 1. æ–¹æ³•ä¸€ï¼šæš´åŠ›æœç´¢
æœç´¢ä»£ç åŒ…å«ä»¥ä¸‹è¦ç´ ã€‚
- **é€’å½’å‚æ•°**ï¼šçŠ¶æ€Â [ğ‘–,ğ‘]Â ã€‚
- **è¿”å›å€¼**ï¼šå­é—®é¢˜çš„è§£Â ğ‘‘ğ‘[ğ‘–,ğ‘]Â ã€‚
- **ç»ˆæ­¢æ¡ä»¶**ï¼šå½“ç‰©å“ç¼–å·è¶Šç•ŒÂ ğ‘–=0Â æˆ–èƒŒåŒ…å‰©ä½™å®¹é‡ä¸ºÂ 0Â æ—¶ï¼Œç»ˆæ­¢é€’å½’å¹¶è¿”å›ä»·å€¼Â 0Â ã€‚
- **å‰ªæ**ï¼šè‹¥å½“å‰ç‰©å“é‡é‡è¶…å‡ºèƒŒåŒ…å‰©ä½™å®¹é‡ï¼Œåˆ™åªèƒ½é€‰æ‹©ä¸æ”¾å…¥èƒŒåŒ…ã€‚
```python
def knapsack_dfs(wgt: list[int], val: list[int], i: int, c: int) -> int:
	"""0-1 èƒŒåŒ…ï¼šæš´åŠ›æœç´¢"""
	# è‹¥å·²é€‰å®Œæ‰€æœ‰ç‰©å“æˆ–èƒŒåŒ…æ— å‰©ä½™å®¹é‡ï¼Œåˆ™è¿”å›ä»·å€¼ 0
	if i == 0 or c == 0:
	    return 0
	# è‹¥è¶…è¿‡èƒŒåŒ…å®¹é‡ï¼Œåˆ™åªèƒ½é€‰æ‹©ä¸æ”¾å…¥èƒŒåŒ…
	if wgt[i - 1] > c:
	    return knapsack_dfs(wgt, val, i - 1, c)
	# è®¡ç®—ä¸æ”¾å…¥å’Œæ”¾å…¥ç‰©å“ i çš„æœ€å¤§ä»·å€¼
	no = knapsack_dfs(wgt, val, i - 1, c)
	yes = knapsack_dfs(wgt, val, i - 1, c - wgt[i - 1]) + val[i - 1]
	# è¿”å›ä¸¤ç§æ–¹æ¡ˆä¸­ä»·å€¼æ›´å¤§çš„é‚£ä¸€ä¸ª
	return max(no, yes)
```
ç”±äºæ¯ä¸ªç‰©å“éƒ½ä¼šäº§ç”Ÿä¸é€‰å’Œé€‰ä¸¤æ¡æœç´¢åˆ†æ”¯ï¼Œå› æ­¤æ—¶é—´å¤æ‚åº¦ä¸ºÂ ğ‘‚(2ğ‘›)Â ã€‚
è§‚å¯Ÿé€’å½’æ ‘ï¼Œå®¹æ˜“å‘ç°å…¶ä¸­å­˜åœ¨é‡å å­é—®é¢˜ï¼Œä¾‹å¦‚Â ğ‘‘ğ‘[1,10]Â ç­‰ã€‚è€Œå½“ç‰©å“è¾ƒå¤šã€èƒŒåŒ…å®¹é‡è¾ƒå¤§ï¼Œå°¤å…¶æ˜¯ç›¸åŒé‡é‡çš„ç‰©å“è¾ƒå¤šæ—¶ï¼Œé‡å å­é—®é¢˜çš„æ•°é‡å°†ä¼šå¤§å¹…å¢å¤šã€‚
![[Pasted image 20240610104459.png]]

### 2. æ–¹æ³•äºŒï¼šè®°å¿†åŒ–æœç´¢
ä¸ºäº†ä¿è¯é‡å å­é—®é¢˜åªè¢«è®¡ç®—ä¸€æ¬¡ï¼Œæˆ‘ä»¬å€ŸåŠ©è®°å¿†åˆ—è¡¨Â `mem`Â æ¥è®°å½•å­é—®é¢˜çš„è§£ï¼Œå…¶ä¸­Â `mem[i][c]`Â å¯¹åº”Â ğ‘‘ğ‘[ğ‘–,ğ‘]Â ã€‚
å¼•å…¥è®°å¿†åŒ–ä¹‹åï¼Œ**æ—¶é—´å¤æ‚åº¦å–å†³äºå­é—®é¢˜æ•°é‡**ï¼Œä¹Ÿå°±æ˜¯Â ğ‘‚(ğ‘›Ã—ğ‘ğ‘ğ‘)Â ã€‚å®ç°ä»£ç å¦‚ä¸‹ï¼š
```python
def knapsack_dfs_mem(
    wgt: list[int], val: list[int], mem: list[list[int]], i: int, c: int
) -> int:
    """0-1 èƒŒåŒ…ï¼šè®°å¿†åŒ–æœç´¢"""
    # è‹¥å·²é€‰å®Œæ‰€æœ‰ç‰©å“æˆ–èƒŒåŒ…æ— å‰©ä½™å®¹é‡ï¼Œåˆ™è¿”å›ä»·å€¼ 0
    if i == 0 or c == 0:
        return 0
    # è‹¥å·²æœ‰è®°å½•ï¼Œåˆ™ç›´æ¥è¿”å›
    if mem[i][c] != -1:
        return mem[i][c]
    # è‹¥è¶…è¿‡èƒŒåŒ…å®¹é‡ï¼Œåˆ™åªèƒ½é€‰æ‹©ä¸æ”¾å…¥èƒŒåŒ…
    if wgt[i - 1] > c:
        return knapsack_dfs_mem(wgt, val, mem, i - 1, c)
    # è®¡ç®—ä¸æ”¾å…¥å’Œæ”¾å…¥ç‰©å“ i çš„æœ€å¤§ä»·å€¼
    no = knapsack_dfs_mem(wgt, val, mem, i - 1, c)
    yes = knapsack_dfs_mem(wgt, val, mem, i - 1, c - wgt[i - 1]) + val[i - 1]
    # è®°å½•å¹¶è¿”å›ä¸¤ç§æ–¹æ¡ˆä¸­ä»·å€¼æ›´å¤§çš„é‚£ä¸€ä¸ª
    mem[i][c] = max(no, yes)
    return mem[i][c]
```
å›¾ 14-19 å±•ç¤ºäº†åœ¨è®°å¿†åŒ–æœç´¢ä¸­è¢«å‰ªæ‰çš„æœç´¢åˆ†æ”¯ã€‚
![[Pasted image 20240610104757.png]]

### 3. æ–¹æ³•ä¸‰ï¼šåŠ¨æ€è§„åˆ’
åŠ¨æ€è§„åˆ’å®è´¨ä¸Šå°±æ˜¯åœ¨çŠ¶æ€è½¬ç§»ä¸­å¡«å……Â ğ‘‘ğ‘Â è¡¨çš„è¿‡ç¨‹ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š
```python
def knapsack_dp(wgt: list[int], val: list[int], cap: int) -> int:
	"""0-1 èƒŒåŒ…ï¼šåŠ¨æ€è§„åˆ’"""
	n = len(wgt)
	# åˆå§‹åŒ– dp è¡¨
	dp = [[0] * (cap + 1) for _ in range(n + 1)]
	# çŠ¶æ€è½¬ç§»
	for i in range(1, n + 1):
	    for c in range(1, cap + 1):
	        if wgt[i - 1] > c:
	            # è‹¥è¶…è¿‡èƒŒåŒ…å®¹é‡ï¼Œåˆ™ä¸é€‰ç‰©å“ i
	            dp[i][c] = dp[i - 1][c]
	        else:
	            # ä¸é€‰å’Œé€‰ç‰©å“ i è¿™ä¸¤ç§æ–¹æ¡ˆçš„è¾ƒå¤§å€¼
	            dp[i][c] = max(dp[i - 1][c], dp[i - 1][c - wgt[i - 1]] + val[i - 1])
	return dp[n][cap]
```

### 4.  ç©ºé—´ä¼˜åŒ–
ç”±äºæ¯ä¸ªçŠ¶æ€éƒ½åªä¸å…¶ä¸Šä¸€è¡Œçš„çŠ¶æ€æœ‰å…³ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸¤ä¸ªæ•°ç»„æ»šåŠ¨å‰è¿›ï¼Œå°†ç©ºé—´å¤æ‚åº¦ä»Â ğ‘‚(ğ‘›2)Â é™è‡³Â ğ‘‚(ğ‘›)Â ã€‚

è¿›ä¸€æ­¥æ€è€ƒï¼Œæˆ‘ä»¬èƒ½å¦ä»…ç”¨ä¸€ä¸ªæ•°ç»„å®ç°ç©ºé—´ä¼˜åŒ–å‘¢ï¼Ÿè§‚å¯Ÿå¯çŸ¥ï¼Œæ¯ä¸ªçŠ¶æ€éƒ½æ˜¯ç”±æ­£ä¸Šæ–¹æˆ–å·¦ä¸Šæ–¹çš„æ ¼å­è½¬ç§»è¿‡æ¥çš„ã€‚å‡è®¾åªæœ‰ä¸€ä¸ªæ•°ç»„ï¼Œå½“å¼€å§‹éå†ç¬¬Â ğ‘–Â è¡Œæ—¶ï¼Œè¯¥æ•°ç»„å­˜å‚¨çš„ä»ç„¶æ˜¯ç¬¬Â ğ‘–âˆ’1Â è¡Œçš„çŠ¶æ€ã€‚
- å¦‚æœé‡‡å–æ­£åºéå†ï¼Œé‚£ä¹ˆéå†åˆ°Â ğ‘‘ğ‘[ğ‘–,ğ‘—]Â æ—¶ï¼Œå·¦ä¸Šæ–¹Â ğ‘‘ğ‘[ğ‘–âˆ’1,1]Â ~Â ğ‘‘ğ‘[ğ‘–âˆ’1,ğ‘—âˆ’1]Â å€¼å¯èƒ½å·²ç»è¢«è¦†ç›–ï¼Œæ­¤æ—¶å°±æ— æ³•å¾—åˆ°æ­£ç¡®çš„çŠ¶æ€è½¬ç§»ç»“æœã€‚
- å¦‚æœé‡‡å–å€’åºéå†ï¼Œåˆ™ä¸ä¼šå‘ç”Ÿè¦†ç›–é—®é¢˜ï¼ŒçŠ¶æ€è½¬ç§»å¯ä»¥æ­£ç¡®è¿›è¡Œã€‚
```python
def knapsack_dp_comp(wgt: list[int], val: list[int], cap: int) -> int:
	"""0-1 èƒŒåŒ…ï¼šç©ºé—´ä¼˜åŒ–åçš„åŠ¨æ€è§„åˆ’"""
	n = len(wgt)
	# åˆå§‹åŒ– dp è¡¨
	dp = [0] * (cap + 1)
	# çŠ¶æ€è½¬ç§»
	for i in range(1, n + 1):
	    # å€’åºéå†
	    for c in range(cap, 0, -1):
	        if wgt[i - 1] > c:
	            # è‹¥è¶…è¿‡èƒŒåŒ…å®¹é‡ï¼Œåˆ™ä¸é€‰ç‰©å“ i
	            dp[c] = dp[c]
	        else:
	            # ä¸é€‰å’Œé€‰ç‰©å“ i è¿™ä¸¤ç§æ–¹æ¡ˆçš„è¾ƒå¤§å€¼
	            dp[c] = max(dp[c], dp[c - wgt[i - 1]] + val[i - 1])
	return dp[cap]
```

