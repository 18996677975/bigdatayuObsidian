
| LeetCode                                                                                                             | åŠ›æ‰£                                                                                                   | éš¾åº¦  |
| -------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------- | --- |
| [303. Range Sum Query - Immutable](https://leetcode.com/problems/range-sum-query-immutable/)       | [303. åŒºåŸŸå’Œæ£€ç´¢ - æ•°ç»„ä¸å¯å˜](https://leetcode.cn/problems/range-sum-query-immutable/)      | ðŸŸ¢  |
| [304. Range Sum Query 2D - Immutable](https://leetcode.com/problems/range-sum-query-2d-immutable/) | [304. äºŒç»´åŒºåŸŸå’Œæ£€ç´¢ - çŸ©é˜µä¸å¯å˜](https://leetcode.cn/problems/range-sum-query-2d-immutable/) | ðŸŸ   |
| -                                                                                                                    | [å‰‘æŒ‡ Offer II 013. äºŒç»´å­çŸ©é˜µçš„å’Œ](https://leetcode.cn/problems/O4NDxx/)                   | ðŸŸ   |

## ä¸€ç»´æ•°ç»„ä¸­çš„å‰ç¼€å’Œ
303 é¢˜ã€Œ [åŒºåŸŸå’Œæ£€ç´¢ - æ•°ç»„ä¸å¯å˜](https://leetcode.cn/problems/range-sum-query-immutable/) ã€
Â new ä¸€ä¸ªæ–°çš„æ•°ç»„Â `preSum`Â å‡ºæ¥ï¼Œ`preSum[i]`Â è®°å½•Â `nums[0..i-1]`Â çš„ç´¯åŠ å’Œï¼Œçœ‹å›¾ 10 = 3 + 5 + 2ï¼š
Â ![[Pasted image 20240615173009.png]]
çœ‹è¿™ä¸ªÂ `preSum`Â æ•°ç»„ï¼Œå¦‚æžœæˆ‘æƒ³æ±‚ç´¢å¼•åŒºé—´Â `[1, 4]`Â å†…çš„æ‰€æœ‰å…ƒç´ ä¹‹å’Œï¼Œå°±å¯ä»¥é€šè¿‡Â `preSum[5] - preSum[1]`Â å¾—å‡ºã€‚
è¿™æ ·ï¼Œ`sumRange`Â å‡½æ•°ä»…ä»…éœ€è¦åšä¸€æ¬¡å‡æ³•è¿ç®—ï¼Œé¿å…äº†æ¯æ¬¡è¿›è¡Œ for å¾ªçŽ¯è°ƒç”¨ï¼Œæœ€åæ—¶é—´å¤æ‚åº¦ä¸ºå¸¸æ•°Â `O(1)`ã€‚

```python
class NumArray:  
  
    def __init__(self, nums: List[int]):  
        self.preSum = [0] * (len(nums) + 1)  
        for i in range(1, len(self.preSum)):  
            self.preSum[i] = self.preSum[i - 1] + nums[i - 1]  
  
    def sumRange(self, left: int, right: int) -> int:  
        return self.preSum[right + 1] - self.preSum[left]
```

## äºŒç»´æ•°ç»„ä¸­çš„å‰ç¼€å’Œ
304 é¢˜ã€Œ [äºŒç»´åŒºåŸŸå’Œæ£€ç´¢ - çŸ©é˜µä¸å¯å˜](https://leetcode.cn/problems/range-sum-query-2d-immutable/) ã€ï¼Œå…¶å®žå’Œä¸Šä¸€é¢˜ç±»ä¼¼ï¼Œä¸Šä¸€é¢˜æ˜¯è®©ä½ è®¡ç®—å­æ•°ç»„çš„å…ƒç´ ä¹‹å’Œï¼Œè¿™é“é¢˜è®©ä½ è®¡ç®—äºŒç»´çŸ©é˜µä¸­å­çŸ©é˜µçš„å…ƒç´ ä¹‹å’Œã€‚
![[Pasted image 20240615173119.png]]

```python
class NumMatrix:  
  
    def __init__(self, matrix: List[List[int]]):  
        m, n = len(matrix), len(matrix[0])  
        if m == 0 or n == 0:  
            return  
  
        self.preMatrix = [[0 for _ in range(n + 1)] for _ in range(m + 1)]  
        for i in range(1, m + 1):  
            for j in range(1, n + 1):  
                self.preMatrix[i][j] = self.preMatrix[i][j - 1] + self.preMatrix[i - 1][j] + matrix[i - 1][j - 1] - \  
                                           self.preMatrix[i - 1][j - 1]  
        print(self.preMatrix)  
  
    def sumRegion(self, row1: int, col1: int, row2: int, col2: int) -> int:  
        return self.preMatrix[row2 + 1][col2 + 1] - self.preMatrix[row1][col2 + 1] - self.preMatrix[row2 + 1][col1] + self.preMatrix[row1][col1]
```