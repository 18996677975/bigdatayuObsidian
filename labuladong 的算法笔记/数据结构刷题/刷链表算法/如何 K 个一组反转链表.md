| LeetCode                                                                                | åŠ›æ‰£                                                                      | éš¾åº¦  |
| --------------------------------------------------------------------------------------- | ----------------------------------------------------------------------- | --- |
| [25. Reverse Nodes in k-Group](https://leetcode.com/problems/reverse-nodes-in-k-group/) | [25. K ä¸ªä¸€ç»„ç¿»è½¬é“¾è¡¨](https://leetcode.cn/problems/reverse-nodes-in-k-group/) | ğŸ”´  |
```ad-question
title: 25. K ä¸ªä¸€ç»„ç¿»è½¬é“¾è¡¨
ç»™ä½ é“¾è¡¨çš„å¤´èŠ‚ç‚¹Â `head`Â ï¼Œæ¯Â `k`Â ä¸ªèŠ‚ç‚¹ä¸€ç»„è¿›è¡Œç¿»è½¬ï¼Œè¯·ä½ è¿”å›ä¿®æ”¹åçš„é“¾è¡¨ã€‚

`k`Â æ˜¯ä¸€ä¸ªæ­£æ•´æ•°ï¼Œå®ƒçš„å€¼å°äºæˆ–ç­‰äºé“¾è¡¨çš„é•¿åº¦ã€‚å¦‚æœèŠ‚ç‚¹æ€»æ•°ä¸æ˜¯Â `k`Â çš„æ•´æ•°å€ï¼Œé‚£ä¹ˆè¯·å°†æœ€åå‰©ä½™çš„èŠ‚ç‚¹ä¿æŒåŸæœ‰é¡ºåºã€‚

ä½ ä¸èƒ½åªæ˜¯å•çº¯çš„æ”¹å˜èŠ‚ç‚¹å†…éƒ¨çš„å€¼ï¼Œè€Œæ˜¯éœ€è¦å®é™…è¿›è¡ŒèŠ‚ç‚¹äº¤æ¢ã€‚

**ç¤ºä¾‹ 1ï¼š**
![[Pasted image 20240621143237.png]]
**è¾“å…¥ï¼š**head = [1,2,3,4,5], k = 2
**è¾“å‡ºï¼š**[2,1,4,3,5]

**ç¤ºä¾‹ 2ï¼š**
![[Pasted image 20240621143246.png]]
**è¾“å…¥ï¼š**head = [1,2,3,4,5], k = 3
**è¾“å‡ºï¼š**[3,2,1,4,5]

**æç¤ºï¼š**
- é“¾è¡¨ä¸­çš„èŠ‚ç‚¹æ•°ç›®ä¸ºÂ `n`
- `1 <= k <= n <= 5000`
- `0 <= Node.val <= 1000`

**è¿›é˜¶ï¼š**ä½ å¯ä»¥è®¾è®¡ä¸€ä¸ªåªç”¨Â `O(1)`Â é¢å¤–å†…å­˜ç©ºé—´çš„ç®—æ³•è§£å†³æ­¤é—®é¢˜å—ï¼Ÿ

```

### åˆ†æé—®é¢˜
é“¾è¡¨æ˜¯ä¸€ç§å…¼å…·é€’å½’å’Œè¿­ä»£æ€§è´¨çš„æ•°æ®ç»“æ„ï¼Œè¯¥**é—®é¢˜å…·æœ‰é€’å½’æ€§è´¨**ã€‚æ¯”å¦‚è¯´æˆ‘ä»¬å¯¹è¿™ä¸ªé“¾è¡¨è°ƒç”¨Â `reverseKGroup(head, 2)`ï¼Œå³ä»¥ 2 ä¸ªèŠ‚ç‚¹ä¸ºä¸€ç»„åè½¬é“¾è¡¨ï¼š
![[Pasted image 20240621164454.png|575]]
å¦‚æœæˆ‘è®¾æ³•æŠŠå‰ 2 ä¸ªèŠ‚ç‚¹åè½¬ï¼Œé‚£ä¹ˆåé¢çš„é‚£äº›èŠ‚ç‚¹æ€ä¹ˆå¤„ç†ï¼Ÿåé¢çš„è¿™äº›èŠ‚ç‚¹ä¹Ÿæ˜¯ä¸€æ¡é“¾è¡¨ï¼Œè€Œä¸”è§„æ¨¡ï¼ˆé•¿åº¦ï¼‰æ¯”åŸæ¥è¿™æ¡é“¾è¡¨å°ï¼Œè¿™å°±å«**å­é—®é¢˜**ã€‚
![[Pasted image 20240621164513.png|575]]
æˆ‘ä»¬å¯ä»¥æŠŠåŸå…ˆçš„Â `head`Â æŒ‡é’ˆç§»åŠ¨åˆ°åé¢è¿™ä¸€æ®µé“¾è¡¨çš„å¼€å¤´ï¼Œç„¶åç»§ç»­é€’å½’è°ƒç”¨Â `reverseKGroup(head, 2)`ï¼Œå› ä¸ºå­é—®é¢˜ï¼ˆåé¢è¿™éƒ¨åˆ†é“¾è¡¨ï¼‰å’ŒåŸé—®é¢˜ï¼ˆæ•´æ¡é“¾è¡¨ï¼‰çš„ç»“æ„å®Œå…¨ç›¸åŒï¼Œè¿™å°±æ˜¯æ‰€è°“çš„é€’å½’æ€§è´¨ã€‚

å‘ç°äº†é€’å½’æ€§è´¨ï¼Œå°±å¯ä»¥å¾—åˆ°å¤§è‡´çš„ç®—æ³•æµç¨‹ï¼š
**1ã€å…ˆåè½¬ä»¥Â `head`Â å¼€å¤´çš„Â `k`Â ä¸ªå…ƒç´ **ã€‚
![[Pasted image 20240621164734.png|575]]
**2ã€å°†ç¬¬Â `k + 1`Â ä¸ªå…ƒç´ ä½œä¸ºÂ `head`Â é€’å½’è°ƒç”¨Â `reverseKGroup`Â å‡½æ•°**ã€‚
![[Pasted image 20240621164756.png|575]]
**3ã€å°†ä¸Šè¿°ä¸¤ä¸ªè¿‡ç¨‹çš„ç»“æœè¿æ¥èµ·æ¥**ã€‚
![[Pasted image 20240621164818.png|575]]

### ä»£ç å®ç°
é¦–å…ˆï¼Œæˆ‘ä»¬è¦å®ç°ä¸€ä¸ªÂ `reverse`Â å‡½æ•°åè½¬ä¸€ä¸ªåŒºé—´ä¹‹å†…çš„å…ƒç´ ã€‚åœ¨æ­¤ä¹‹å‰æˆ‘ä»¬å†ç®€åŒ–ä¸€ä¸‹ï¼Œç»™å®šé“¾è¡¨å¤´ç»“ç‚¹ï¼Œå¦‚ä½•åè½¬æ•´ä¸ªé“¾è¡¨ï¼Ÿ
```python
# åè½¬ä»¥ a ä¸ºå¤´ç»“ç‚¹çš„é“¾è¡¨
def reverse(a: ListNode) -> ListNode:
    pre, cur, nxt = None, a, a
    while cur:
        nxt = cur.next
        # é€ä¸ªç»“ç‚¹åè½¬
        cur.next = pre
        # æ›´æ–°æŒ‡é’ˆä½ç½®
        pre = cur
        cur = nxt
    # è¿”å›åè½¬åçš„å¤´ç»“ç‚¹
    return pre
```
ç®—æ³•æ‰§è¡Œçš„è¿‡ç¨‹å¦‚ä¸‹ GIF æ‰€ç¤ºï¼šï¼š
![[8.gif|625]]
è¿™æ¬¡ä½¿ç”¨è¿­ä»£æ€è·¯æ¥å®ç°çš„ï¼Œå€ŸåŠ©åŠ¨ç”»ç†è§£åº”è¯¥å¾ˆå®¹æ˜“ã€‚

ã€Œåè½¬ä»¥Â `a`Â ä¸ºå¤´ç»“ç‚¹çš„é“¾è¡¨ã€å…¶å®å°±æ˜¯ã€Œåè½¬Â `a`Â åˆ° null ä¹‹é—´çš„ç»“ç‚¹ã€ï¼Œé‚£ä¹ˆå¦‚æœè®©ä½ ã€Œåè½¬Â `a`Â åˆ°Â `b`Â ä¹‹é—´çš„ç»“ç‚¹ã€ï¼Œä½ ä¼šä¸ä¼šï¼Ÿ

åªè¦æ›´æ”¹å‡½æ•°ç­¾åï¼Œå¹¶æŠŠä¸Šé¢çš„ä»£ç ä¸­Â `null`Â æ”¹æˆÂ `b`Â å³å¯ï¼š
```python
# åè½¬åŒºé—´ [a, b) çš„å…ƒç´ ï¼Œæ³¨æ„æ˜¯å·¦é—­å³å¼€
def reverse(a:ListNode, b:ListNode) -> ListNode:
    pre, cur, nxt = None, a, a
    # while  ç»ˆæ­¢çš„æ¡ä»¶æ”¹ä¸€ä¸‹å°±è¡Œäº†
    while cur != b:
        nxt = cur.next
        cur.next = pre
        pre = cur
        cur = nxt
    # è¿”å›åè½¬åçš„å¤´ç»“ç‚¹
    return pre
```
ç°åœ¨æˆ‘ä»¬è¿­ä»£å®ç°äº†åè½¬éƒ¨åˆ†é“¾è¡¨çš„åŠŸèƒ½ï¼Œæ¥ä¸‹æ¥å°±æŒ‰ç…§ä¹‹å‰çš„é€»è¾‘ç¼–å†™Â `reverseKGroup`Â å‡½æ•°å³å¯ï¼Œå®Œæ•´ä»£ç å¦‚ä¸‹ï¼š
```python
def reverseLR(left, right):  
    pre, cur, nxt = None, left, left  
    while cur != right:  
        nxt = cur.next  
        # é€ä¸ªç»“ç‚¹åè½¬  
        cur.next = pre  
        # æ›´æ–°æŒ‡é’ˆä½ç½®  
        pre = cur  
        cur = nxt  
    # è¿”å›åè½¬åçš„å¤´ç»“ç‚¹  
    return pre
  
class Solution:  
    def reverseKGroup(self, head: Optional[ListNode], k: int) -> Optional[ListNode]:  
        if not head:  
            return None  
  
        # åŒºé—´ [left, right) åŒ…å« k ä¸ªå¾…åè½¬å…ƒç´   
        left, right = head, head  
  
        for i in range(k):  
            # ä¸è¶³ k ä¸ªï¼Œä¸éœ€è¦åè½¬ï¼Œbase case  
            if not right:  
                return head  
            right = right.next  
  
        new_head = reverseLR(left, right)  
        left.next = self.reverseKGroup(right, k)  
  
        return new_head
```
è§£é‡Šä¸€ä¸‹Â `for`Â å¾ªç¯ä¹‹åçš„å‡ å¥ä»£ç ï¼Œæ³¨æ„Â `reverse`Â å‡½æ•°æ˜¯åè½¬åŒºé—´Â `[a, b)`ï¼Œæ‰€ä»¥æƒ…å½¢æ˜¯è¿™æ ·çš„ï¼š
![[Pasted image 20240621165419.png|600]]
é€’å½’éƒ¨åˆ†å°±ä¸å±•å¼€äº†ï¼Œæ•´ä¸ªå‡½æ•°é€’å½’å®Œæˆä¹‹åå°±æ˜¯è¿™ä¸ªç»“æœï¼Œå®Œå…¨ç¬¦åˆé¢˜æ„ï¼š
![[Pasted image 20240621165441.png|600]]
