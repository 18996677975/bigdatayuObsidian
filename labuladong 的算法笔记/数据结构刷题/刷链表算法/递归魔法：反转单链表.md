| LeetCode                                                                            | åŠ›æ‰£                                                                          | éš¾åº¦  |
| ----------------------------------------------------------------------------------- | --------------------------------------------------------------------------- | --- |
| [206. Reverse Linked List](https://leetcode.com/problems/reverse-linked-list/)      | [206. åè½¬é“¾è¡¨](https://leetcode.cn/problems/reverse-linked-list/)              | ğŸŸ¢  |
| [92. Reverse Linked List II](https://leetcode.com/problems/reverse-linked-list-ii/) | [92. åè½¬é“¾è¡¨ II](https://leetcode.cn/problems/reverse-linked-list-ii/)         | ğŸŸ   |
| -                                                                                   | [å‰‘æŒ‡ Offer 24. åè½¬é“¾è¡¨](https://leetcode.cn/problems/fan-zhuan-lian-biao-lcof/) | ğŸŸ¢  |
| -                                                                                   | [å‰‘æŒ‡ Offer II 024. åè½¬é“¾è¡¨](https://leetcode.cn/problems/UHnkqh/)               | ğŸŸ¢  |

ä»€ä¹ˆå«åè½¬å•é“¾è¡¨çš„ä¸€éƒ¨åˆ†å‘¢ï¼Œå°±æ˜¯ç»™ä½ ä¸€ä¸ªç´¢å¼•åŒºé—´ï¼Œè®©ä½ æŠŠå•é“¾è¡¨ä¸­è¿™éƒ¨åˆ†å…ƒç´ åè½¬ï¼Œå…¶ä»–éƒ¨åˆ†ä¸å˜ã€‚çœ‹åŠ›æ‰£ 92 é¢˜ã€Œ [åè½¬é“¾è¡¨ II](https://leetcode.cn/problems/reverse-linked-list-ii/) ã€ï¼š
```ad-question
title: 92. åè½¬é“¾è¡¨ II
ç»™ä½ å•é“¾è¡¨çš„å¤´æŒ‡é’ˆÂ `head`Â å’Œä¸¤ä¸ªæ•´æ•°Â `left`Â å’ŒÂ `right`Â ï¼Œå…¶ä¸­Â `left <= right`Â ã€‚è¯·ä½ åè½¬ä»ä½ç½®Â `left`Â åˆ°ä½ç½®Â `right`Â çš„é“¾è¡¨èŠ‚ç‚¹ï¼Œè¿”å›Â **åè½¬åçš„é“¾è¡¨**Â ã€‚

**ç¤ºä¾‹ 1ï¼š**
![[Pasted image 20240620195217.png]]
**è¾“å…¥ï¼š**head = [1,2,3,4,5], left = 2, right = 4
**è¾“å‡ºï¼š**[1,4,3,2,5]

**ç¤ºä¾‹ 2ï¼š**
**è¾“å…¥ï¼š**head = [5], left = 1, right = 1
**è¾“å‡ºï¼š**[5]

**æç¤ºï¼š**

- é“¾è¡¨ä¸­èŠ‚ç‚¹æ•°ç›®ä¸ºÂ `n`
- `1 <= n <= 500`
- `-500 <= Node.val <= 500`
- `1 <= left <= right <= n`

**è¿›é˜¶ï¼š**Â ä½ å¯ä»¥ä½¿ç”¨ä¸€è¶Ÿæ‰«æå®Œæˆåè½¬å—ï¼Ÿ
```
**æ³¨æ„è¿™é‡Œçš„ç´¢å¼•æ˜¯ä» 1 å¼€å§‹çš„**ã€‚è¿­ä»£çš„æ€è·¯å¤§æ¦‚æ˜¯ï¼šå…ˆç”¨ä¸€ä¸ª for å¾ªç¯æ‰¾åˆ°ç¬¬Â `m`Â ä¸ªä½ç½®ï¼Œç„¶åå†ç”¨ä¸€ä¸ª for å¾ªç¯å°†Â `m`Â å’ŒÂ `n`Â ä¹‹é—´çš„å…ƒç´ åè½¬ã€‚ä½†æ˜¯æˆ‘ä»¬çš„é€’å½’è§£æ³•ä¸ç”¨ä¸€ä¸ª for å¾ªç¯ï¼Œçº¯é€’å½’å®ç°åè½¬ã€‚

è¿­ä»£å®ç°æ€è·¯çœ‹èµ·æ¥è™½ç„¶ç®€å•ï¼Œä½†æ˜¯ç»†èŠ‚é—®é¢˜å¾ˆå¤šçš„ï¼Œåè€Œä¸å®¹æ˜“å†™å¯¹ã€‚ç›¸åï¼Œé€’å½’å®ç°å°±å¾ˆç®€æ´ä¼˜ç¾ï¼Œä¸‹é¢å°±ç”±æµ…å…¥æ·±ï¼Œå…ˆä»åè½¬æ•´ä¸ªå•é“¾è¡¨è¯´èµ·ã€‚

### ä¸€ã€é€’å½’åè½¬æ•´ä¸ªé“¾è¡¨
206 é¢˜ã€Œ [åè½¬é“¾è¡¨](https://leetcode.cn/problems/reverse-linked-list/) ã€ï¼Œé€’å½’åè½¬å•é“¾è¡¨çš„ç®—æ³•å¯èƒ½å¾ˆå¤šè¯»è€…éƒ½å¬è¯´è¿‡ï¼Œè¿™é‡Œè¯¦ç»†ä»‹ç»ä¸€ä¸‹ï¼Œç›´æ¥çœ‹ä»£ç å®ç°ï¼š
```python
# å®šä¹‰ï¼šè¾“å…¥ä¸€ä¸ªå•é“¾è¡¨å¤´èŠ‚ç‚¹ï¼Œå°†è¯¥é“¾è¡¨åè½¬ï¼Œè¿”å›æ–°çš„å¤´ç»“ç‚¹
def reverse(head: ListNode) -> ListNode:
    if not head or not head.next:
        return head
    last = reverse(head.next) 

    head.next.next = head 

    head.next = None

    return last
```
**å¯¹äºé€’å½’ç®—æ³•ï¼Œæœ€é‡è¦çš„å°±æ˜¯æ˜ç¡®é€’å½’å‡½æ•°çš„å®šä¹‰**ã€‚å…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬çš„Â `reverse`Â å‡½æ•°å®šä¹‰æ˜¯è¿™æ ·çš„ï¼š
**è¾“å…¥ä¸€ä¸ªèŠ‚ç‚¹Â `head`ï¼Œå°†ã€Œä»¥Â `head`Â ä¸ºèµ·ç‚¹ã€çš„é“¾è¡¨åè½¬ï¼Œå¹¶è¿”å›åè½¬ä¹‹åçš„å¤´ç»“ç‚¹**ã€‚

æ˜ç™½äº†å‡½æ•°çš„å®šä¹‰ï¼Œå†æ¥çœ‹è¿™ä¸ªé—®é¢˜ã€‚æ¯”å¦‚è¯´æˆ‘ä»¬æƒ³åè½¬è¿™ä¸ªé“¾è¡¨ï¼š
![[Pasted image 20240620194811.png|575]]
é‚£ä¹ˆè¾“å…¥Â `reverse(head)`Â åï¼Œä¼šåœ¨è¿™é‡Œè¿›è¡Œé€’å½’ï¼š
```java
ListNode last = reverse(head.next);
```
ä¸è¦è·³è¿›é€’å½’ï¼ˆä½ çš„è„‘è¢‹èƒ½å‹å‡ ä¸ªæ ˆå‘€ï¼Ÿï¼‰ï¼Œè€Œæ˜¯è¦æ ¹æ®åˆšæ‰çš„å‡½æ•°å®šä¹‰ï¼Œæ¥å¼„æ¸…æ¥šè¿™æ®µä»£ç ä¼šäº§ç”Ÿä»€ä¹ˆç»“æœï¼š
![[Pasted image 20240620194847.png|575]]
è¿™ä¸ªÂ `reverse(head.next)`Â æ‰§è¡Œå®Œæˆåï¼Œæ•´ä¸ªé“¾è¡¨å°±æˆäº†è¿™æ ·ï¼š
![[Pasted image 20240620194900.png|575]]
å¹¶ä¸”æ ¹æ®å‡½æ•°å®šä¹‰ï¼Œ`reverse`Â å‡½æ•°ä¼šè¿”å›åè½¬ä¹‹åçš„å¤´ç»“ç‚¹ï¼Œæˆ‘ä»¬ç”¨å˜é‡Â `last`Â æ¥æ”¶äº†ã€‚
```java
head.next.next = head;
```
![[Pasted image 20240620194928.png|575]]
æ¥ä¸‹æ¥ï¼š
```python
head.next = None
return last
```
![[Pasted image 20240620194952.png|575]]

å…¶ä¸­æœ‰ä¸¤ä¸ªåœ°æ–¹éœ€è¦æ³¨æ„ï¼š

1ã€é€’å½’å‡½æ•°è¦æœ‰ base caseï¼Œä¹Ÿå°±æ˜¯è¿™å¥ï¼š
```python
if head is None or head.next is None:
    return head
```
æ„æ€æ˜¯å¦‚æœé“¾è¡¨ä¸ºç©ºæˆ–è€…åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹çš„æ—¶å€™ï¼Œåè½¬ç»“æœå°±æ˜¯å®ƒè‡ªå·±ï¼Œç›´æ¥è¿”å›å³å¯ã€‚

2ã€å½“é“¾è¡¨é€’å½’åè½¬ä¹‹åï¼Œæ–°çš„å¤´ç»“ç‚¹æ˜¯Â `last`ï¼Œè€Œä¹‹å‰çš„Â `head`Â å˜æˆäº†æœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼Œåˆ«å¿˜äº†é“¾è¡¨çš„æœ«å°¾è¦æŒ‡å‘ nullï¼š
```python
head.next = None
```
ç†è§£äº†è¿™ä¸¤ç‚¹åï¼Œæˆ‘ä»¬å°±å¯ä»¥è¿›ä¸€æ­¥æ·±å…¥äº†ï¼Œæ¥ä¸‹æ¥çš„é—®é¢˜å…¶å®éƒ½æ˜¯åœ¨è¿™ä¸ªç®—æ³•ä¸Šçš„æ‰©å±•ã€‚

### äºŒã€åè½¬é“¾è¡¨å‰ N ä¸ªèŠ‚ç‚¹
è¿™æ¬¡æˆ‘ä»¬å®ç°ä¸€ä¸ªè¿™æ ·çš„å‡½æ•°ï¼š
```python
# å°†é“¾è¡¨çš„å‰ n ä¸ªèŠ‚ç‚¹åè½¬ï¼ˆn <= é“¾è¡¨é•¿åº¦ï¼‰
def reverseN(head: ListNode, n: int):
```
æ¯”å¦‚è¯´å¯¹äºä¸‹å›¾é“¾è¡¨ï¼Œæ‰§è¡ŒÂ `reverseN(head, 3)`ï¼š
![[Pasted image 20240620195311.png|600]]
è§£å†³æ€è·¯å’Œåè½¬æ•´ä¸ªé“¾è¡¨å·®ä¸å¤šï¼Œåªè¦ç¨åŠ ä¿®æ”¹å³å¯ï¼š
```python
successor = None # åç»§èŠ‚ç‚¹

# åè½¬ä»¥ head ä¸ºèµ·ç‚¹çš„ n ä¸ªèŠ‚ç‚¹ï¼Œè¿”å›æ–°çš„å¤´èŠ‚ç‚¹
def reverseN(head: ListNode, n: int) -> ListNode:
    global successor
    if n == 1:
        # è®°å½•ç¬¬ n + 1 ä¸ªèŠ‚ç‚¹
        successor = head.next
        return head
    # ä»¥ head.next ä¸ºèµ·ç‚¹ï¼Œéœ€è¦åè½¬å‰ n - 1 ä¸ªèŠ‚ç‚¹
    last = reverseN(head.next, n - 1)

    head.next.next = head
    # è®©åè½¬ä¹‹åçš„ head èŠ‚ç‚¹å’Œåé¢çš„èŠ‚ç‚¹è¿èµ·æ¥
    head.next = successor
    return last 
```

å…·ä½“çš„åŒºåˆ«ï¼š

1ã€base case å˜ä¸ºÂ `n == 1`ï¼Œåè½¬ä¸€ä¸ªå…ƒç´ ï¼Œå°±æ˜¯å®ƒæœ¬èº«ï¼ŒåŒæ—¶**è¦è®°å½•åé©±èŠ‚ç‚¹**ã€‚

2ã€åˆšæ‰æˆ‘ä»¬ç›´æ¥æŠŠÂ `head.next`Â è®¾ç½®ä¸º nullï¼Œå› ä¸ºæ•´ä¸ªé“¾è¡¨åè½¬ååŸæ¥çš„Â `head`Â å˜æˆäº†æ•´ä¸ªé“¾è¡¨çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹ã€‚ä½†ç°åœ¨Â `head`Â èŠ‚ç‚¹åœ¨é€’å½’åè½¬ä¹‹åä¸ä¸€å®šæ˜¯æœ€åä¸€ä¸ªèŠ‚ç‚¹äº†ï¼Œæ‰€ä»¥è¦è®°å½•åé©±Â `successor`ï¼ˆç¬¬Â `n + 1`Â ä¸ªèŠ‚ç‚¹ï¼‰ï¼Œåè½¬ä¹‹åå°†Â `head`Â è¿æ¥ä¸Šã€‚

![[Pasted image 20240620195354.png|625]]

### ä¸‰ã€åè½¬é“¾è¡¨çš„ä¸€éƒ¨åˆ†
ç°åœ¨è§£å†³æˆ‘ä»¬æœ€å¼€å§‹æå‡ºçš„é—®é¢˜ï¼Œç»™ä¸€ä¸ªç´¢å¼•åŒºé—´Â `[m, n]`ï¼ˆç´¢å¼•ä» 1 å¼€å§‹ï¼‰ï¼Œä»…ä»…åè½¬åŒºé—´ä¸­çš„é“¾è¡¨å…ƒç´ ã€‚
```python
def reverseBetween(head: ListNode, m: int, n: int) -> ListNode
```
é¦–å…ˆï¼Œå¦‚æœÂ `m == 1`ï¼Œå°±ç›¸å½“äºåè½¬é“¾è¡¨å¼€å¤´çš„Â `n`Â ä¸ªå…ƒç´ å˜›ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬åˆšæ‰å®ç°çš„åŠŸèƒ½ï¼š
```python
def reverseBetween(head: ListNode, m: int, n: int) -> ListNode:
    if m == 1:
        # ç›¸å½“äºåè½¬å‰ n ä¸ªå…ƒç´ 
        return reverseN(head, n)
    # ...
```

å¦‚æœÂ `m != 1`Â æ€ä¹ˆåŠï¼Ÿå¦‚æœæˆ‘ä»¬æŠŠÂ `head`Â çš„ç´¢å¼•è§†ä¸º 1ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ˜¯æƒ³ä»ç¬¬Â `m`Â ä¸ªå…ƒç´ å¼€å§‹åè½¬å¯¹å§ï¼›å¦‚æœæŠŠÂ `head.next`Â çš„ç´¢å¼•è§†ä¸º 1 å‘¢ï¼Ÿé‚£ä¹ˆç›¸å¯¹äºÂ `head.next`ï¼Œåè½¬çš„åŒºé—´åº”è¯¥æ˜¯ä»ç¬¬Â `m - 1`Â ä¸ªå…ƒç´ å¼€å§‹çš„ï¼›é‚£ä¹ˆå¯¹äºÂ `head.next.next`Â å‘¢â€¦â€¦

åŒºåˆ«äºè¿­ä»£æ€æƒ³ï¼Œè¿™å°±æ˜¯é€’å½’æ€æƒ³ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å®Œæˆä»£ç ï¼š
```python
def reverseBetween(head: ListNode, m: int, n: int) -> ListNode:
    # base case
    if m == 1:
        return reverseN(head, n)
    # å‰è¿›åˆ°åè½¬çš„èµ·ç‚¹è§¦å‘ base case
    head.next = reverseBetween(head.next, m - 1, n - 1)
    return head
```

### å››ã€æœ€åæ€»ç»“
é€’å½’çš„æ€æƒ³ç›¸å¯¹è¿­ä»£æ€æƒ³ï¼Œç¨å¾®æœ‰ç‚¹éš¾ä»¥ç†è§£ï¼Œå¤„ç†çš„æŠ€å·§æ˜¯ï¼šä¸è¦è·³è¿›é€’å½’ï¼Œè€Œæ˜¯åˆ©ç”¨æ˜ç¡®çš„å®šä¹‰æ¥å®ç°ç®—æ³•é€»è¾‘ã€‚

å¤„ç†çœ‹èµ·æ¥æ¯”è¾ƒå›°éš¾çš„é—®é¢˜ï¼Œå¯ä»¥å°è¯•åŒ–æ•´ä¸ºé›¶ï¼ŒæŠŠä¸€äº›ç®€å•çš„è§£æ³•è¿›è¡Œä¿®æ”¹ï¼Œè§£å†³å›°éš¾çš„é—®é¢˜ã€‚

å€¼å¾—ä¸€æçš„æ˜¯ï¼Œé€’å½’æ“ä½œé“¾è¡¨å¹¶ä¸é«˜æ•ˆã€‚å’Œè¿­ä»£è§£æ³•ç›¸æ¯”ï¼Œè™½ç„¶æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯ O(N)ï¼Œä½†æ˜¯è¿­ä»£è§£æ³•çš„ç©ºé—´å¤æ‚åº¦æ˜¯ O(1)ï¼Œè€Œé€’å½’è§£æ³•éœ€è¦å †æ ˆï¼Œç©ºé—´å¤æ‚åº¦æ˜¯ O(N)ã€‚æ‰€ä»¥é€’å½’æ“ä½œé“¾è¡¨å¯ä»¥ä½œä¸ºå¯¹é€’å½’ç®—æ³•çš„ç»ƒä¹ æˆ–è€…æ‹¿å»å’Œå°ä¼™ä¼´è£…é€¼ï¼Œä½†æ˜¯è€ƒè™‘æ•ˆç‡çš„è¯è¿˜æ˜¯ä½¿ç”¨è¿­ä»£ç®—æ³•æ›´å¥½ã€‚

æœ€åï¼Œæˆ‘åœ¨æ•°æ®ç»“æ„ç²¾å“è¯¾ä¸­è®²è§£äº†Â [å•é“¾è¡¨çš„é€’å½’å®ç°](https://aep.h5.xeknow.com/s/1RQzXc)ï¼Œåº”è¯¥èƒ½å¤Ÿè®©ä½ è¿›ä¸€æ­¥åŠ æ·±å¯¹é€’å½’çš„ç†è§£ã€‚