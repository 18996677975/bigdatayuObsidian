| LeetCode                                                                                                                                                       | åŠ›æ‰£                                                                                                               | éš¾åº¦  |
| -------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------- | --- |
| [105. Construct Binary Tree from Preorder and Inorder Traversal](https://leetcode.com/problems/construct-binary-tree-from-preorder-and-inorder-traversal/)     | [105. ä»å‰åºä¸ä¸­åºéå†åºåˆ—æ„é€ äºŒå‰æ ‘](https://leetcode.cn/problems/construct-binary-tree-from-preorder-and-inorder-traversal/)  | ğŸŸ   |
| [106. Construct Binary Tree from Inorder and Postorder Traversal](https://leetcode.com/problems/construct-binary-tree-from-inorder-and-postorder-traversal/)   | [106. ä»ä¸­åºä¸ååºéå†åºåˆ—æ„é€ äºŒå‰æ ‘](https://leetcode.cn/problems/construct-binary-tree-from-inorder-and-postorder-traversal/) | ğŸŸ   |
| [654. Maximum Binary Tree](https://leetcode.com/problems/maximum-binary-tree/)                                                                                 | [654. æœ€å¤§äºŒå‰æ ‘](https://leetcode.cn/problems/maximum-binary-tree/)                                                  | ğŸŸ   |
| [889. Construct Binary Tree from Preorder and Postorder Traversal](https://leetcode.com/problems/construct-binary-tree-from-preorder-and-postorder-traversal/) | [889. æ ¹æ®å‰åºå’Œååºéå†æ„é€ äºŒå‰æ ‘](https://leetcode.cn/problems/construct-binary-tree-from-preorder-and-postorder-traversal/) | ğŸŸ   |
| -                                                                                                                                                              | [å‰‘æŒ‡ Offer 07. é‡å»ºäºŒå‰æ ‘](https://leetcode.cn/problems/zhong-jian-er-cha-shu-lcof/)                                   | ğŸŸ   |

æ‰¿æ¥Â [[ä¸œå“¥å¸¦ä½ åˆ·äºŒå‰æ ‘ï¼ˆçº²é¢†ç¯‡ï¼‰]] çš„ç¬¬äºŒç¯‡æ–‡ç« ï¼Œå…ˆå¤è¿°ä¸€ä¸‹å‰æ–‡æ€»ç»“çš„äºŒå‰æ ‘è§£é¢˜æ€»çº²ï¼š
```ad-note
title: æ³¨
äºŒå‰æ ‘è§£é¢˜çš„æ€ç»´æ¨¡å¼åˆ†ä¸¤ç±»ï¼š

**1ã€æ˜¯å¦å¯ä»¥é€šè¿‡éå†ä¸€éäºŒå‰æ ‘å¾—åˆ°ç­”æ¡ˆ**ï¼Ÿå¦‚æœå¯ä»¥ï¼Œç”¨ä¸€ä¸ªÂ `traverse`Â å‡½æ•°é…åˆå¤–éƒ¨å˜é‡æ¥å®ç°ï¼Œè¿™å«ã€Œéå†ã€çš„æ€ç»´æ¨¡å¼ã€‚

**2ã€æ˜¯å¦å¯ä»¥å®šä¹‰ä¸€ä¸ªé€’å½’å‡½æ•°ï¼Œé€šè¿‡å­é—®é¢˜ï¼ˆå­æ ‘ï¼‰çš„ç­”æ¡ˆæ¨å¯¼å‡ºåŸé—®é¢˜çš„ç­”æ¡ˆ**ï¼Ÿå¦‚æœå¯ä»¥ï¼Œå†™å‡ºè¿™ä¸ªé€’å½’å‡½æ•°çš„å®šä¹‰ï¼Œå¹¶å……åˆ†åˆ©ç”¨è¿™ä¸ªå‡½æ•°çš„è¿”å›å€¼ï¼Œè¿™å«ã€Œåˆ†è§£é—®é¢˜ã€çš„æ€ç»´æ¨¡å¼ã€‚

æ— è®ºä½¿ç”¨å“ªç§æ€ç»´æ¨¡å¼ï¼Œä½ éƒ½éœ€è¦æ€è€ƒï¼š

**å¦‚æœå•ç‹¬æŠ½å‡ºä¸€ä¸ªäºŒå‰æ ‘èŠ‚ç‚¹ï¼Œå®ƒéœ€è¦åšä»€ä¹ˆäº‹æƒ…ï¼Ÿéœ€è¦åœ¨ä»€ä¹ˆæ—¶å€™ï¼ˆå‰/ä¸­/ååºä½ç½®ï¼‰åš**ï¼Ÿå…¶ä»–çš„èŠ‚ç‚¹ä¸ç”¨ä½ æ“å¿ƒï¼Œé€’å½’å‡½æ•°ä¼šå¸®ä½ åœ¨æ‰€æœ‰èŠ‚ç‚¹ä¸Šæ‰§è¡Œç›¸åŒçš„æ“ä½œã€‚
```

**äºŒå‰æ ‘çš„æ„é€ é—®é¢˜ä¸€èˆ¬éƒ½æ˜¯ä½¿ç”¨ã€Œåˆ†è§£é—®é¢˜ã€çš„æ€è·¯ï¼šæ„é€ æ•´æ£µæ ‘ = æ ¹èŠ‚ç‚¹ + æ„é€ å·¦å­æ ‘ + æ„é€ å³å­æ ‘**ã€‚

### æ„é€ æœ€å¤§äºŒå‰æ ‘
Â 654 é¢˜ã€Œ[æœ€å¤§äºŒå‰æ ‘](https://leetcode.cn/problems/maximum-binary-tree/)ã€
```ad-question
title: 654. æœ€å¤§äºŒå‰æ ‘
ç»™å®šä¸€ä¸ªä¸é‡å¤çš„æ•´æ•°æ•°ç»„Â `nums`Â ã€‚Â **æœ€å¤§äºŒå‰æ ‘**Â å¯ä»¥ç”¨ä¸‹é¢çš„ç®—æ³•ä»Â `nums`Â é€’å½’åœ°æ„å»º:
1. åˆ›å»ºä¸€ä¸ªæ ¹èŠ‚ç‚¹ï¼Œå…¶å€¼ä¸ºÂ `nums`Â ä¸­çš„æœ€å¤§å€¼ã€‚
2. é€’å½’åœ°åœ¨æœ€å¤§å€¼Â **å·¦è¾¹**Â çš„Â **å­æ•°ç»„å‰ç¼€ä¸Š**Â æ„å»ºå·¦å­æ ‘ã€‚
3. é€’å½’åœ°åœ¨æœ€å¤§å€¼Â **å³è¾¹**Â çš„Â **å­æ•°ç»„åç¼€ä¸Š**Â æ„å»ºå³å­æ ‘ã€‚

è¿”å›Â _`nums`Â æ„å»ºçš„_Â **_æœ€å¤§äºŒå‰æ ‘_**Â ã€‚

**ç¤ºä¾‹ 1ï¼š**
![[Pasted image 20240621174851.png]]
**è¾“å…¥ï¼š**nums = [3,2,1,6,0,5]
**è¾“å‡ºï¼š**[6,3,5,null,2,0,null,null,1]
**è§£é‡Šï¼š**é€’å½’è°ƒç”¨å¦‚ä¸‹æ‰€ç¤ºï¼š
- [3,2,1,6,0,5] ä¸­çš„æœ€å¤§å€¼æ˜¯ 6 ï¼Œå·¦è¾¹éƒ¨åˆ†æ˜¯ [3,2,1] ï¼Œå³è¾¹éƒ¨åˆ†æ˜¯ [0,5] ã€‚
    - [3,2,1] ä¸­çš„æœ€å¤§å€¼æ˜¯ 3 ï¼Œå·¦è¾¹éƒ¨åˆ†æ˜¯ [] ï¼Œå³è¾¹éƒ¨åˆ†æ˜¯ [2,1] ã€‚
        - ç©ºæ•°ç»„ï¼Œæ— å­èŠ‚ç‚¹ã€‚
        - [2,1] ä¸­çš„æœ€å¤§å€¼æ˜¯ 2 ï¼Œå·¦è¾¹éƒ¨åˆ†æ˜¯ [] ï¼Œå³è¾¹éƒ¨åˆ†æ˜¯ [1] ã€‚
            - ç©ºæ•°ç»„ï¼Œæ— å­èŠ‚ç‚¹ã€‚
            - åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œæ‰€ä»¥å­èŠ‚ç‚¹æ˜¯ä¸€ä¸ªå€¼ä¸º 1 çš„èŠ‚ç‚¹ã€‚
    - [0,5] ä¸­çš„æœ€å¤§å€¼æ˜¯ 5 ï¼Œå·¦è¾¹éƒ¨åˆ†æ˜¯ [0] ï¼Œå³è¾¹éƒ¨åˆ†æ˜¯ [] ã€‚
        - åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œæ‰€ä»¥å­èŠ‚ç‚¹æ˜¯ä¸€ä¸ªå€¼ä¸º 0 çš„èŠ‚ç‚¹ã€‚
        - ç©ºæ•°ç»„ï¼Œæ— å­èŠ‚ç‚¹ã€‚

**ç¤ºä¾‹ 2ï¼š**
![[Pasted image 20240621174912.png]]
**è¾“å…¥ï¼š**nums = [3,2,1]
**è¾“å‡ºï¼š**[3,null,2,null,1]

**æç¤ºï¼š**
- `1 <= nums.length <= 1000`
- `0 <= nums[i] <= 1000`
- `nums`Â ä¸­çš„æ‰€æœ‰æ•´æ•°Â **äº’ä¸ç›¸åŒ**

```
å‡½æ•°ç­¾åå¦‚ä¸‹ï¼š
```python
def constructMaximumBinaryTree(nums: List[int]) -> Optional[TreeNode]:
```
æ¯ä¸ªäºŒå‰æ ‘èŠ‚ç‚¹éƒ½å¯ä»¥è®¤ä¸ºæ˜¯ä¸€æ£µå­æ ‘çš„æ ¹èŠ‚ç‚¹ï¼Œå¯¹äºæ ¹èŠ‚ç‚¹ï¼Œé¦–å…ˆè¦åšçš„å½“ç„¶æ˜¯æŠŠæƒ³åŠæ³•æŠŠè‡ªå·±å…ˆæ„é€ å‡ºæ¥ï¼Œç„¶åæƒ³åŠæ³•æ„é€ è‡ªå·±çš„å·¦å³å­æ ‘ã€‚

æ‰€ä»¥ï¼Œæˆ‘ä»¬è¦éå†æ•°ç»„æŠŠæ‰¾åˆ°æœ€å¤§å€¼Â `maxVal`ï¼Œä»è€ŒæŠŠæ ¹èŠ‚ç‚¹Â `root`Â åšå‡ºæ¥ï¼Œç„¶åå¯¹Â `maxVal`Â å·¦è¾¹çš„æ•°ç»„å’Œå³è¾¹çš„æ•°ç»„è¿›è¡Œé€’å½’æ„å»ºï¼Œä½œä¸ºÂ `root`Â çš„å·¦å³å­æ ‘ã€‚

æŒ‰ç…§é¢˜ç›®ç»™å‡ºçš„ä¾‹å­ï¼Œè¾“å…¥çš„æ•°ç»„ä¸ºÂ `[3,2,1,6,0,5]`ï¼Œå¯¹äºæ•´æ£µæ ‘çš„æ ¹èŠ‚ç‚¹æ¥è¯´ï¼Œå…¶å®åœ¨åšè¿™ä»¶äº‹ï¼š
```python
def constructMaximumBinaryTree(nums: List[int]) -> TreeNode:
    if not nums:
        return None

    # æ‰¾åˆ°æ•°ç»„ä¸­çš„æœ€å¤§å€¼åŠå…¶ç´¢å¼•
    max_num = max(nums)
    max_idx = nums.index(max_num)

    # ä»¥æœ€å¤§å€¼æ„é€ æ ¹èŠ‚ç‚¹
    root = TreeNode(max_num)

    # é€’å½’è°ƒç”¨æ„é€ å·¦å³å­æ ‘
    root.left = constructMaximumBinaryTree(nums[:max_idx])
    root.right = constructMaximumBinaryTree(nums[max_idx+1:])

    return root
```
**å½“å‰Â `nums`Â ä¸­çš„æœ€å¤§å€¼å°±æ˜¯æ ¹èŠ‚ç‚¹ï¼Œç„¶åæ ¹æ®ç´¢å¼•é€’å½’è°ƒç”¨å·¦å³æ•°ç»„æ„é€ å·¦å³å­æ ‘å³å¯**ã€‚

æ˜ç¡®äº†æ€è·¯ï¼Œæˆ‘ä»¬å¯ä»¥é‡æ–°å†™ä¸€ä¸ªè¾…åŠ©å‡½æ•°Â `build`ï¼Œæ¥æ§åˆ¶Â `nums`Â çš„ç´¢å¼•ï¼š
```python
# ä¸»å‡½æ•°
def constructMaximumBinaryTree(nums: List[int]) -> TreeNode:
    return build(nums, 0, len(nums) - 1)

# å®šä¹‰ï¼šå°† nums[lo..hi] æ„é€ æˆç¬¦åˆæ¡ä»¶çš„æ ‘ï¼Œè¿”å›æ ¹èŠ‚ç‚¹
def build(nums: List[int], lo: int, hi: int) -> TreeNode:
    # base case
    if lo > hi:
        return None

    # æ‰¾åˆ°æ•°ç»„ä¸­çš„æœ€å¤§å€¼å’Œå¯¹åº”çš„ç´¢å¼•
    index, maxVal = -1, -sys.maxsize
    for i in range(lo, hi+1):
        if maxVal < nums[i]:
            index = i
            maxVal = nums[i]

    # å…ˆæ„é€ å‡ºæ ¹èŠ‚ç‚¹
    root = TreeNode(maxVal)
    # é€’å½’è°ƒç”¨æ„é€ å·¦å³å­æ ‘
    root.left = build(nums, lo, index - 1)
    root.right = build(nums, index + 1, hi)
    
    return root
```

### é€šè¿‡å‰åºå’Œä¸­åºéå†ç»“æœæ„é€ äºŒå‰æ ‘
105 é¢˜ã€Œ [ä»å‰åºå’Œä¸­åºéå†åºåˆ—æ„é€ äºŒå‰æ ‘](https://leetcode.cn/problems/construct-binary-tree-from-preorder-and-inorder-traversal/) ã€å°±æ˜¯è¿™é“ç»å…¸é¢˜ç›®ï¼Œé¢è¯•ç¬”è¯•ä¸­å¸¸è€ƒï¼š
```ad-question
title: 105. ä»å‰åºä¸ä¸­åºéå†åºåˆ—æ„é€ äºŒå‰æ ‘
ç»™å®šä¸¤ä¸ªæ•´æ•°æ•°ç»„Â `preorder`Â å’ŒÂ `inorder`Â ï¼Œå…¶ä¸­Â `preorder`Â æ˜¯äºŒå‰æ ‘çš„**å…ˆåºéå†**ï¼ŒÂ `inorder`Â æ˜¯åŒä¸€æ£µæ ‘çš„**ä¸­åºéå†**ï¼Œè¯·æ„é€ äºŒå‰æ ‘å¹¶è¿”å›å…¶æ ¹èŠ‚ç‚¹ã€‚

**ç¤ºä¾‹ 1:**
![[Pasted image 20240621181441.png]]
**è¾“å…¥****:** preorder = [3,9,20,15,7], inorder = [9,3,15,20,7]
**è¾“å‡º:** [3,9,20,null,null,15,7]

**ç¤ºä¾‹ 2:**
**è¾“å…¥:** preorder = [-1], inorder = [-1]
**è¾“å‡º:** [-1]

**æç¤º:**
- `1 <= preorder.length <= 3000`
- `inorder.length == preorder.length`
- `-3000 <= preorder[i], inorder[i] <= 3000`
- `preorder`Â å’ŒÂ `inorder`Â å‡Â **æ— é‡å¤**Â å…ƒç´ 
- `inorder`Â å‡å‡ºç°åœ¨Â `preorder`
- `preorder`Â **ä¿è¯**Â ä¸ºäºŒå‰æ ‘çš„å‰åºéå†åºåˆ—
- `inorder`Â **ä¿è¯**Â ä¸ºäºŒå‰æ ‘çš„ä¸­åºéå†åºåˆ—

```
å‡½æ•°ç­¾åå¦‚ä¸‹ï¼š
```python
def buildTree(preorder: List[int], inorder: List[int]) -> TreeNode:
```
åºŸè¯ä¸å¤šè¯´ï¼Œç›´æ¥æ¥æƒ³æ€è·¯ï¼Œé¦–å…ˆæ€è€ƒï¼Œæ ¹èŠ‚ç‚¹åº”è¯¥åšä»€ä¹ˆã€‚

**ç±»ä¼¼ä¸Šä¸€é¢˜ï¼Œæˆ‘ä»¬è‚¯å®šè¦æƒ³åŠæ³•ç¡®å®šæ ¹èŠ‚ç‚¹çš„å€¼ï¼ŒæŠŠæ ¹èŠ‚ç‚¹åšå‡ºæ¥ï¼Œç„¶åé€’å½’æ„é€ å·¦å³å­æ ‘å³å¯**ã€‚

æˆ‘ä»¬å…ˆæ¥å›é¡¾ä¸€ä¸‹ï¼Œå‰åºéå†å’Œä¸­åºéå†çš„ç»“æœæœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ
```python
def traverse_preorder(root: TreeNode):
    # å‰åºéå†
    preorder.append(root.val)
    traverse_preorder(root.left)
    traverse_preorder(root.right)

def traverse_inorder(root: TreeNode):
    traverse_inorder(root.left)
    # ä¸­åºéå†
    inorder.append(root.val)
    traverse_inorder(root.right)
```
åæ–‡Â [äºŒå‰æ ‘å°±é‚£å‡ ä¸ªæ¡†æ¶](https://labuladong.online/algo/data-structure/flatten-nested-list-iterator/)Â å†™è¿‡ï¼Œè¿™æ ·çš„éå†é¡ºåºå·®å¼‚ï¼Œå¯¼è‡´äº†Â `preorder`Â å’ŒÂ `inorder`Â æ•°ç»„ä¸­çš„å…ƒç´ åˆ†å¸ƒæœ‰å¦‚ä¸‹ç‰¹ç‚¹ï¼š
![[Pasted image 20240621181625.png|600]]
æ‰¾åˆ°æ ¹èŠ‚ç‚¹æ˜¯å¾ˆç®€å•çš„ï¼Œå‰åºéå†çš„ç¬¬ä¸€ä¸ªå€¼Â `preorder[0]`Â å°±æ˜¯æ ¹èŠ‚ç‚¹çš„å€¼ã€‚

å…³é”®åœ¨äºå¦‚ä½•é€šè¿‡æ ¹èŠ‚ç‚¹çš„å€¼ï¼Œå°†Â `preorder`Â å’ŒÂ `inorder`Â æ•°ç»„åˆ’åˆ†æˆä¸¤åŠï¼Œæ„é€ æ ¹èŠ‚ç‚¹çš„å·¦å³å­æ ‘ï¼Ÿ

æ¢å¥è¯è¯´ï¼Œå¯¹äºä»¥ä¸‹ä»£ç ä¸­çš„Â `?`Â éƒ¨åˆ†åº”è¯¥å¡«å…¥ä»€ä¹ˆï¼š
