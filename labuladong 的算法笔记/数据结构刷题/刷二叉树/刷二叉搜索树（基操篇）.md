| LeetCode                                                                                                 | åŠ›æ‰£                                                                                 | éš¾åº¦  |
| -------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------- | --- |
| [450. Delete Node in a BST](https://leetcode.com/problems/delete-node-in-a-bst/)                         | [450. åˆ é™¤äºŒå‰æœç´¢æ ‘ä¸­çš„èŠ‚ç‚¹](https://leetcode.cn/problems/delete-node-in-a-bst/)             | ğŸŸ   |
| [700. Search in a Binary Search Tree](https://leetcode.com/problems/search-in-a-binary-search-tree/)     | [700. äºŒå‰æœç´¢æ ‘ä¸­çš„æœç´¢](https://leetcode.cn/problems/search-in-a-binary-search-tree/)     | ğŸŸ¢  |
| [701. Insert into a Binary Search Tree](https://leetcode.com/problems/insert-into-a-binary-search-tree/) | [701. äºŒå‰æœç´¢æ ‘ä¸­çš„æ’å…¥æ“ä½œ](https://leetcode.cn/problems/insert-into-a-binary-search-tree/) | ğŸŸ   |
| [98. Validate Binary Search Tree](https://leetcode.com/problems/validate-binary-search-tree/)            | [98. éªŒè¯äºŒå‰æœç´¢æ ‘](https://leetcode.cn/problems/validate-binary-search-tree/)           | ğŸŸ   |

æˆ‘ä»¬å‰æ–‡Â [ä¸œå“¥å¸¦ä½ åˆ·äºŒå‰æœç´¢æ ‘ï¼ˆç‰¹æ€§ç¯‡ï¼‰](https://labuladong.online/algo/data-structure/bst-part1/)Â ä»‹ç»äº† BST çš„åŸºæœ¬ç‰¹æ€§ï¼Œè¿˜åˆ©ç”¨äºŒå‰æœç´¢æ ‘ã€Œä¸­åºéå†æœ‰åºã€çš„ç‰¹æ€§æ¥è§£å†³äº†å‡ é“é¢˜ç›®ï¼Œæœ¬æ–‡æ¥å®ç° BST çš„åŸºç¡€æ“ä½œï¼šåˆ¤æ–­ BST çš„åˆæ³•æ€§ã€å¢ã€åˆ ã€æŸ¥ã€‚å…¶ä¸­ã€Œåˆ ã€å’Œã€Œåˆ¤æ–­åˆæ³•æ€§ã€ç•¥å¾®å¤æ‚ã€‚

BST çš„åŸºç¡€æ“ä½œä¸»è¦ä¾èµ–ã€Œå·¦å°å³å¤§ã€çš„ç‰¹æ€§ï¼Œå¯ä»¥åœ¨äºŒå‰æ ‘ä¸­åšç±»ä¼¼äºŒåˆ†æœç´¢çš„æ“ä½œï¼Œå¯»æ‰¾ä¸€ä¸ªå…ƒç´ çš„æ•ˆç‡å¾ˆé«˜ã€‚æ¯”å¦‚ä¸‹é¢è¿™å°±æ˜¯ä¸€æ£µåˆæ³•çš„äºŒå‰æ ‘ï¼š
![[Pasted image 20240717003702.png]]

å¯¹äº BST ç›¸å…³çš„é—®é¢˜ï¼Œä½ å¯èƒ½ä¼šç»å¸¸çœ‹åˆ°ç±»ä¼¼ä¸‹é¢è¿™æ ·çš„ä»£ç é€»è¾‘ï¼š
```python
def BST(root: TreeNode, target: int) -> None:
    if root.val == target:
        # æ‰¾åˆ°ç›®æ ‡ï¼Œåšç‚¹ä»€ä¹ˆ
    if root.val < target:
        BST(root.right, target)
    if root.val > target:
        BST(root.left, target)
```
è¿™ä¸ªä»£ç æ¡†æ¶å…¶å®å’ŒäºŒå‰æ ‘çš„éå†æ¡†æ¶å·®ä¸å¤šï¼Œæ— éå°±æ˜¯åˆ©ç”¨äº† BST å·¦å°å³å¤§çš„ç‰¹æ€§è€Œå·²ã€‚æ¥ä¸‹æ¥çœ‹ä¸‹ BST è¿™ç§ç»“æ„çš„åŸºç¡€æ“ä½œæ˜¯å¦‚ä½•å®ç°çš„ã€‚

## ä¸€ã€åˆ¤æ–­ BST çš„åˆæ³•æ€§
åŠ›æ‰£ç¬¬ 98 é¢˜ã€Œ [éªŒè¯äºŒå‰æœç´¢æ ‘](https://leetcode.cn/problems/validate-binary-search-tree/) ã€å°±æ˜¯è®©ä½ åˆ¤æ–­è¾“å…¥çš„ BST æ˜¯å¦åˆæ³•ã€‚æ³¨æ„ï¼Œè¿™é‡Œæ˜¯æœ‰å‘çš„å“¦ï¼ŒæŒ‰ç…§ BST å·¦å°å³å¤§çš„ç‰¹æ€§ï¼Œæ¯ä¸ªèŠ‚ç‚¹æƒ³è¦åˆ¤æ–­è‡ªå·±æ˜¯å¦æ˜¯åˆæ³•çš„ BST èŠ‚ç‚¹ï¼Œè¦åšçš„äº‹ä¸å°±æ˜¯æ¯”è¾ƒè‡ªå·±å’Œå·¦å³å­©å­å—ï¼Ÿæ„Ÿè§‰åº”è¯¥è¿™æ ·å†™ä»£ç ï¼š
```python
def isValidBST(root: TreeNode) -> bool:
    if root is None:
        return True
    # root çš„å·¦è¾¹åº”è¯¥æ›´å°
    if root.left is not None and root.left.val >= root.val:
        return False
    # root çš„å³è¾¹åº”è¯¥æ›´å¤§
    if root.right is not None and root.right.val <= root.val:
        return False

    return isValidBST(root.left) and isValidBST(root.right)
```
ä½†æ˜¯è¿™ä¸ªç®—æ³•å‡ºç°äº†é”™è¯¯ï¼ŒBST çš„æ¯ä¸ªèŠ‚ç‚¹åº”è¯¥è¦å°äºå³è¾¹å­æ ‘çš„**æ‰€æœ‰**èŠ‚ç‚¹ï¼Œä¸‹é¢è¿™ä¸ªäºŒå‰æ ‘æ˜¾ç„¶ä¸æ˜¯ BSTï¼Œå› ä¸ºèŠ‚ç‚¹ 10 çš„å³å­æ ‘ä¸­æœ‰ä¸€ä¸ªèŠ‚ç‚¹ 6ï¼Œä½†æ˜¯æˆ‘ä»¬çš„ç®—æ³•ä¼šæŠŠå®ƒåˆ¤å®šä¸ºåˆæ³• BSTï¼š
![[Pasted image 20240717003919.png]]

**å‡ºç°é—®é¢˜çš„åŸå› åœ¨äºï¼Œå¯¹äºæ¯ä¸€ä¸ªèŠ‚ç‚¹Â `root`ï¼Œä»£ç å€¼æ£€æŸ¥äº†å®ƒçš„å·¦å³å­©å­èŠ‚ç‚¹æ˜¯å¦ç¬¦åˆå·¦å°å³å¤§çš„åŸåˆ™ï¼›ä½†æ˜¯æ ¹æ® BST çš„å®šä¹‰ï¼Œ`root`Â çš„æ•´ä¸ªå·¦å­æ ‘éƒ½è¦å°äºÂ `root.val`ï¼Œæ•´ä¸ªå³å­æ ‘éƒ½è¦å¤§äºÂ `root.val`**ã€‚

é—®é¢˜æ˜¯ï¼Œå¯¹äºæŸä¸€ä¸ªèŠ‚ç‚¹Â `root`ï¼Œä»–åªèƒ½ç®¡å¾—äº†è‡ªå·±çš„å·¦å³å­èŠ‚ç‚¹ï¼Œæ€ä¹ˆæŠŠÂ `root`Â çš„çº¦æŸä¼ é€’ç»™å·¦å³å­æ ‘å‘¢ï¼Ÿè¯·çœ‹æ­£ç¡®çš„ä»£ç ï¼š
```python
class Solution:  
    def isValidBST(self, root: Optional[TreeNode]) -> bool:  
        return self.isValidBSTHelper(root, None, None)  
  
    def isValidBSTHelper(self, root, min_node, max_node):  
        # base case  
        if not root:  
            return True  
  
        # é™å®šä»¥ root ä¸ºæ ¹çš„å­æ ‘èŠ‚ç‚¹å¿…é¡»æ»¡è¶³ max.val > root.val > min.val        
        if min_node and root.val <= min_node.val:  
            return False  
        if max_node and root.val >= max_node.val:  
            return False  
  
        # é™å®šå·¦å­æ ‘çš„æœ€å¤§å€¼æ˜¯ root.valï¼Œå³å­æ ‘çš„æœ€å°å€¼æ˜¯ root.val        
        return (self.isValidBSTHelper(root.left, min_node, root)  
                and self.isValidBSTHelper(root.right, root, max_node))
```

é€šè¿‡ä½¿ç”¨è¾…åŠ©å‡½æ•°ï¼Œå¢åŠ å‡½æ•°å‚æ•°åˆ—è¡¨ï¼Œåœ¨å‚æ•°ä¸­æºå¸¦é¢å¤–ä¿¡æ¯ï¼Œå°†è¿™ç§çº¦æŸä¼ é€’ç»™å­æ ‘çš„æ‰€æœ‰èŠ‚ç‚¹ï¼Œè¿™ä¹Ÿæ˜¯äºŒå‰æ ‘ç®—æ³•çš„ä¸€ä¸ªå°æŠ€å·§å§ã€‚

## äºŒã€åœ¨ BST ä¸­æœç´¢å…ƒç´ 
åŠ›æ‰£ç¬¬ 700 é¢˜ã€Œ [äºŒå‰æœç´¢æ ‘ä¸­çš„æœç´¢](https://leetcode.cn/problems/search-in-a-binary-search-tree/) ã€å°±æ˜¯è®©ä½ åœ¨ BST ä¸­æœç´¢å€¼ä¸ºÂ `target`Â çš„èŠ‚ç‚¹ã€‚ç±»ä¼¼äºŒåˆ†æŸ¥æ‰¾æ€æƒ³ï¼Œæ ¹æ®Â `target`Â å’ŒÂ `root.val`Â çš„å¤§å°æ¯”è¾ƒï¼Œå°±èƒ½æ’é™¤ä¸€è¾¹ã€‚
```python
class Solution:  
    def searchBST(self, root: Optional[TreeNode], val: int) -> Optional[TreeNode]:  
        # å¦‚æœäºŒå‰æ ‘ä¸ºç©ºï¼Œç›´æ¥è¿”å›  
        if not root:  
            return None  
        # å»å·¦å­æ ‘æœç´¢  
        if root.val > val:  
            return self.searchBST(root.left, val)  
        # å»å³å­æ ‘æœç´¢  
        if root.val < val:  
            return self.searchBST(root.right, val)  
        # æ‰¾åˆ°ç›®æ ‡èŠ‚ç‚¹ï¼Œç›´æ¥è¿”å›  
        return root
```

## ä¸‰ã€åœ¨ BST ä¸­æ’å…¥ä¸€ä¸ªæ•°
å¯¹æ•°æ®ç»“æ„çš„æ“ä½œæ— ééå† + è®¿é—®ï¼Œéå†å°±æ˜¯ã€Œæ‰¾ã€ï¼Œè®¿é—®å°±æ˜¯ã€Œæ”¹ã€ã€‚å…·ä½“åˆ°è¿™ä¸ªé—®é¢˜ï¼Œæ’å…¥ä¸€ä¸ªæ•°ï¼Œå°±æ˜¯å…ˆæ‰¾åˆ°æ’å…¥ä½ç½®ï¼Œç„¶åè¿›è¡Œæ’å…¥æ“ä½œã€‚

ä¸Šä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬æ€»ç»“äº† BST ä¸­çš„éå†æ¡†æ¶ï¼Œå°±æ˜¯ã€Œæ‰¾ã€çš„é—®é¢˜ã€‚ç›´æ¥å¥—æ¡†æ¶ï¼ŒåŠ ä¸Šã€Œæ”¹ã€çš„æ“ä½œå³å¯ã€‚**ä¸€æ—¦æ¶‰åŠã€Œæ”¹ã€ï¼Œå°±ç±»ä¼¼äºŒå‰æ ‘çš„æ„é€ é—®é¢˜ï¼Œå‡½æ•°è¦è¿”å›Â `TreeNode`Â ç±»å‹ï¼Œå¹¶ä¸”è¦å¯¹é€’å½’è°ƒç”¨çš„è¿”å›å€¼è¿›è¡Œæ¥æ”¶**ã€‚
```python
def insertIntoBST(root: TreeNode, val: int) -> TreeNode:
    # æ‰¾åˆ°ç©ºä½ç½®æ’å…¥æ–°èŠ‚ç‚¹
    if not root:
        return TreeNode(val)
    # if (root.val == val)
    #     BST ä¸­ä¸€èˆ¬ä¸ä¼šæ’å…¥å·²å­˜åœ¨å…ƒç´ 
    if root.val < val:
        root.right = insertIntoBST(root.right, val)
    if root.val > val:
        root.left = insertIntoBST(root.left, val)
    return root
```

## å››ã€åœ¨ BST ä¸­åˆ é™¤ä¸€ä¸ªæ•°
è¿™ä¸ªé—®é¢˜ç¨å¾®å¤æ‚ï¼Œè·Ÿæ’å…¥æ“ä½œç±»ä¼¼ï¼Œå…ˆã€Œæ‰¾ã€å†ã€Œæ”¹ã€ï¼Œå…ˆæŠŠæ¡†æ¶å†™å‡ºæ¥å†è¯´ï¼š
```python
def deleteNode(root: TreeNode, key: int) -> TreeNode:
    if root.val == key:
        # æ‰¾åˆ°å•¦ï¼Œè¿›è¡Œåˆ é™¤
    elif root.val > key:
        # å»å·¦å­æ ‘æ‰¾
        root.left = deleteNode(root.left, key)
    elif root.val < key:
        # å»å³å­æ ‘æ‰¾
        root.right = deleteNode(root.right, key)
    return root
```

æ‰¾åˆ°ç›®æ ‡èŠ‚ç‚¹äº†ï¼Œæ¯”æ–¹è¯´æ˜¯èŠ‚ç‚¹Â `A`ï¼Œå¦‚ä½•åˆ é™¤è¿™ä¸ªèŠ‚ç‚¹ï¼Œè¿™æ˜¯éš¾ç‚¹ã€‚å› ä¸ºåˆ é™¤èŠ‚ç‚¹çš„åŒæ—¶ä¸èƒ½ç ´å BST çš„æ€§è´¨ã€‚æœ‰ä¸‰ç§æƒ…å†µï¼Œç”¨å›¾ç‰‡æ¥è¯´æ˜ã€‚

**æƒ…å†µ 1**ï¼š`A`Â æ°å¥½æ˜¯æœ«ç«¯èŠ‚ç‚¹ï¼Œä¸¤ä¸ªå­èŠ‚ç‚¹éƒ½ä¸ºç©ºï¼Œé‚£ä¹ˆå®ƒå¯ä»¥å½“åœºå»ä¸–äº†ã€‚
![[Pasted image 20240717005731.png]]
```java
if (root.left == null && root.right == null)
    return null;
```

**æƒ…å†µ 2**ï¼š`A`Â åªæœ‰ä¸€ä¸ªéç©ºå­èŠ‚ç‚¹ï¼Œé‚£ä¹ˆå®ƒè¦è®©è¿™ä¸ªå­©å­æ¥æ›¿è‡ªå·±çš„ä½ç½®ã€‚
![[Pasted image 20240717005837.png]]
```java
// æ’é™¤äº†æƒ…å†µ 1 ä¹‹å
if (root.left == null) return root.right;
if (root.right == null) return root.left;
```

**æƒ…å†µ 3**ï¼š`A`Â æœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹ï¼Œéº»çƒ¦äº†ï¼Œä¸ºäº†ä¸ç ´å BST çš„æ€§è´¨ï¼Œ`A`Â å¿…é¡»æ‰¾åˆ°å·¦å­æ ‘ä¸­æœ€å¤§çš„é‚£ä¸ªèŠ‚ç‚¹ï¼Œæˆ–è€…å³å­æ ‘ä¸­æœ€å°çš„é‚£ä¸ªèŠ‚ç‚¹æ¥æ¥æ›¿è‡ªå·±ã€‚æˆ‘ä»¬ä»¥ç¬¬äºŒç§æ–¹å¼è®²è§£ã€‚
![[Pasted image 20240717005903.png]]
```java
if (root.left != null && root.right != null) {
    // æ‰¾åˆ°å³å­æ ‘çš„æœ€å°èŠ‚ç‚¹
    TreeNode minNode = getMin(root.right);
    // æŠŠ root æ”¹æˆ minNode
    root.val = minNode.val;
    // è½¬è€Œå»åˆ é™¤ minNode
    root.right = deleteNode(root.right, minNode.val);
}
```

ä¸‰ç§æƒ…å†µåˆ†æå®Œæ¯•ï¼Œå¡«å…¥æ¡†æ¶ï¼Œç®€åŒ–ä¸€ä¸‹ä»£ç ï¼š
```python
from typing import Optional

def deleteNode(root: Optional[TreeNode], key: int) -> Optional[TreeNode]:
    if root == None:
        return None
    if root.val == key:
        # è¿™ä¸¤ä¸ª if æŠŠæƒ…å†µ 1 å’Œ 2 éƒ½æ­£ç¡®å¤„ç†äº†
        if root.left == None:
            return root.right
        if root.right == None:
            return root.left
        # å¤„ç†æƒ…å†µ 3
        # è·å¾—å³å­æ ‘æœ€å°çš„èŠ‚ç‚¹
        minNode = getMin(root.right)
        # åˆ é™¤å³å­æ ‘æœ€å°çš„èŠ‚ç‚¹
        root.right = deleteNode(root.right, minNode.val)
        # ç”¨å³å­æ ‘æœ€å°çš„èŠ‚ç‚¹æ›¿æ¢ root èŠ‚ç‚¹
        minNode.left = root.left
        minNode.right = root.right
        root = minNode
    elif root.val > key:
        root.left = deleteNode(root.left, key)
    elif root.val < key:
        root.right = deleteNode(root.right, key)
    return root

def getMin(node: Optional[TreeNode]) -> Optional[TreeNode]:
    # BST æœ€å·¦è¾¹çš„å°±æ˜¯æœ€å°çš„
    while node.left != None:
        node = node.left
    return node
```

è¿™æ ·ï¼Œåˆ é™¤æ“ä½œå°±å®Œæˆäº†ã€‚æ³¨æ„ä¸€ä¸‹ï¼Œä¸Šè¿°ä»£ç åœ¨å¤„ç†æƒ…å†µ 3 æ—¶é€šè¿‡ä¸€ç³»åˆ—ç•¥å¾®å¤æ‚çš„é“¾è¡¨æ“ä½œäº¤æ¢Â `root`Â å’ŒÂ `minNode`Â ä¸¤ä¸ªèŠ‚ç‚¹ï¼š
```java
// å¤„ç†æƒ…å†µ 3
// è·å¾—å³å­æ ‘æœ€å°çš„èŠ‚ç‚¹
TreeNode minNode = getMin(root.right);
// åˆ é™¤å³å­æ ‘æœ€å°çš„èŠ‚ç‚¹
root.right = deleteNode(root.right, minNode.val);
// ç”¨å³å­æ ‘æœ€å°çš„èŠ‚ç‚¹æ›¿æ¢ root èŠ‚ç‚¹
minNode.left = root.left;
minNode.right = root.right;
root = minNode;
```


æœ€åæ€»ç»“ä¸€ä¸‹å§ï¼Œé€šè¿‡è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬æ€»ç»“å‡ºäº†å¦‚ä¸‹å‡ ä¸ªæŠ€å·§ï¼š

1ã€å¦‚æœå½“å‰èŠ‚ç‚¹ä¼šå¯¹ä¸‹é¢çš„å­èŠ‚ç‚¹æœ‰æ•´ä½“å½±å“ï¼Œå¯ä»¥é€šè¿‡è¾…åŠ©å‡½æ•°å¢é•¿å‚æ•°åˆ—è¡¨ï¼Œå€ŸåŠ©å‚æ•°ä¼ é€’ä¿¡æ¯ã€‚

2ã€åœ¨äºŒå‰æ ‘é€’å½’æ¡†æ¶ä¹‹ä¸Šï¼Œæ‰©å±•å‡ºä¸€å¥— BST ä»£ç æ¡†æ¶ï¼š
```java
void BST(TreeNode root, int target) {
    if (root.val == target)
        // æ‰¾åˆ°ç›®æ ‡ï¼Œåšç‚¹ä»€ä¹ˆ
    if (root.val < target) 
        BST(root.right, target);
    if (root.val > target)
        BST(root.left, target);
}
```

3ã€æ ¹æ®ä»£ç æ¡†æ¶æŒæ¡äº† BST çš„å¢åˆ æŸ¥æ”¹æ“ä½œã€‚