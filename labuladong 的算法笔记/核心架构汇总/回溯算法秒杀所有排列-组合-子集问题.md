| LeetCode                                                                       | åŠ›æ‰£                                                                    | éš¾åº¦  |
| ------------------------------------------------------------------------------ | --------------------------------------------------------------------- | --- |
| [216. Combination Sum III](https://leetcode.com/problems/combination-sum-iii/) | [216. ç»„åˆæ€»å’Œ III](https://leetcode.cn/problems/combination-sum-iii/)    | ğŸŸ   |
| [39. Combination Sum](https://leetcode.com/problems/combination-sum/)          | [39. ç»„åˆæ€»å’Œ](https://leetcode.cn/problems/combination-sum/)             | ğŸŸ   |
| [40. Combination Sum II](https://leetcode.com/problems/combination-sum-ii/)    | [40. ç»„åˆæ€»å’Œ II](https://leetcode.cn/problems/combination-sum-ii/)       | ğŸŸ   |
| [46. Permutations](https://leetcode.com/problems/permutations/)                | [46. å…¨æ’åˆ—](https://leetcode.cn/problems/permutations/)                 | ğŸŸ   |
| [47. Permutations II](https://leetcode.com/problems/permutations-ii/)          | [47. å…¨æ’åˆ— II](https://leetcode.cn/problems/permutations-ii/)           | ğŸŸ   |
| [77. Combinations](https://leetcode.com/problems/combinations/)                | [77. ç»„åˆ](https://leetcode.cn/problems/combinations/)                  | ğŸŸ   |
| [78. Subsets](https://leetcode.com/problems/subsets/)                          | [78. å­é›†](https://leetcode.cn/problems/subsets/)                       | ğŸŸ   |
| [90. Subsets II](https://leetcode.com/problems/subsets-ii/)                    | [90. å­é›† II](https://leetcode.cn/problems/subsets-ii/)                 | ğŸŸ   |
| -                                                                              | [å‰‘æŒ‡ Offer II 079. æ‰€æœ‰å­é›†](https://leetcode.cn/problems/TVdhkn/)         | ğŸŸ   |
| -                                                                              | [å‰‘æŒ‡ Offer II 080. å«æœ‰ k ä¸ªå…ƒç´ çš„ç»„åˆ](https://leetcode.cn/problems/uUsW3B/)  | ğŸŸ   |
| -                                                                              | [å‰‘æŒ‡ Offer II 081. å…è®¸é‡å¤é€‰æ‹©å…ƒç´ çš„ç»„åˆ](https://leetcode.cn/problems/Ygoe9J/)  | ğŸŸ   |
| -                                                                              | [å‰‘æŒ‡ Offer II 082. å«æœ‰é‡å¤å…ƒç´ é›†åˆçš„ç»„åˆ](https://leetcode.cn/problems/4sjJUc/)  | ğŸŸ   |
| -                                                                              | [å‰‘æŒ‡ Offer II 083. æ²¡æœ‰é‡å¤å…ƒç´ é›†åˆçš„å…¨æ’åˆ—](https://leetcode.cn/problems/VvJkup/) | ğŸŸ   |
| -                                                                              | [å‰‘æŒ‡ Offer II 084. å«æœ‰é‡å¤å…ƒç´ é›†åˆçš„å…¨æ’åˆ—](https://leetcode.cn/problems/7p8L0Z/) | ğŸŸ   |

è™½ç„¶æ’åˆ—ã€ç»„åˆã€å­é›†ç³»åˆ—é—®é¢˜æ˜¯é«˜ä¸­å°±å­¦è¿‡çš„ï¼Œä½†å¦‚æœæƒ³ç¼–å†™ç®—æ³•è§£å†³å®ƒä»¬ï¼Œè¿˜æ˜¯éå¸¸è€ƒéªŒè®¡ç®—æœºæ€ç»´çš„ï¼Œæœ¬æ–‡å°±è®²è®²ç¼–ç¨‹è§£å†³è¿™å‡ ä¸ªé—®é¢˜çš„æ ¸å¿ƒæ€è·¯ï¼Œä»¥åå†æœ‰ä»€ä¹ˆå˜ä½“ï¼Œä½ ä¹Ÿèƒ½æ‰‹åˆ°æ“’æ¥ï¼Œä»¥ä¸å˜åº”ä¸‡å˜ã€‚

æ— è®ºæ˜¯æ’åˆ—ã€ç»„åˆè¿˜æ˜¯å­é›†é—®é¢˜ï¼Œç®€å•è¯´æ— éå°±æ˜¯è®©ä½ ä»åºåˆ—Â `nums`Â ä¸­ä»¥ç»™å®šè§„åˆ™å–è‹¥å¹²å…ƒç´ ï¼Œä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§å˜ä½“ï¼š

**å½¢å¼ä¸€ã€å…ƒç´ æ— é‡ä¸å¯å¤é€‰ï¼Œå³Â `nums`Â ä¸­çš„å…ƒç´ éƒ½æ˜¯å”¯ä¸€çš„ï¼Œæ¯ä¸ªå…ƒç´ æœ€å¤šåªèƒ½è¢«ä½¿ç”¨ä¸€æ¬¡ï¼Œè¿™ä¹Ÿæ˜¯æœ€åŸºæœ¬çš„å½¢å¼**ã€‚

ä»¥ç»„åˆä¸ºä¾‹ï¼Œå¦‚æœè¾“å…¥Â `nums = [2,3,6,7]`ï¼Œå’Œä¸º 7 çš„ç»„åˆåº”è¯¥åªæœ‰Â `[7]`ã€‚

**å½¢å¼äºŒã€å…ƒç´ å¯é‡ä¸å¯å¤é€‰ï¼Œå³Â `nums`Â ä¸­çš„å…ƒç´ å¯ä»¥å­˜åœ¨é‡å¤ï¼Œæ¯ä¸ªå…ƒç´ æœ€å¤šåªèƒ½è¢«ä½¿ç”¨ä¸€æ¬¡**ã€‚

ä»¥ç»„åˆä¸ºä¾‹ï¼Œå¦‚æœè¾“å…¥Â `nums = [2,5,2,1,2]`ï¼Œå’Œä¸º 7 çš„ç»„åˆåº”è¯¥æœ‰ä¸¤ç§Â `[2,2,2,1]`Â å’ŒÂ `[5,2]`ã€‚

**å½¢å¼ä¸‰ã€å…ƒç´ æ— é‡å¯å¤é€‰ï¼Œå³Â `nums`Â ä¸­çš„å…ƒç´ éƒ½æ˜¯å”¯ä¸€çš„ï¼Œæ¯ä¸ªå…ƒç´ å¯ä»¥è¢«ä½¿ç”¨è‹¥å¹²æ¬¡**ã€‚

ä»¥ç»„åˆä¸ºä¾‹ï¼Œå¦‚æœè¾“å…¥Â `nums = [2,3,6,7]`ï¼Œå’Œä¸º 7 çš„ç»„åˆåº”è¯¥æœ‰ä¸¤ç§Â `[2,2,3]`Â å’ŒÂ `[7]`ã€‚

å½“ç„¶ï¼Œä¹Ÿå¯ä»¥è¯´æœ‰ç¬¬å››ç§å½¢å¼ï¼Œå³å…ƒç´ å¯é‡å¯å¤é€‰ã€‚ä½†æ—¢ç„¶å…ƒç´ å¯å¤é€‰ï¼Œé‚£åˆä½•å¿…å­˜åœ¨é‡å¤å…ƒç´ å‘¢ï¼Ÿå…ƒç´ å»é‡ä¹‹åå°±ç­‰åŒäºå½¢å¼ä¸‰ï¼Œæ‰€ä»¥è¿™ç§æƒ…å†µä¸ç”¨è€ƒè™‘ã€‚

ä¸Šé¢ç”¨ç»„åˆé—®é¢˜ä¸¾çš„ä¾‹å­ï¼Œä½†æ’åˆ—ã€ç»„åˆã€å­é›†é—®é¢˜éƒ½å¯ä»¥æœ‰è¿™ä¸‰ç§åŸºæœ¬å½¢å¼ï¼Œæ‰€ä»¥å…±æœ‰ 9 ç§å˜åŒ–ã€‚

é™¤æ­¤ä¹‹å¤–ï¼Œé¢˜ç›®ä¹Ÿå¯ä»¥å†æ·»åŠ å„ç§é™åˆ¶æ¡ä»¶ï¼Œæ¯”å¦‚è®©ä½ æ±‚å’Œä¸ºÂ `target`Â ä¸”å…ƒç´ ä¸ªæ•°ä¸ºÂ `k`Â çš„ç»„åˆï¼Œé‚£è¿™ä¹ˆä¸€æ¥åˆå¯ä»¥è¡ç”Ÿå‡ºä¸€å †å˜ä½“ï¼Œæ€ªä¸å¾—é¢è¯•ç¬”è¯•ä¸­ç»å¸¸è€ƒåˆ°æ’åˆ—ç»„åˆè¿™ç§åŸºæœ¬é¢˜å‹ã€‚

**ä½†æ— è®ºå½¢å¼æ€ä¹ˆå˜åŒ–ï¼Œå…¶æœ¬è´¨å°±æ˜¯ç©·ä¸¾æ‰€æœ‰è§£ï¼Œè€Œè¿™äº›è§£å‘ˆç°æ ‘å½¢ç»“æ„ï¼Œæ‰€ä»¥åˆç†ä½¿ç”¨å›æº¯ç®—æ³•æ¡†æ¶ï¼Œç¨æ”¹ä»£ç æ¡†æ¶å³å¯æŠŠè¿™äº›é—®é¢˜ä¸€ç½‘æ‰“å°½**ã€‚

å…·ä½“æ¥è¯´ï¼Œä½ éœ€è¦å…ˆé˜…è¯»å¹¶ç†è§£å‰æ–‡ [[å›æº¯ç®—æ³•è§£é¢˜å¥—è·¯æ¡†æ¶]]ï¼Œç„¶åè®°ä½å¦‚ä¸‹å­é›†é—®é¢˜å’Œæ’åˆ—é—®é¢˜çš„å›æº¯æ ‘ï¼Œå°±å¯ä»¥è§£å†³æ‰€æœ‰æ’åˆ—ç»„åˆå­é›†ç›¸å…³çš„é—®é¢˜ï¼š
![[Pasted image 20240705004737.png]]

![[Pasted image 20240705004741.png]]

ä¸ºä»€ä¹ˆåªè¦è®°ä½è¿™ä¸¤ç§æ ‘å½¢ç»“æ„å°±èƒ½è§£å†³æ‰€æœ‰ç›¸å…³é—®é¢˜å‘¢ï¼Ÿ

**é¦–å…ˆï¼Œç»„åˆé—®é¢˜å’Œå­é›†é—®é¢˜å…¶å®æ˜¯ç­‰ä»·çš„ï¼Œè¿™ä¸ªåé¢ä¼šè®²ï¼›è‡³äºä¹‹å‰è¯´çš„ä¸‰ç§å˜åŒ–å½¢å¼ï¼Œæ— éæ˜¯åœ¨è¿™ä¸¤æ£µæ ‘ä¸Šå‰ªæ‰æˆ–è€…å¢åŠ ä¸€äº›æ ‘æç½¢äº†**ã€‚

é‚£ä¹ˆï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±å¼€å§‹ç©·ä¸¾ï¼ŒæŠŠæ’åˆ—/ç»„åˆ/å­é›†é—®é¢˜çš„ 9 ç§å½¢å¼éƒ½è¿‡ä¸€éï¼Œå­¦å­¦å¦‚ä½•ç”¨å›æº¯ç®—æ³•æŠŠå®ƒä»¬ä¸€å¥—å¸¦èµ°ã€‚

# å­é›†ï¼ˆå…ƒç´ æ— é‡ä¸å¯å¤é€‰ï¼‰
åŠ›æ‰£ç¬¬ 78 é¢˜ã€Œ[å­é›†](https://leetcode.cn/problems/subsets/)ã€å°±æ˜¯è¿™ä¸ªé—®é¢˜ï¼š

é¢˜ç›®ç»™ä½ è¾“å…¥ä¸€ä¸ªæ— é‡å¤å…ƒç´ çš„æ•°ç»„Â `nums`ï¼Œå…¶ä¸­æ¯ä¸ªå…ƒç´ æœ€å¤šä½¿ç”¨ä¸€æ¬¡ï¼Œè¯·ä½ è¿”å›Â `nums`Â çš„æ‰€æœ‰å­é›†ã€‚

å‡½æ•°ç­¾åå¦‚ä¸‹ï¼š
```python
def subsets(nums: List[int]) -> List[List[int]]:
```
æ¯”å¦‚è¾“å…¥Â `nums = [1,2,3]`ï¼Œç®—æ³•åº”è¯¥è¿”å›å¦‚ä¸‹å­é›†ï¼š
```python
[ [],[1],[2],[3],[1,2],[1,3],[2,3],[1,2,3] ]
```
å¥½ï¼Œæˆ‘ä»¬æš‚æ—¶ä¸è€ƒè™‘å¦‚ä½•ç”¨ä»£ç å®ç°ï¼Œå…ˆå›å¿†ä¸€ä¸‹æˆ‘ä»¬çš„é«˜ä¸­çŸ¥è¯†ï¼Œå¦‚ä½•æ‰‹æ¨æ‰€æœ‰å­é›†ï¼Ÿ

é¦–å…ˆï¼Œç”Ÿæˆå…ƒç´ ä¸ªæ•°ä¸º 0 çš„å­é›†ï¼Œå³ç©ºé›†Â `[]`ï¼Œä¸ºäº†æ–¹ä¾¿è¡¨ç¤ºï¼Œæˆ‘ç§°ä¹‹ä¸ºÂ `S_0`ã€‚

ç„¶åï¼Œåœ¨Â `S_0`Â çš„åŸºç¡€ä¸Šç”Ÿæˆå…ƒç´ ä¸ªæ•°ä¸º 1 çš„æ‰€æœ‰å­é›†ï¼Œæˆ‘ç§°ä¸ºÂ `S_1`ï¼š
![[Pasted image 20240705004942.png]]

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨Â `S_1`Â çš„åŸºç¡€ä¸Šæ¨å¯¼å‡ºÂ `S_2`ï¼Œå³å…ƒç´ ä¸ªæ•°ä¸º 2 çš„æ‰€æœ‰å­é›†ï¼š
![[Pasted image 20240705004951.png]]

ä¸ºä»€ä¹ˆé›†åˆÂ `[2]`Â åªéœ€è¦æ·»åŠ Â `3`ï¼Œè€Œä¸æ·»åŠ å‰é¢çš„Â `1`Â å‘¢ï¼Ÿ

å› ä¸ºé›†åˆä¸­çš„å…ƒç´ ä¸ç”¨è€ƒè™‘é¡ºåºï¼Œ`[1,2,3]`Â ä¸­Â `2`Â åé¢åªæœ‰Â `3`ï¼Œå¦‚æœä½ æ·»åŠ äº†å‰é¢çš„Â `1`ï¼Œé‚£ä¹ˆÂ `[2,1]`Â ä¼šå’Œä¹‹å‰å·²ç»ç”Ÿæˆçš„å­é›†Â `[1,2]`Â é‡å¤ã€‚

**æ¢å¥è¯è¯´ï¼Œæˆ‘ä»¬é€šè¿‡ä¿è¯å…ƒç´ ä¹‹é—´çš„ç›¸å¯¹é¡ºåºä¸å˜æ¥é˜²æ­¢å‡ºç°é‡å¤çš„å­é›†**ã€‚

æ¥ç€ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡Â `S_2`Â æ¨å‡ºÂ `S_3`ï¼Œå®é™…ä¸ŠÂ `S_3`Â ä¸­åªæœ‰ä¸€ä¸ªé›†åˆÂ `[1,2,3]`ï¼Œå®ƒæ˜¯é€šè¿‡Â `[1,2]`Â æ¨å‡ºçš„ã€‚

æ•´ä¸ªæ¨å¯¼è¿‡ç¨‹å°±æ˜¯è¿™æ ·ä¸€æ£µæ ‘ï¼š
![[Pasted image 20240705005031.png]]

æ³¨æ„è¿™æ£µæ ‘çš„ç‰¹æ€§ï¼š

**å¦‚æœæŠŠæ ¹èŠ‚ç‚¹ä½œä¸ºç¬¬ 0 å±‚ï¼Œå°†æ¯ä¸ªèŠ‚ç‚¹å’Œæ ¹èŠ‚ç‚¹ä¹‹é—´æ ‘æä¸Šçš„å…ƒç´ ä½œä¸ºè¯¥èŠ‚ç‚¹çš„å€¼ï¼Œé‚£ä¹ˆç¬¬Â `n`Â å±‚çš„æ‰€æœ‰èŠ‚ç‚¹å°±æ˜¯å¤§å°ä¸ºÂ `n`Â çš„æ‰€æœ‰å­é›†**ã€‚

ä½ æ¯”å¦‚å¤§å°ä¸º 2 çš„å­é›†å°±æ˜¯è¿™ä¸€å±‚èŠ‚ç‚¹çš„å€¼ï¼š
![[Pasted image 20240705005102.png]]

é‚£ä¹ˆå†è¿›ä¸€æ­¥ï¼Œå¦‚æœæƒ³è®¡ç®—æ‰€æœ‰å­é›†ï¼Œé‚£åªè¦éå†è¿™æ£µå¤šå‰æ ‘ï¼ŒæŠŠæ‰€æœ‰èŠ‚ç‚¹çš„å€¼æ”¶é›†èµ·æ¥ä¸å°±è¡Œäº†ï¼Ÿ

ä»£ç å¦‚ä¸‹ï¼š
```python
class Solution:  
    def __init__(self):  
        self.res = []  
  
    def subsets(self, nums: List[int]) -> List[List[int]]:  
        self.backtrack(nums, [], 0)  
        return self.res  
  
    def backtrack(self, nums: List[int], track: List[int], start: int):  
        # å‰åºä½ç½®ï¼Œæ¯ä¸ªèŠ‚ç‚¹çš„å€¼éƒ½æ˜¯ä¸€ä¸ªå­é›†  
        self.res.append(track.copy())  
  
        # å›æº¯ç®—æ³•æ ‡å‡†æ¡†æ¶  
        for i in range(start, len(nums)):  
            # åšé€‰æ‹©  
            track.append(nums[i])  
            # é€šè¿‡ start å‚æ•°æ§åˆ¶æ ‘æçš„éå†ï¼Œé¿å…äº§ç”Ÿé‡å¤çš„å­é›†  
            self.backtrack(nums, track, i + 1)  
            # æ’¤é”€é€‰æ‹©  
            track.pop()
```

çœ‹è¿‡å‰æ–‡Â [[å›æº¯ç®—æ³•è§£é¢˜å¥—è·¯æ¡†æ¶]] çš„è¯»è€…åº”è¯¥å¾ˆå®¹æ˜“ç†è§£è¿™æ®µä»£ç å§ï¼Œæˆ‘ä»¬ä½¿ç”¨Â `start`Â å‚æ•°æ§åˆ¶æ ‘æçš„ç”Ÿé•¿é¿å…äº§ç”Ÿé‡å¤çš„å­é›†ï¼Œç”¨Â `track`Â è®°å½•æ ¹èŠ‚ç‚¹åˆ°æ¯ä¸ªèŠ‚ç‚¹çš„è·¯å¾„çš„å€¼ï¼ŒåŒæ—¶åœ¨å‰åºä½ç½®æŠŠæ¯ä¸ªèŠ‚ç‚¹çš„è·¯å¾„å€¼æ”¶é›†èµ·æ¥ï¼Œå®Œæˆå›æº¯æ ‘çš„éå†å°±æ”¶é›†äº†æ‰€æœ‰å­é›†ï¼š
![[Pasted image 20240705005755.png]]

æœ€åï¼Œ`backtrack`Â å‡½æ•°å¼€å¤´çœ‹ä¼¼æ²¡æœ‰ base caseï¼Œä¼šä¸ä¼šè¿›å…¥æ— é™é€’å½’ï¼Ÿ

å…¶å®ä¸ä¼šçš„ï¼Œå½“Â `start == nums.length`Â æ—¶ï¼Œå¶å­èŠ‚ç‚¹çš„å€¼ä¼šè¢«è£…å…¥Â `res`ï¼Œä½† for å¾ªç¯ä¸ä¼šæ‰§è¡Œï¼Œä¹Ÿå°±ç»“æŸäº†é€’å½’ã€‚

# ç»„åˆï¼ˆå…ƒç´ æ— é‡ä¸å¯å¤é€‰ï¼‰
å¦‚æœä½ èƒ½å¤ŸæˆåŠŸçš„ç”Ÿæˆæ‰€æœ‰æ— é‡å­é›†ï¼Œé‚£ä¹ˆä½ ç¨å¾®æ”¹æ”¹ä»£ç å°±èƒ½ç”Ÿæˆæ‰€æœ‰æ— é‡ç»„åˆäº†ã€‚

ä½ æ¯”å¦‚è¯´ï¼Œè®©ä½ åœ¨Â `nums = [1,2,3]`Â ä¸­æ‹¿ 2 ä¸ªå…ƒç´ å½¢æˆæ‰€æœ‰çš„ç»„åˆï¼Œä½ æ€ä¹ˆåšï¼Ÿ

ç¨å¾®æƒ³æƒ³å°±ä¼šå‘ç°ï¼Œå¤§å°ä¸º 2 çš„æ‰€æœ‰ç»„åˆï¼Œä¸å°±æ˜¯æ‰€æœ‰å¤§å°ä¸º 2 çš„å­é›†å˜›ã€‚

**æ‰€ä»¥æˆ‘è¯´ç»„åˆå’Œå­é›†æ˜¯ä¸€æ ·çš„ï¼šå¤§å°ä¸ºÂ `k`Â çš„ç»„åˆå°±æ˜¯å¤§å°ä¸ºÂ `k`Â çš„å­é›†**ã€‚

æ¯”å¦‚åŠ›æ‰£ç¬¬ 77 é¢˜ã€Œ[ç»„åˆ](https://leetcode.cn/problems/combinations/)ã€ï¼š

ç»™å®šä¸¤ä¸ªæ•´æ•°Â `n`Â å’ŒÂ `k`ï¼Œè¿”å›èŒƒå›´Â `[1, n]`Â ä¸­æ‰€æœ‰å¯èƒ½çš„Â `k`Â ä¸ªæ•°çš„ç»„åˆã€‚

å‡½æ•°ç­¾åå¦‚ä¸‹ï¼š
```python
def combine(n: int, k: int) -> List[List[int]]:
```
æ¯”å¦‚Â `combine(3, 2)`Â çš„è¿”å›å€¼åº”è¯¥æ˜¯ï¼š
```python
[ [1,2],[1,3],[2,3] ]
```

è¿™æ˜¯æ ‡å‡†çš„ç»„åˆé—®é¢˜ï¼Œä½†æˆ‘ç»™ä½ ç¿»è¯‘ä¸€ä¸‹å°±å˜æˆå­é›†é—®é¢˜äº†ï¼š

**ç»™ä½ è¾“å…¥ä¸€ä¸ªæ•°ç»„Â `nums = [1,2..,n]`Â å’Œä¸€ä¸ªæ­£æ•´æ•°Â `k`ï¼Œè¯·ä½ ç”Ÿæˆæ‰€æœ‰å¤§å°ä¸ºÂ `k`Â çš„å­é›†**ã€‚

è¿˜æ˜¯ä»¥Â `nums = [1,2,3]`Â ä¸ºä¾‹ï¼Œåˆšæ‰è®©ä½ æ±‚æ‰€æœ‰å­é›†ï¼Œå°±æ˜¯æŠŠæ‰€æœ‰èŠ‚ç‚¹çš„å€¼éƒ½æ”¶é›†èµ·æ¥ï¼›**ç°åœ¨ä½ åªéœ€è¦æŠŠç¬¬ 2 å±‚ï¼ˆæ ¹èŠ‚ç‚¹è§†ä¸ºç¬¬ 0 å±‚ï¼‰çš„èŠ‚ç‚¹æ”¶é›†èµ·æ¥ï¼Œå°±æ˜¯å¤§å°ä¸º 2 çš„æ‰€æœ‰ç»„åˆ**ï¼š
![[Pasted image 20240705005924.png]]

åæ˜ åˆ°ä»£ç ä¸Šï¼Œåªéœ€è¦ç¨æ”¹ base caseï¼Œæ§åˆ¶ç®—æ³•ä»…ä»…æ”¶é›†ç¬¬Â `k`Â å±‚èŠ‚ç‚¹çš„å€¼å³å¯ï¼š
```python
class Solution:  
    def __init__(self):  
        self.res = []  
  
    def combine(self, n: int, k: int) -> List[List[int]]:  
        nums = [_ for _ in range(1, n + 1)]  
        self.backtrack(nums, [], 0, k)  
        return self.res  
  
    def backtrack(self, nums: List[int], track: List[int], start, k):  
        # base case  
        if len(track) == k:  
            # éå†åˆ°äº†ç¬¬ k å±‚ï¼Œæ”¶é›†å½“å‰èŠ‚ç‚¹çš„å€¼  
            self.res.append(track.copy())  
            return  
  
        # å›æº¯ç®—æ³•æ ‡å‡†æ¡†æ¶  
        for i in range(start, len(nums)):  
            # åšé€‰æ‹©  
            track.append(nums[i])  
            # é€šè¿‡ start å‚æ•°æ§åˆ¶æ ‘æçš„éå†ï¼Œé¿å…äº§ç”Ÿé‡å¤çš„å­é›†  
            self.backtrack(nums, track, i + 1, k)  
            # æ’¤é”€é€‰æ‹©  
            track.pop()
```
è¿™æ ·ï¼Œæ ‡å‡†çš„ç»„åˆé—®é¢˜ä¹Ÿè§£å†³äº†ã€‚

# æ’åˆ—ï¼ˆå…ƒç´ æ— é‡ä¸å¯å¤é€‰ï¼‰
æ’åˆ—é—®é¢˜åœ¨å‰æ–‡ [[å›æº¯ç®—æ³•è§£é¢˜å¥—è·¯æ¡†æ¶]]Â è®²è¿‡ï¼Œè¿™é‡Œå°±ç®€å•è¿‡ä¸€ä¸‹ã€‚

åŠ›æ‰£ç¬¬ 46 é¢˜ã€Œ[å…¨æ’åˆ—](https://leetcode.cn/problems/permutations/)ã€å°±æ˜¯æ ‡å‡†çš„æ’åˆ—é—®é¢˜ï¼š

ç»™å®šä¸€ä¸ª**ä¸å«é‡å¤æ•°å­—**çš„æ•°ç»„Â `nums`ï¼Œè¿”å›å…¶æ‰€æœ‰å¯èƒ½çš„**å…¨æ’åˆ—**ã€‚

å‡½æ•°ç­¾åå¦‚ä¸‹ï¼š
```python
def permute(nums: List[int]) -> List[List[int]]:
```
æ¯”å¦‚è¾“å…¥Â `nums = [1,2,3]`ï¼Œå‡½æ•°çš„è¿”å›å€¼åº”è¯¥æ˜¯ï¼š
```python
[
    [1,2,3],[1,3,2],
    [2,1,3],[2,3,1],
    [3,1,2],[3,2,1]
]
```

åˆšæ‰è®²çš„ç»„åˆ/å­é›†é—®é¢˜ä½¿ç”¨Â `start`Â å˜é‡ä¿è¯å…ƒç´ Â `nums[start]`Â ä¹‹ååªä¼šå‡ºç°Â `nums[start+1..]`Â ä¸­çš„å…ƒç´ ï¼Œé€šè¿‡å›ºå®šå…ƒç´ çš„ç›¸å¯¹ä½ç½®ä¿è¯ä¸å‡ºç°é‡å¤çš„å­é›†ã€‚

**ä½†æ’åˆ—é—®é¢˜æœ¬èº«å°±æ˜¯è®©ä½ ç©·ä¸¾å…ƒç´ çš„ä½ç½®ï¼Œ`nums[i]`Â ä¹‹åä¹Ÿå¯ä»¥å‡ºç°Â `nums[i]`Â å·¦è¾¹çš„å…ƒç´ ï¼Œæ‰€ä»¥ä¹‹å‰çš„é‚£ä¸€å¥—ç©ä¸è½¬äº†ï¼Œéœ€è¦é¢å¤–ä½¿ç”¨Â `used`Â æ•°ç»„æ¥æ ‡è®°å“ªäº›å…ƒç´ è¿˜å¯ä»¥è¢«é€‰æ‹©**ã€‚

æ ‡å‡†å…¨æ’åˆ—å¯ä»¥æŠ½è±¡æˆå¦‚ä¸‹è¿™æ£µå¤šå‰æ ‘ï¼š
![[Pasted image 20240705010918.png]]

æˆ‘ä»¬ç”¨Â `used`Â æ•°ç»„æ ‡è®°å·²ç»åœ¨è·¯å¾„ä¸Šçš„å…ƒç´ é¿å…é‡å¤é€‰æ‹©ï¼Œç„¶åæ”¶é›†æ‰€æœ‰å¶å­èŠ‚ç‚¹ä¸Šçš„å€¼ï¼Œå°±æ˜¯æ‰€æœ‰å…¨æ’åˆ—çš„ç»“æœï¼š
```python
class Solution:  
    def __init__(self):  
        self.res = []  
  
    def permute(self, nums: List[int]) -> List[List[int]]:  
        used = [False for _ in range(len(nums))]  
        self.backtrack(nums, [], used)  
        return self.res  
  
    def backtrack(self, nums: List[int], track: List[int], used: List[bool]):  
        # è§¦å‘ç»“æŸæ¡ä»¶  
        if len(track) == len(nums):  
            # æ³¨æ„éœ€è¦ä¼ å…¥ track.copy()ï¼Œè€Œé track            self.res.append(track.copy())  
            return  
  
        for i in range(len(nums)):  
            # æ’é™¤ä¸åˆæ³•çš„é€‰æ‹©  
            if used[i]:  
                # nums[i] å·²ç»åœ¨ track ä¸­ï¼Œè·³è¿‡  
                continue  
            # åšé€‰æ‹©  
            track.append(nums[i])  
            used[i] = True  
            # è¿›å…¥ä¸‹ä¸€å±‚å†³ç­–æ ‘  
            self.backtrack(nums, track, used)  
            # å–æ¶ˆé€‰æ‹©  
            track.pop()  
            used[i] = False
```

è¿™æ ·ï¼Œå…¨æ’åˆ—é—®é¢˜å°±è§£å†³äº†ã€‚

ä½†å¦‚æœé¢˜ç›®ä¸è®©ä½ ç®—å…¨æ’åˆ—ï¼Œè€Œæ˜¯è®©ä½ ç®—å…ƒç´ ä¸ªæ•°ä¸ºÂ `k`Â çš„æ’åˆ—ï¼Œæ€ä¹ˆç®—ï¼Ÿ

ä¹Ÿå¾ˆç®€å•ï¼Œæ”¹ä¸‹Â `backtrack`Â å‡½æ•°çš„ base caseï¼Œä»…æ”¶é›†ç¬¬Â `k`Â å±‚çš„èŠ‚ç‚¹å€¼å³å¯ï¼š
```python
# å›æº¯ç®—æ³•æ ¸å¿ƒå‡½æ•°
def backtrack(nums: List[int], k: int) -> None:
    # base caseï¼Œåˆ°è¾¾ç¬¬ k å±‚ï¼Œæ”¶é›†èŠ‚ç‚¹çš„å€¼
    if len(track) == k:
        # ç¬¬ k å±‚èŠ‚ç‚¹çš„å€¼å°±æ˜¯å¤§å°ä¸º k çš„æ’åˆ—
        res.append(track[:])
        return

    # å›æº¯ç®—æ³•æ ‡å‡†æ¡†æ¶
    for i in range(len(nums)):
        # ...
        backtrack(nums, k)
        # ...
```

# å­é›†/ç»„åˆï¼ˆå…ƒç´ å¯é‡ä¸å¯å¤é€‰ï¼‰
åˆšæ‰è®²çš„æ ‡å‡†å­é›†é—®é¢˜è¾“å…¥çš„Â `nums`Â æ˜¯æ²¡æœ‰é‡å¤å…ƒç´ çš„ï¼Œä½†å¦‚æœå­˜åœ¨é‡å¤å…ƒç´ ï¼Œæ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ

åŠ›æ‰£ç¬¬ 90 é¢˜ã€Œ[å­é›† II](https://leetcode.cn/problems/subsets-ii/)ã€å°±æ˜¯è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼š

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„Â `nums`ï¼Œå…¶ä¸­å¯èƒ½åŒ…å«é‡å¤å…ƒç´ ï¼Œè¯·ä½ è¿”å›è¯¥æ•°ç»„æ‰€æœ‰å¯èƒ½çš„å­é›†ã€‚

æ¯”å¦‚è¾“å…¥Â `nums = [1,2,2]`ï¼Œä½ åº”è¯¥è¾“å‡ºï¼š
```java
[ [],[1],[2],[1,2],[2,2],[1,2,2] ]
```

å½“ç„¶ï¼ŒæŒ‰é“ç†è¯´ã€Œé›†åˆã€ä¸åº”è¯¥åŒ…å«é‡å¤å…ƒç´ çš„ï¼Œä½†æ—¢ç„¶é¢˜ç›®è¿™æ ·é—®äº†ï¼Œæˆ‘ä»¬å°±å¿½ç•¥è¿™ä¸ªç»†èŠ‚å§ï¼Œä»”ç»†æ€è€ƒä¸€ä¸‹è¿™é“é¢˜æ€ä¹ˆåšæ‰æ˜¯æ­£äº‹ã€‚

å°±ä»¥Â `nums = [1,2,2]`Â ä¸ºä¾‹ï¼Œä¸ºäº†åŒºåˆ«ä¸¤ä¸ªÂ `2`Â æ˜¯ä¸åŒå…ƒç´ ï¼Œåé¢æˆ‘ä»¬å†™ä½œÂ `nums = [1,2,2']`ã€‚

æŒ‰ç…§ä¹‹å‰çš„æ€è·¯ç”»å‡ºå­é›†çš„æ ‘å½¢ç»“æ„ï¼Œæ˜¾ç„¶ï¼Œä¸¤æ¡å€¼ç›¸åŒçš„ç›¸é‚»æ ‘æä¼šäº§ç”Ÿé‡å¤ï¼š
![[Pasted image 20240705165424.png]]

```java
[ 
    [],
    [1],[2],[2'],
    [1,2],[1,2'],[2,2'],
    [1,2,2']
]
```

ä½ å¯ä»¥çœ‹åˆ°ï¼Œ`[2]`Â å’ŒÂ `[1,2]`Â è¿™ä¸¤ä¸ªç»“æœå‡ºç°äº†é‡å¤ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦è¿›è¡Œå‰ªæï¼Œå¦‚æœä¸€ä¸ªèŠ‚ç‚¹æœ‰å¤šæ¡å€¼ç›¸åŒçš„æ ‘æç›¸é‚»ï¼Œåˆ™åªéå†ç¬¬ä¸€æ¡ï¼Œå‰©ä¸‹çš„éƒ½å‰ªæ‰ï¼Œä¸è¦å»éå†ï¼š
![[Pasted image 20240705165500.png]]

**ä½“ç°åœ¨ä»£ç ä¸Šï¼Œéœ€è¦å…ˆè¿›è¡Œæ’åºï¼Œè®©ç›¸åŒçš„å…ƒç´ é åœ¨ä¸€èµ·ï¼Œå¦‚æœå‘ç°Â `nums[i] == nums[i-1]`ï¼Œåˆ™è·³è¿‡**ï¼š
```python
class Solution:  
    def __init__(self):  
        self.res = []  
        self.track = []  
        self.vaild = []  
  
    def subsetsWithDup(self, nums: List[int]) -> List[List[int]]:  
        nums.sort()  
        self.vaild = [False for _ in range(len(nums))]  
        self.backtrack(nums, 0)  
        return self.res  
  
    def backtrack(self, nums: List[int], start: int):  
        self.res.append(self.track.copy())  
  
        for i in range(start, len(nums)):  
            if i > start and nums[i] == nums[i - 1] and not self.vaild[i]:  
                continue  
            self.track.append(nums[i])  
            self.vaild[i] = True  
            self.backtrack(nums, i + 1)  
            self.track.pop()  
            self.vaild[i] = False
```

è¿™æ®µä»£ç å’Œä¹‹å‰æ ‡å‡†çš„å­é›†é—®é¢˜çš„ä»£ç å‡ ä¹ç›¸åŒï¼Œå°±æ˜¯æ·»åŠ äº†æ’åºå’Œå‰ªæçš„é€»è¾‘ã€‚

è‡³äºä¸ºä»€ä¹ˆè¦è¿™æ ·å‰ªæï¼Œç»“åˆå‰é¢çš„å›¾åº”è¯¥ä¹Ÿå¾ˆå®¹æ˜“ç†è§£ï¼Œè¿™æ ·å¸¦é‡å¤å…ƒç´ çš„å­é›†é—®é¢˜ä¹Ÿè§£å†³äº†ã€‚

**æˆ‘ä»¬è¯´äº†ç»„åˆé—®é¢˜å’Œå­é›†é—®é¢˜æ˜¯ç­‰ä»·çš„**ï¼Œæ‰€ä»¥æˆ‘ä»¬ç›´æ¥çœ‹ä¸€é“ç»„åˆçš„é¢˜ç›®å§ï¼Œè¿™æ˜¯åŠ›æ‰£ç¬¬ 40 é¢˜ã€Œ[ç»„åˆæ€»å’Œ II](https://leetcode.cn/problems/combination-sum-ii/)ã€ï¼š

ç»™ä½ è¾“å…¥Â `candidates`Â å’Œä¸€ä¸ªç›®æ ‡å’ŒÂ `target`ï¼Œä»Â `candidates`Â ä¸­æ‰¾å‡ºä¸­æ‰€æœ‰å’Œä¸ºÂ `target`Â çš„ç»„åˆã€‚

`candidates`Â å¯èƒ½å­˜åœ¨é‡å¤å…ƒç´ ï¼Œä¸”å…¶ä¸­çš„æ¯ä¸ªæ•°å­—æœ€å¤šåªèƒ½ä½¿ç”¨ä¸€æ¬¡ã€‚

è¯´è¿™æ˜¯ä¸€ä¸ªç»„åˆé—®é¢˜ï¼Œå…¶å®æ¢ä¸ªé—®æ³•å°±å˜æˆå­é›†é—®é¢˜äº†ï¼šè¯·ä½ è®¡ç®—Â `candidates`Â ä¸­æ‰€æœ‰å’Œä¸ºÂ `target`Â çš„å­é›†ã€‚

æ‰€ä»¥è¿™é¢˜æ€ä¹ˆåšå‘¢ï¼Ÿ

å¯¹æ¯”å­é›†é—®é¢˜çš„è§£æ³•ï¼Œåªè¦é¢å¤–ç”¨ä¸€ä¸ªÂ `trackSum`Â å˜é‡è®°å½•å›æº¯è·¯å¾„ä¸Šçš„å…ƒç´ å’Œï¼Œç„¶åå°† base case æ”¹ä¸€æ”¹å³å¯è§£å†³è¿™é“é¢˜ï¼š
```python
class Solution:  
    def __init__(self):  
        self.res = []  
        self.track = []  
        self.vaild = []  
        self.trackSum = 0  
  
    def combinationSum2(self, candidates: List[int], target: int) -> List[List[int]]:  
        candidates.sort()  
        self.vaild = [False for _ in range(len(candidates))]  
        self.backtrack(candidates, target, 0)  
        return self.res  
  
    def backtrack(self, candidates: List[int], target: int, start: int):  
        if self.trackSum == target:  
            self.res.append(self.track.copy())  
        if self.trackSum > target:  
            return  
  
        for i in range(start, len(candidates)):  
            if i > start and candidates[i] == candidates[i - 1] and not self.vaild[i]:  
                continue  
            self.track.append(candidates[i])  
            self.trackSum += candidates[i]  
            self.vaild[i] = True  
            self.backtrack(candidates, target, i + 1)  
            self.track.pop()  
            self.trackSum -= candidates[i]  
            self.vaild[i] = False
```

# æ’åˆ—ï¼ˆå…ƒç´ å¯é‡ä¸å¯å¤é€‰ï¼‰
æ’åˆ—é—®é¢˜çš„è¾“å…¥å¦‚æœå­˜åœ¨é‡å¤ï¼Œæ¯”å­é›†/ç»„åˆé—®é¢˜ç¨å¾®å¤æ‚ä¸€ç‚¹ï¼Œæˆ‘ä»¬çœ‹çœ‹åŠ›æ‰£ç¬¬ 47 é¢˜ã€Œ[å…¨æ’åˆ— II](https://leetcode.cn/problems/permutations-ii/)ã€ï¼š

ç»™ä½ è¾“å…¥ä¸€ä¸ªå¯åŒ…å«é‡å¤æ•°å­—çš„åºåˆ—Â `nums`ï¼Œè¯·ä½ å†™ä¸€ä¸ªç®—æ³•ï¼Œè¿”å›æ‰€æœ‰å¯èƒ½çš„å…¨æ’åˆ—ï¼Œå‡½æ•°ç­¾åå¦‚ä¸‹ï¼š
```python
def permuteUnique(nums: List[int]) -> List[List[int]]:
```
æ¯”å¦‚è¾“å…¥Â `nums = [1,2,2]`ï¼Œå‡½æ•°è¿”å›ï¼š
```python
[ [1,2,2],[2,1,2],[2,2,1] ]
```
ä»£ç å¦‚ä¸‹ï¼š
```python
class Solution:  
    def __init__(self):  
        self.res = []    # ç”¨äºå­˜å‚¨ç»“æœ  
        self.track = []  # ç”¨äºå­˜å‚¨è·¯å¾„  
        self.vaild = []  # è®°å½•å…ƒç´ æ˜¯å¦ä½¿ç”¨è¿‡  
  
    def permuteUnique(self, nums: List[int]) -> List[List[int]]:  
        # å…ˆæ’åºï¼Œè®©ç›¸åŒçš„å…ƒç´ é åœ¨ä¸€èµ·  
        nums.sort()  
        self.vaild = [False for _ in range(len(nums))]  
        self.backtrack(nums)  
        return self.res  
  
    def backtrack(self, nums: List[int]):  
        if len(self.track) == len(nums):  
            self.res.append(self.track.copy())  
            return  
  
        for i in range(len(nums)):  
            if self.vaild[i]:  
                continue  
            # æ–°æ·»åŠ çš„å‰ªæé€»è¾‘ï¼Œå›ºå®šç›¸åŒçš„å…ƒç´ åœ¨æ’åˆ—ä¸­çš„ç›¸å¯¹ä½ç½®  
            if i > 0 and nums[i] == nums[i - 1] and not self.vaild[i - 1]:  
                continue  
            self.track.append(nums[i])  
            self.vaild[i] = True  
            self.backtrack(nums)  
            self.track.pop()  
            self.vaild[i] = False
```

ä½ å¯¹æ¯”ä¸€ä¸‹ä¹‹å‰çš„æ ‡å‡†å…¨æ’åˆ—è§£æ³•ä»£ç ï¼Œè¿™æ®µè§£æ³•ä»£ç åªæœ‰ä¸¤å¤„ä¸åŒï¼š

1ã€å¯¹Â `nums`Â è¿›è¡Œäº†æ’åºã€‚

2ã€æ·»åŠ äº†ä¸€å¥é¢å¤–çš„å‰ªæé€»è¾‘ã€‚

ç±»æ¯”è¾“å…¥åŒ…å«é‡å¤å…ƒç´ çš„å­é›†/ç»„åˆé—®é¢˜ï¼Œä½ å¤§æ¦‚åº”è¯¥ç†è§£è¿™ä¹ˆåšæ˜¯ä¸ºäº†é˜²æ­¢å‡ºç°é‡å¤ç»“æœã€‚

ä½†æ˜¯æ³¨æ„æ’åˆ—é—®é¢˜çš„å‰ªæé€»è¾‘ï¼Œå’Œå­é›†/ç»„åˆé—®é¢˜çš„å‰ªæé€»è¾‘ç•¥æœ‰ä¸åŒï¼šæ–°å¢äº†Â `!used[i - 1]`Â çš„é€»è¾‘åˆ¤æ–­ã€‚

è¿™ä¸ªåœ°æ–¹ç†è§£èµ·æ¥å°±éœ€è¦ä¸€äº›æŠ€å·§æ€§äº†ï¼Œä¸”å¬æˆ‘æ…¢æ…¢åˆ°æ¥ã€‚ä¸ºäº†æ–¹ä¾¿ç ”ç©¶ï¼Œä¾ç„¶æŠŠç›¸åŒçš„å…ƒç´ ç”¨ä¸Šæ ‡Â `'`Â ä»¥ç¤ºåŒºåˆ«ã€‚

å‡è®¾è¾“å…¥ä¸ºÂ `nums = [1,2,2']`ï¼Œæ ‡å‡†çš„å…¨æ’åˆ—ç®—æ³•ä¼šå¾—å‡ºå¦‚ä¸‹ç­”æ¡ˆï¼š
```java
[
    [1,2,2'],[1,2',2],
    [2,1,2'],[2,2',1],
    [2',1,2],[2',2,1]
]
```

æ˜¾ç„¶ï¼Œè¿™ä¸ªç»“æœå­˜åœ¨é‡å¤ï¼Œæ¯”å¦‚Â `[1,2,2']`Â å’ŒÂ `[1,2',2]`Â åº”è¯¥åªè¢«ç®—ä½œåŒä¸€ä¸ªæ’åˆ—ï¼Œä½†è¢«ç®—ä½œäº†ä¸¤ä¸ªä¸åŒçš„æ’åˆ—ã€‚

æ‰€ä»¥ç°åœ¨çš„å…³é”®åœ¨äºï¼Œå¦‚ä½•è®¾è®¡å‰ªæé€»è¾‘ï¼ŒæŠŠè¿™ç§é‡å¤å»é™¤æ‰ï¼Ÿ

**ç­”æ¡ˆæ˜¯ï¼Œä¿è¯ç›¸åŒå…ƒç´ åœ¨æ’åˆ—ä¸­çš„ç›¸å¯¹ä½ç½®ä¿æŒä¸å˜**ã€‚

æ¯”å¦‚è¯´Â `nums = [1,2,2']`Â è¿™ä¸ªä¾‹å­ï¼Œæˆ‘ä¿æŒæ’åˆ—ä¸­Â `2`Â ä¸€ç›´åœ¨Â `2'`Â å‰é¢ã€‚

è¿™æ ·çš„è¯ï¼Œä½ ä»ä¸Šé¢ 6 ä¸ªæ’åˆ—ä¸­åªèƒ½æŒ‘å‡º 3 ä¸ªæ’åˆ—ç¬¦åˆè¿™ä¸ªæ¡ä»¶ï¼š
```java
[ [1,2,2'],[2,1,2'],[2,2',1] ]
```

è¿™ä¹Ÿå°±æ˜¯æ­£ç¡®ç­”æ¡ˆã€‚

è¿›ä¸€æ­¥ï¼Œå¦‚æœÂ `nums = [1,2,2',2'']`ï¼Œæˆ‘åªè¦ä¿è¯é‡å¤å…ƒç´ Â `2`Â çš„ç›¸å¯¹ä½ç½®å›ºå®šï¼Œæ¯”å¦‚è¯´Â `2 -> 2' -> 2''`ï¼Œä¹Ÿå¯ä»¥å¾—åˆ°æ— é‡å¤çš„å…¨æ’åˆ—ç»“æœã€‚

ä»”ç»†æ€è€ƒï¼Œåº”è¯¥å¾ˆå®¹æ˜“æ˜ç™½å…¶ä¸­çš„åŸç†ï¼š

**æ ‡å‡†å…¨æ’åˆ—ç®—æ³•ä¹‹æ‰€ä»¥å‡ºç°é‡å¤ï¼Œæ˜¯å› ä¸ºæŠŠç›¸åŒå…ƒç´ å½¢æˆçš„æ’åˆ—åºåˆ—è§†ä¸ºä¸åŒçš„åºåˆ—ï¼Œä½†å®é™…ä¸Šå®ƒä»¬åº”è¯¥æ˜¯ç›¸åŒçš„ï¼›è€Œå¦‚æœå›ºå®šç›¸åŒå…ƒç´ å½¢æˆçš„åºåˆ—é¡ºåºï¼Œå½“ç„¶å°±é¿å…äº†é‡å¤**ã€‚

é‚£ä¹ˆåæ˜ åˆ°ä»£ç ä¸Šï¼Œä½ æ³¨æ„çœ‹è¿™ä¸ªå‰ªæé€»è¾‘ï¼š
```java
// æ–°æ·»åŠ çš„å‰ªæé€»è¾‘ï¼Œå›ºå®šç›¸åŒçš„å…ƒç´ åœ¨æ’åˆ—ä¸­çš„ç›¸å¯¹ä½ç½®
if (i > 0 && nums[i] == nums[i - 1] && !used[i - 1]) {
    // å¦‚æœå‰é¢çš„ç›¸é‚»ç›¸ç­‰å…ƒç´ æ²¡æœ‰ç”¨è¿‡ï¼Œåˆ™è·³è¿‡
    continue;
}
// é€‰æ‹© nums[i]
```

**å½“å‡ºç°é‡å¤å…ƒç´ æ—¶ï¼Œæ¯”å¦‚è¾“å…¥Â `nums = [1,2,2',2'']`ï¼Œ`2'`Â åªæœ‰åœ¨Â `2`Â å·²ç»è¢«ä½¿ç”¨çš„æƒ…å†µä¸‹æ‰ä¼šè¢«é€‰æ‹©ï¼ŒåŒç†ï¼Œ`2''`Â åªæœ‰åœ¨Â `2'`Â å·²ç»è¢«ä½¿ç”¨çš„æƒ…å†µä¸‹æ‰ä¼šè¢«é€‰æ‹©ï¼Œè¿™å°±ä¿è¯äº†ç›¸åŒå…ƒç´ åœ¨æ’åˆ—ä¸­çš„ç›¸å¯¹ä½ç½®ä¿è¯å›ºå®š**ã€‚

è¿™é‡Œæ‹“å±•ä¸€ä¸‹ï¼Œå¦‚æœä½ æŠŠä¸Šè¿°å‰ªæé€»è¾‘ä¸­çš„Â `!used[i - 1]`Â æ”¹æˆÂ `used[i - 1]`ï¼Œå…¶å®ä¹Ÿå¯ä»¥é€šè¿‡æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹ï¼Œä½†æ•ˆç‡ä¼šæœ‰æ‰€ä¸‹é™ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ

ä¹‹æ‰€ä»¥è¿™æ ·ä¿®æ”¹ä¸ä¼šäº§ç”Ÿé”™è¯¯ï¼Œæ˜¯å› ä¸ºè¿™ç§å†™æ³•ç›¸å½“äºç»´æŠ¤äº†Â `2'' -> 2' -> 2`Â çš„ç›¸å¯¹é¡ºåºï¼Œæœ€ç»ˆä¹Ÿå¯ä»¥å®ç°å»é‡çš„æ•ˆæœã€‚

ä½†ä¸ºä»€ä¹ˆè¿™æ ·å†™æ•ˆç‡ä¼šä¸‹é™å‘¢ï¼Ÿå› ä¸ºè¿™ä¸ªå†™æ³•å‰ªæ‰çš„æ ‘æä¸å¤Ÿå¤šã€‚

æ¯”å¦‚è¾“å…¥Â `nums = [2,2',2'']`ï¼Œäº§ç”Ÿçš„å›æº¯æ ‘å¦‚ä¸‹ï¼š
![[Pasted image 20240705182629.png]]

å¦‚æœç”¨ç»¿è‰²æ ‘æä»£è¡¨Â `backtrack`Â å‡½æ•°éå†è¿‡çš„è·¯å¾„ï¼Œçº¢è‰²æ ‘æä»£è¡¨å‰ªæé€»è¾‘çš„è§¦å‘ï¼Œé‚£ä¹ˆÂ `!used[i - 1]`Â è¿™ç§å‰ªæé€»è¾‘å¾—åˆ°çš„å›æº¯æ ‘é•¿è¿™æ ·ï¼š
![[Pasted image 20240705182651.png]]

è€ŒÂ `used[i - 1]`Â è¿™ç§å‰ªæé€»è¾‘å¾—åˆ°çš„å›æº¯æ ‘å¦‚ä¸‹ï¼š
![[Pasted image 20240705182714.png]]

å¯ä»¥çœ‹åˆ°ï¼Œ`!used[i - 1]`Â è¿™ç§å‰ªæé€»è¾‘å‰ªå¾—å¹²å‡€åˆ©è½ï¼Œè€ŒÂ `used[i - 1]`Â è¿™ç§å‰ªæé€»è¾‘è™½ç„¶ä¹Ÿèƒ½å¾—åˆ°æ— é‡ç»“æœï¼Œä½†å®ƒå‰ªæ‰çš„æ ‘æè¾ƒå°‘ï¼Œå­˜åœ¨çš„æ— æ•ˆè®¡ç®—è¾ƒå¤šï¼Œæ‰€ä»¥æ•ˆç‡ä¼šå·®ä¸€äº›ã€‚

# å­é›†/ç»„åˆï¼ˆå…ƒç´ æ— é‡å¯å¤é€‰ï¼‰
ç»ˆäºåˆ°äº†æœ€åä¸€ç§ç±»å‹äº†ï¼šè¾“å…¥æ•°ç»„æ— é‡å¤å…ƒç´ ï¼Œä½†æ¯ä¸ªå…ƒç´ å¯ä»¥è¢«æ— é™æ¬¡ä½¿ç”¨ã€‚

ç›´æ¥çœ‹åŠ›æ‰£ç¬¬ 39 é¢˜ã€Œ[ç»„åˆæ€»å’Œ](https://leetcode.cn/problems/combination-sum/)ã€ï¼š

ç»™ä½ ä¸€ä¸ªæ— é‡å¤å…ƒç´ çš„æ•´æ•°æ•°ç»„Â `candidates`Â å’Œä¸€ä¸ªç›®æ ‡å’ŒÂ `target`ï¼Œæ‰¾å‡ºÂ `candidates`Â ä¸­å¯ä»¥ä½¿æ•°å­—å’Œä¸ºç›®æ ‡æ•°Â `target`Â çš„æ‰€æœ‰ç»„åˆã€‚`candidates`Â ä¸­çš„æ¯ä¸ªæ•°å­—å¯ä»¥æ— é™åˆ¶é‡å¤è¢«é€‰å–ã€‚

å‡½æ•°ç­¾åå¦‚ä¸‹ï¼š
```java
List<List<Integer>> combinationSum(int[] candidates, int target)
```
æ¯”å¦‚è¾“å…¥Â `candidates = [1,2,3], target = 3`ï¼Œç®—æ³•åº”è¯¥è¿”å›ï¼š
```java
[ [1,1,1],[1,2],[3] ]
```
è¿™é“é¢˜è¯´æ˜¯ç»„åˆé—®é¢˜ï¼Œå®é™…ä¸Šä¹Ÿæ˜¯å­é›†é—®é¢˜ï¼š`candidates`Â çš„å“ªäº›å­é›†çš„å’Œä¸ºÂ `target`ï¼Ÿ

æƒ³è§£å†³è¿™ç§ç±»å‹çš„é—®é¢˜ï¼Œä¹Ÿå¾—å›åˆ°å›æº¯æ ‘ä¸Šï¼Œ**æˆ‘ä»¬ä¸å¦¨å…ˆæ€è€ƒæ€è€ƒï¼Œæ ‡å‡†çš„å­é›†/ç»„åˆé—®é¢˜æ˜¯å¦‚ä½•ä¿è¯ä¸é‡å¤ä½¿ç”¨å…ƒç´ çš„**ï¼Ÿ

ç­”æ¡ˆåœ¨äºÂ `backtrack`Â é€’å½’æ—¶è¾“å…¥çš„å‚æ•°Â `start`ï¼š
```python
# æ— é‡ç»„åˆçš„å›æº¯ç®—æ³•æ¡†æ¶
def backtrack(nums: List[int], start: int) -> None:
    for i in range(start, len(nums)):
        # ...
        # é€’å½’éå†ä¸‹ä¸€å±‚å›æº¯æ ‘ï¼Œæ³¨æ„å‚æ•°
        backtrack(nums, i + 1)
        # ...
```
è¿™ä¸ªÂ `i`Â ä»Â `start`Â å¼€å§‹ï¼Œé‚£ä¹ˆä¸‹ä¸€å±‚å›æº¯æ ‘å°±æ˜¯ä»Â `start + 1`Â å¼€å§‹ï¼Œä»è€Œä¿è¯Â `nums[start]`Â è¿™ä¸ªå…ƒç´ ä¸ä¼šè¢«é‡å¤ä½¿ç”¨ï¼š
![[Pasted image 20240705193003.png]]

é‚£ä¹ˆåè¿‡æ¥ï¼Œå¦‚æœæˆ‘æƒ³è®©æ¯ä¸ªå…ƒç´ è¢«é‡å¤ä½¿ç”¨ï¼Œæˆ‘åªè¦æŠŠÂ `i + 1`Â æ”¹æˆÂ `i`Â å³å¯ï¼š
```python
# å¯é‡ç»„åˆçš„å›æº¯ç®—æ³•æ¡†æ¶
def backtrack(nums: List[int], start: int):
    for i in range(start, len(nums)):
        # ...
        # é€’å½’éå†ä¸‹ä¸€å±‚å›æº¯æ ‘ï¼Œæ³¨æ„å‚æ•°
        backtrack(nums, i)
        # ...
```
è¿™ç›¸å½“äºç»™ä¹‹å‰çš„å›æº¯æ ‘æ·»åŠ äº†ä¸€æ¡æ ‘æï¼Œåœ¨éå†è¿™æ£µæ ‘çš„è¿‡ç¨‹ä¸­ï¼Œä¸€ä¸ªå…ƒç´ å¯ä»¥è¢«æ— é™æ¬¡ä½¿ç”¨ï¼š
![[Pasted image 20240705193125.png]]

å½“ç„¶ï¼Œè¿™æ ·è¿™æ£µå›æº¯æ ‘ä¼šæ°¸è¿œç”Ÿé•¿ä¸‹å»ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„é€’å½’å‡½æ•°éœ€è¦è®¾ç½®åˆé€‚çš„ base case ä»¥ç»“æŸç®—æ³•ï¼Œå³è·¯å¾„å’Œå¤§äºÂ `target`Â æ—¶å°±æ²¡å¿…è¦å†éå†ä¸‹å»äº†ã€‚

ä»£ç å¦‚ä¸‹ï¼š
```python
class Solution:  
    def __init__(self):  
        # è®°å½•ç»“æœ  
        self.res = []  
        # è®°å½•å›æº¯çš„è·¯å¾„  
        self.track = []  
        # è®°å½• track ä¸­çš„è·¯å¾„å’Œ  
        self.trackSum = 0  
  
    def combinationSum(self, candidates: List[int], target: int) -> List[List[int]]:  
        candidates.sort()  
        self.backtrack(candidates, target, 0)  
        return self.res  
  
    def backtrack(self, candidates: List[int], target: int, start: int):  
        # base caseï¼Œæ‰¾åˆ°ç›®æ ‡å’Œï¼Œè®°å½•ç»“æœ  
        if self.trackSum == target:  
            self.res.append(self.track.copy())  
            return  
        # base caseï¼Œè¶…è¿‡ç›®æ ‡å’Œï¼Œåœæ­¢å‘ä¸‹éå†  
        if self.trackSum > target:  
            return  
        # å›æº¯ç®—æ³•æ ‡å‡†æ¡†æ¶  
        for i in range(start, len(candidates)):  
            # é€‰æ‹© candidates[i]            
            self.track.append(candidates[i])  
            self.trackSum += candidates[i]  
            # é€’å½’éå†ä¸‹ä¸€å±‚å›æº¯æ ‘  
            # åŒä¸€å…ƒç´ å¯é‡å¤ä½¿ç”¨ï¼Œæ³¨æ„å‚æ•°  
            self.backtrack(candidates, target, i)  
            # æ’¤é”€é€‰æ‹© candidates[i]            
            self.track.pop()  
            self.trackSum -= candidates[i]
```

# æ’åˆ—ï¼ˆå…ƒç´ æ— é‡å¯å¤é€‰ï¼‰
åŠ›æ‰£ä¸Šæ²¡æœ‰é¢˜ç›®ç›´æ¥è€ƒå¯Ÿè¿™ä¸ªåœºæ™¯ï¼Œæˆ‘ä»¬ä¸å¦¨å…ˆæƒ³ä¸€ä¸‹ï¼Œ`nums`Â æ•°ç»„ä¸­çš„å…ƒç´ æ— é‡å¤ä¸”å¯å¤é€‰çš„æƒ…å†µä¸‹ï¼Œä¼šæœ‰å“ªäº›æ’åˆ—ï¼Ÿ

æ¯”å¦‚è¾“å…¥Â `nums = [1,2,3]`ï¼Œé‚£ä¹ˆè¿™ç§æ¡ä»¶ä¸‹çš„å…¨æ’åˆ—å…±æœ‰ 3^3 = 27 ç§ï¼š
```java
[
  [1,1,1],[1,1,2],[1,1,3],[1,2,1],[1,2,2],[1,2,3],[1,3,1],[1,3,2],[1,3,3],
  [2,1,1],[2,1,2],[2,1,3],[2,2,1],[2,2,2],[2,2,3],[2,3,1],[2,3,2],[2,3,3],
  [3,1,1],[3,1,2],[3,1,3],[3,2,1],[3,2,2],[3,2,3],[3,3,1],[3,3,2],[3,3,3]
]
```

**æ ‡å‡†çš„å…¨æ’åˆ—ç®—æ³•åˆ©ç”¨Â `used`Â æ•°ç»„è¿›è¡Œå‰ªæï¼Œé¿å…é‡å¤ä½¿ç”¨åŒä¸€ä¸ªå…ƒç´ ã€‚å¦‚æœå…è®¸é‡å¤ä½¿ç”¨å…ƒç´ çš„è¯ï¼Œç›´æ¥æ”¾é£è‡ªæˆ‘ï¼Œå»é™¤æ‰€æœ‰Â `used`Â æ•°ç»„çš„å‰ªæé€»è¾‘å°±è¡Œäº†**ã€‚

é‚£è¿™ä¸ªé—®é¢˜å°±ç®€å•äº†ï¼Œä»£ç å¦‚ä¸‹ï¼š
```python
from typing import List


class Solution:
    def __init__(self):
        self.res = []
        self.track = []
    
    def permuteRepeat(self, nums: List[int]) -> List[List[int]]:
        self.backtrack(nums)
        return self.res

    # å›æº¯ç®—æ³•æ ¸å¿ƒå‡½æ•°
    def backtrack(self, nums: List[int]) -> None:
        # base caseï¼Œåˆ°è¾¾å¶å­èŠ‚ç‚¹
        if len(self.track) == len(nums):
            # æ”¶é›†å¶å­èŠ‚ç‚¹ä¸Šçš„å€¼
            self.res.append(self.track[:])
            return

        # å›æº¯ç®—æ³•æ ‡å‡†æ¡†æ¶
        for i in range(len(nums)):
            # åšé€‰æ‹©
            self.track.append(nums[i])
            # è¿›å…¥ä¸‹ä¸€å±‚å›æº¯æ ‘
            self.backtrack(nums)
            # å–æ¶ˆé€‰æ‹©
            self.track.pop()
```

# æ€»ç»“
æ¥å›é¡¾ä¸€ä¸‹æ’åˆ—/ç»„åˆ/å­é›†é—®é¢˜çš„ä¸‰ç§å½¢å¼åœ¨ä»£ç ä¸Šçš„åŒºåˆ«ã€‚

ç”±äºå­é›†é—®é¢˜å’Œç»„åˆé—®é¢˜æœ¬è´¨ä¸Šæ˜¯ä¸€æ ·çš„ï¼Œæ— éå°±æ˜¯ base case æœ‰ä¸€äº›åŒºåˆ«ï¼Œæ‰€ä»¥æŠŠè¿™ä¸¤ä¸ªé—®é¢˜æ”¾åœ¨ä¸€èµ·çœ‹ã€‚

**å½¢å¼ä¸€ã€å…ƒç´ æ— é‡ä¸å¯å¤é€‰ï¼Œå³Â `nums`Â ä¸­çš„å…ƒç´ éƒ½æ˜¯å”¯ä¸€çš„ï¼Œæ¯ä¸ªå…ƒç´ æœ€å¤šåªèƒ½è¢«ä½¿ç”¨ä¸€æ¬¡**ï¼Œ`backtrack`Â æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š
```python
# ç»„åˆ/å­é›†é—®é¢˜å›æº¯ç®—æ³•æ¡†æ¶
def backtrack(nums: List[int], start: int):
    # å›æº¯ç®—æ³•æ ‡å‡†æ¡†æ¶
    for i in range(start, len(nums)):
        # åšé€‰æ‹©
        track.append(nums[i])
        # æ³¨æ„å‚æ•°
        backtrack(nums, i + 1)
        # æ’¤é”€é€‰æ‹©
        track.pop()

# æ’åˆ—é—®é¢˜å›æº¯ç®—æ³•æ¡†æ¶
def backtrack(nums: List[int]):
    for i in range(len(nums)):
        # å‰ªæé€»è¾‘
        if used[i]:
            continue
        # åšé€‰æ‹©
        used[i] = True
        track.append(nums[i])

        backtrack(nums)
        # æ’¤é”€é€‰æ‹©
        track.pop()
        used[i] = False
```

**å½¢å¼äºŒã€å…ƒç´ å¯é‡ä¸å¯å¤é€‰ï¼Œå³Â `nums`Â ä¸­çš„å…ƒç´ å¯ä»¥å­˜åœ¨é‡å¤ï¼Œæ¯ä¸ªå…ƒç´ æœ€å¤šåªèƒ½è¢«ä½¿ç”¨ä¸€æ¬¡**ï¼Œå…¶å…³é”®åœ¨äºæ’åºå’Œå‰ªæï¼Œ`backtrack`Â æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š
```python
nums.sort()
# ç»„åˆ/å­é›†é—®é¢˜å›æº¯ç®—æ³•æ¡†æ¶
def backtrack(nums: List[int], start: int):
    # å›æº¯ç®—æ³•æ ‡å‡†æ¡†æ¶
    for i in range(start, len(nums)):
        # å‰ªæé€»è¾‘ï¼Œè·³è¿‡å€¼ç›¸åŒçš„ç›¸é‚»æ ‘æ
        if i > start and nums[i] == nums[i - 1]:
            continue
        # åšé€‰æ‹©
        track.append(nums[i])
        # æ³¨æ„å‚æ•°
        backtrack(nums, i + 1)
        # æ’¤é”€é€‰æ‹©
        track.pop()


nums.sort()
# æ’åˆ—é—®é¢˜å›æº¯ç®—æ³•æ¡†æ¶
def backtrack(nums: List[int]):
    for i in range(len(nums)):
        # å‰ªæé€»è¾‘
        if used[i]:
            continue
        # å‰ªæé€»è¾‘ï¼Œå›ºå®šç›¸åŒçš„å…ƒç´ åœ¨æ’åˆ—ä¸­çš„ç›¸å¯¹ä½ç½®
        if i > 0 and nums[i] == nums[i - 1] and not used[i - 1]:
            continue
        # åšé€‰æ‹©
        used[i] = True
        track.append(nums[i])

        backtrack(nums)
        # æ’¤é”€é€‰æ‹©
        track.pop()
        used[i] = False
```

**å½¢å¼ä¸‰ã€å…ƒç´ æ— é‡å¯å¤é€‰ï¼Œå³Â `nums`Â ä¸­çš„å…ƒç´ éƒ½æ˜¯å”¯ä¸€çš„ï¼Œæ¯ä¸ªå…ƒç´ å¯ä»¥è¢«ä½¿ç”¨è‹¥å¹²æ¬¡**ï¼Œåªè¦åˆ æ‰å»é‡é€»è¾‘å³å¯ï¼Œ`backtrack`Â æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š
```python
# ç»„åˆ/å­é›†é—®é¢˜å›æº¯ç®—æ³•æ¡†æ¶
def backtrack(nums: List[int], start: int):
    # å›æº¯ç®—æ³•æ ‡å‡†æ¡†æ¶
    for i in range(start, len(nums)):
        # åšé€‰æ‹©
        track.append(nums[i])
        # æ³¨æ„å‚æ•°
        backtrack(nums, i)
        # æ’¤é”€é€‰æ‹©
        track.pop()

# æ’åˆ—é—®é¢˜å›æº¯ç®—æ³•æ¡†æ¶
def backtrack(nums: List[int]):
    for i in range(len(nums)):
        # åšé€‰æ‹©
        track.append(nums[i])
        backtrack(nums)
        # æ’¤é”€é€‰æ‹©
        track.pop()
```

åªè¦ä»æ ‘çš„è§’åº¦æ€è€ƒï¼Œè¿™äº›é—®é¢˜çœ‹ä¼¼å¤æ‚å¤šå˜ï¼Œå®åˆ™æ”¹æ”¹ base case å°±èƒ½è§£å†³ã€‚